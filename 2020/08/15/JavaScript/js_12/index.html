<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>12 JavaScript Ajax | 宋涛的博客</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="JavaScript" />
    
    <meta name="description" content="JavaScript 与 服务器通信">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="12 JavaScript Ajax">
<meta property="og:url" content="http://yoursite.com/2020/08/15/JavaScript/js_12/index.html">
<meta property="og:site_name" content="宋涛的博客">
<meta property="og:description" content="JavaScript 与 服务器通信">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-09-13T12:20:12.444Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="12 JavaScript Ajax">
<meta name="twitter:description" content="JavaScript 与 服务器通信">
    

    
        <link rel="alternate" href="/" title="宋涛的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">漫步在大陆上的海龟</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Go/">Go</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Python/">Python</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/分布式/">分布式</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/前端/">前端</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/存储/">存储</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/运维/">运维</a></li></ul>
                                    
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/前端/">前端</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-JavaScript/js_12" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        12 JavaScript Ajax
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2020/08/15/JavaScript/js_12/" class="article-date">
            <time datetime="2020-08-14T16:00:00.000Z" itemprop="datePublished">2020-08-15</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/JavaScript/">JavaScript<span class="tag-count">11</span></a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>JavaScript 与 服务器通信<br><a id="more"></a></p>
<h2 id="1-Ajax"><a href="#1-Ajax" class="headerlink" title="1. Ajax"></a>1. Ajax</h2><p>Ajax，全称 Asynchronous JavaScript+XML，能够向服务器请求额外的数据而无须卸载页面。Ajax通信与数据格式无关；这种技术就是无须刷新页面即可从服务器取得数据，但不一定是XML数据。</p>
<p>本节我们将介绍 Ajax 的如下实现:</p>
<ol>
<li>XMLHttpRequest: ES5 中 JavaScript 的 http 客户端，能够以异步方式发送请求</li>
<li>CORS Ajax: 跨域资源请求<ul>
<li>图片 Ping</li>
<li>JSONP</li>
</ul>
</li>
<li>Comet: 一种服务器向页面推送数据的技术</li>
<li>SSE: （Server-SentEvents，服务器发送事件）是围绕只读Comet交互推出的API或者模式</li>
</ol>
<p>这些技术实现的思路大体上都是相似的，通过内置一个新的对象来封装通信的细节，并通过事件触发的方式来实现异步。JavaScript http 请求与异步编程在 ES6 中得到了很大改进，ES5 中的很多计数目前已经很少使用，因此对上面这些技术我们只介绍基本原理不会详解介绍 API 接口。后面 ES6 部分会详细介绍最新的技术。</p>
<p>不过在此之前我们要学习一下 JavaScript 如何处理 JSON 数据，毕竟这是现在主流的数据交换格式。</p>
<h2 id="2-JSON-解析"><a href="#2-JSON-解析" class="headerlink" title="2.JSON 解析"></a>2.JSON 解析</h2><p>ECMAScript 5对解析JSON的行为进行规范，定义了全局对象JSON。JSON对象有两个方法:</p>
<ol>
<li>stringify(): 把JavaScript对象序列化为JSON字符串和</li>
<li>parse(): 把JSON字符串解析为原生JavaScript值</li>
</ol>
<h3 id="2-1-JSON-stringify"><a href="#2-1-JSON-stringify" class="headerlink" title="2.1 JSON.stringify"></a>2.1 JSON.stringify</h3><p>JSON.stringify(js_obj, filter, indentation)</p>
<ul>
<li>参数:<ul>
<li>js_obj: 被序列化的 JavaScript 值</li>
<li>filter: 过滤器，数组或者一个函数</li>
<li>indentation: 是否保留缩进<ul>
<li>如果这个参数是一个数值，那它表示的是每个级别缩进的空格数</li>
<li>如果缩进参数是一个字符串而非数值，则这个字符串将在JSON字符串中被用作缩进字符</li>
<li>缩进空格数或字符数最大长度为 10，超过 10 会自动截断为 10 </li>
</ul>
</li>
</ul>
</li>
<li>注意:<ul>
<li>在序列化JavaScript对象时，所有函数及原型成员都会被有意忽略，不体现在结果中</li>
<li>值为undefined的任何属性也都会被跳过</li>
</ul>
</li>
</ul>
<p>如果过滤器参数是数组，序列化的结果将只包含数组中列出的属性。如果第二个参数是函数，传入的函数接收两个参数，属性（键）名和属性值。属性名只能是字符串，而在值并非键值对儿结构的值时，键名可以是空字符串。函数返回的值就是相应键的值，如果函数返回了undefined，那么相应的属性会被忽略。</p>
<h3 id="2-2-JSON-parse"><a href="#2-2-JSON-parse" class="headerlink" title="2.2 JSON.parse"></a>2.2 JSON.parse</h3><p>JSON.parse(json_string, replacer)</p>
<ul>
<li>参数:<ul>
<li>json_string: JSON 字符串</li>
<li>replacer: 替换函数，接收两个参数属性名和值<ul>
<li>如果还原函数返回undefined，则表示要从结果中删除相应的键</li>
<li>如果返回其他值，则将该值插入到结果中。</li>
</ul>
</li>
</ul>
</li>
<li>注意:<ul>
<li>字符串不是有效的JSON，该方法会抛出错误</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> book = <span class="built_in">JSON</span>.parse(<span class="string">'&#123;"name": "中国"&#125;'</span>)</div></pre></td></tr></table></figure>
<h3 id="2-3-对象-toJSON-方法"><a href="#2-3-对象-toJSON-方法" class="headerlink" title="2.3 对象 toJSON 方法"></a>2.3 对象 toJSON 方法</h3><p>可以给对象定义toJSON()方法，返回其自身的JSON数据格式。假设把一个对象传入JSON.stringify()，序列化该对象的顺序如下:</p>
<ol>
<li>如果存在toJSON()方法而且能通过它取得有效的值，则调用该方法。否则，返回对象本身</li>
<li>如果提供了第二个参数，应用这个函数过滤器。传入函数过滤器的值是第(1)步返回的值</li>
<li>对第(2)步返回的每个值进行相应的序列化</li>
<li>如果提供了第三个参数，执行相应的格式化</li>
</ol>
<h2 id="2-XMLHTTPRequest"><a href="#2-XMLHTTPRequest" class="headerlink" title="2. XMLHTTPRequest"></a>2. XMLHTTPRequest</h2><p>一个使用 XMLHTTPRequest 发送请求到接受响应的完整示例如下所示:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHTTPRequest();</div><div class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"example.php"</span>, <span class="literal">false</span>); <span class="comment">// 启动请求</span></div><div class="line">xhr.overrideMimeType(<span class="string">"text/xml"</span>); <span class="comment">// 重写XHR响应的MIME类型</span></div><div class="line"></div><div class="line">xhr.setRequestHeader(<span class="string">"myHeader"</span>, <span class="string">"value"</span>); <span class="comment">// 自定义请求头</span></div><div class="line">xhr.send(<span class="literal">null</span>); <span class="comment">// 发送请求</span></div><div class="line">xhr.abort(); <span class="comment">// abort() 方法用于取消异步请求</span></div><div class="line"></div><div class="line">xhr.getResponseHeader(<span class="string">"myHeader"</span>); <span class="comment">// 获取响应头信息</span></div><div class="line">xhr.getAllResponseHeader(); <span class="comment">// 取得一个包含所有头部信息的长字符串</span></div></pre></td></tr></table></figure>
<p>默认情况下，在发送XHR请求的同时，还会发送下列头部信息:</p>
<ol>
<li>Accept：浏览器能够处理的内容类型</li>
<li>Accept-Charset：浏览器能够显示的字符集</li>
<li>Accept-Encoding：浏览器能够处理的压缩编码</li>
<li>Accept-Language：浏览器当前设置的语言</li>
<li>Connection：浏览器与服务器之间连接的类型</li>
<li>Cookie：当前页面设置的任何Cookie</li>
<li>Host：发出请求的页面所在的域</li>
<li>Referer：发出请求的页面的URI</li>
<li>User-Agent：浏览器的用户代理字符串</li>
</ol>
<p>在发送请求时:</p>
<ol>
<li>查询字符串中每个参数的名称和值都必须使用encodeURIComponent()进行编码</li>
<li>使用XHR来模仿表单提交：首先将 Content-Type 头部信息设置为 application/x-www-form-urlencoded</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">xhr.open(<span class="string">"post"</span>, <span class="string">"postexample.php"</span>, <span class="literal">false</span>); <span class="comment">// 启动请求</span></div><div class="line">xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>); <span class="comment">// 自定义请求头</span></div><div class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">"form"</span>);</div><div class="line">xhr.send(serialize(form)); <span class="comment">// 将页面中表单的数据进行序列化</span></div></pre></td></tr></table></figure>
<h3 id="2-1-请求发送"><a href="#2-1-请求发送" class="headerlink" title="2.1 请求发送"></a>2.1 请求发送</h3><p>XMLHTTPRequest.open(method, url, async)</p>
<ul>
<li>作用: 不会真正发送请求，而只是启动一个请求以备发送</li>
<li>参数:<ul>
<li>method: get/post</li>
<li>url: URL相对于执行代码的当前页面</li>
<li>async: 是否以同步方式发送请求，false 以同步方式发送请求 </li>
</ul>
</li>
</ul>
<p>XMLHTTPRequest.send(body)</p>
<ul>
<li>作用: 发送请求</li>
<li>参数: <ul>
<li>body: 作为请求主体发送的数据，如果不需要通过请求主体发送数据，则必须传入null(为了浏览器兼容)</li>
</ul>
</li>
</ul>
<p>XMLHTTPRequest.abort():</p>
<ul>
<li>作用: 取消异步请求</li>
<li>注意: <ul>
<li>调用这个方法后，XHR对象会停止触发事件</li>
<li>也不再允许访问任何与响应有关的对象属性</li>
<li>在终止请求之后，还应该对XHR对象进行解引用操作</li>
<li>由于内存原因，不建议重用XHR对象。</li>
</ul>
</li>
</ul>
<p>XMLHTTPRequest.setRequestHeader(header, value):</p>
<ul>
<li>作用: 自定义请求头部</li>
<li>注意: 必须在调用open()方法之后且调用send()方法之前调用setRequestHeader()</li>
</ul>
<h3 id="2-2-接受响应"><a href="#2-2-接受响应" class="headerlink" title="2.2 接受响应"></a>2.2 接受响应</h3><p>在收到响应后，响应的数据会自动填充XHR对象的如下属性:</p>
<ol>
<li>responseText：作为响应主体被返回的文本</li>
<li>responseXML：如果响应的内容类型是”text/xml”或”application/xml”，这个属性中将保存包含着响应数据的XML DOM文档</li>
<li>status：响应的HTTP状态</li>
<li>statusText: HTTP状态的说明</li>
</ol>
<p>在接收到响应后，第一步是检查status属性，以确定响应已经成功返回。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span> || xhr.status == <span class="number">304</span> )&#123;</div><div class="line">    alter(xhr.responseText);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    alter(<span class="string">"Request unsucess"</span> + xhr.status);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-3-表单处理"><a href="#2-3-表单处理" class="headerlink" title="2.3 表单处理"></a>2.3 表单处理</h3><p>XMLHttpRequest 2级定义了FormData类型为序列化表单以及创建与表单格式相同的数据（用于通过XHR传输）提供了便利。创建了FormData的实例后，可以将它直接传给XHR的send()方法。使用FormData的方便之处体现在不必明确地在XHR对象上设置请求头部。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</div><div class="line">data.append(<span class="string">"name"</span>, <span class="string">"tsong"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData(<span class="built_in">document</span>.forms[<span class="number">0</span>]);</div><div class="line">xhr.send(data);</div></pre></td></tr></table></figure>
<h3 id="2-4-XMLHTTPRequest-异步事件"><a href="#2-4-XMLHTTPRequest-异步事件" class="headerlink" title="2.4 XMLHTTPRequest 异步事件"></a>2.4 XMLHTTPRequest 异步事件</h3><p>XMLHTTPRequest 包含了如下事件:</p>
<ol>
<li>readystatechange</li>
<li>timeout</li>
</ol>
<h4 id="readystatechange"><a href="#readystatechange" class="headerlink" title="readystatechange"></a>readystatechange</h4><p>异步发送请求时，通过检测 XHR 对象的 readyState 属性，可以判断请求/响应当前活动阶段:</p>
<ol>
<li>0：未初始化，尚未调用open()方法</li>
<li>1：启动，已经调用open()方法，但尚未调用send()方法</li>
<li>2：发送，已经调用send()方法，但尚未接收到响应</li>
<li>3：接收，已经接收到部分响应数据</li>
<li>4：完成，已经接收到全部响应数据，而且已经可以在客户端使用了</li>
</ol>
<p>只要readyState属性的值由一个值变成另一个值，都会触发一次readystatechange事件。通常，我们只对readyState值为4的阶段感兴趣，因为这时所有数据都已经就绪。不过，必须在调用open()之前指定onreadystatechange事件处理程序才能确保跨浏览器兼容性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = XMLHTTPRequest();</div><div class="line"></div><div class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span> (xhr.readstatechange == <span class="number">4</span>)&#123;</div><div class="line">        <span class="keyword">if</span> (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span> || xhr.status == <span class="number">304</span> )&#123;</div><div class="line">            alter(xhr.responseText);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            alter(<span class="string">"Request unsucess"</span> + xhr.status);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"example.php"</span>, <span class="literal">true</span>);</div><div class="line">xhr.send(<span class="literal">null</span>);</div></pre></td></tr></table></figure>
<p>这里有两点需要注意的地方:</p>
<ol>
<li>与其他事件处理程序不同，这里没有向onreadystatechange事件处理程序中传递event对象；必须通过XHR对象本身来确定下一步该怎么做</li>
<li>没有使用this对象，原因是onreadystatechange事件处理程序的作用域问题。如果使用this对象，在有的浏览器中会导致函数执行失败，或者导致错误发生</li>
</ol>
<h4 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a>timeout</h4><p>为XHR对象添加了一个timeout属性，表示请求在等待响应多少毫秒之后就终止。在给timeout设置一个数值后，如果在规定的时间内浏览器还没有接收到响应，那么就会触发timeout事件，进而会调用ontimeout事件处理程序。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = XMLHTTPRequest();</div><div class="line"></div><div class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span> (xhr.readstatechange == <span class="number">4</span>)&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="keyword">if</span> (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span> || xhr.status == <span class="number">304</span> )&#123;</div><div class="line">                alter(xhr.responseText);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                alter(<span class="string">"Request unsucess"</span> + xhr.status);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</div><div class="line">            <span class="comment">// </span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"example.php"</span>, <span class="literal">true</span>);</div><div class="line">xhr.timeout = <span class="number">1000</span>;</div><div class="line">xhr.ontimeout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    alter(<span class="string">"Request timeout"</span>)</div><div class="line">&#125;;</div><div class="line">xhr.send(<span class="literal">null</span>);</div></pre></td></tr></table></figure>
<p>在上面的示例中，如果请求在 1s 内没有返回，就会自动终止。请求终止时，会调用ontimeout事件处理程序。但此时readyState可能已经改变为4了，这意味着会调用onreadystatechange事件处理程序。可是，如果在超时终止请求之后再访问status属性，就会导致错误。为避免浏览器报告错误，可以将检查status属性的语句封装在一个try-catch语句当中。</p>
<h3 id="2-5-进度事件"><a href="#2-5-进度事件" class="headerlink" title="2.5 进度事件"></a>2.5 进度事件</h3><p>Progress Events 定义了与客户端服务器通信有关的事件。这些事件最早其实只针对XHR操作，但目前也被其他API借鉴。有以下6个进度事件:</p>
<ol>
<li>loadstart：在接收到响应数据的第一个字节时触发</li>
<li>progress：<ul>
<li>在接收响应期间持续不断地触发</li>
<li>onprogress事件处理程序会接收到一个event对象，其target属性是XHR对象</li>
<li>target 包含着三个额外的属性：lengthComputable、position和totalSize</li>
<li>为确保正常执行，必须在调用open()方法之前添加onprogress事件处理程序</li>
</ul>
</li>
<li>error：在请求发生错误时触发</li>
<li>abort：在因为调用abort()方法而终止连接时触发</li>
<li>load：<ul>
<li>在接收到完整的响应数据时触发</li>
<li>load事件，用以替代 readystatechange 事件</li>
<li>而onload事件处理程序会接收到一个event对象，其target属性就指向XHR对象实例</li>
<li>只要浏览器接收到服务器的响应，不管其状态如何，都会触发load事件。而这意味着你必须要检查status属性</li>
<li>结果是不如直接使用 readystatechange 事件</li>
</ul>
</li>
<li>loadend：在通信完成或者触发error、abort或load事件后触发</li>
</ol>
<h2 id="3-CORS"><a href="#3-CORS" class="headerlink" title="3. CORS"></a>3. CORS</h2><p>默认情况下，XHR对象只能访问与包含它的页面位于同一个域中的资源。CORS（Cross-Origin Resource Sharing，跨源资源共享）是W3C的一个工作草案，定义了在必须访问跨源资源时，浏览器与服务器应该如何沟通。CORS背后的基本思想，就是使用自定义的HTTP头部让浏览器与服务器进行沟通，从而决定请求或响应是应该成功，还是应该失败。</p>
<p>大多数浏览器都通过XMLHttpRequest对象实现了对CORS的原生支持。跨域 XHR 有一些安全限制:</p>
<ol>
<li>不能使用setRequestHeader()设置自定义头部。</li>
<li>不能发送和接收cookie。</li>
<li>调用getAllResponseHeaders()方法总会返回空字符串</li>
</ol>
<p>在CORS出现以前，要实现跨域Ajax通信颇费一些周折。开发人员想出了一些办法，利用DOM中能够执行跨域请求的功能。</p>
<h3 id="3-1-图片Ping"><a href="#3-1-图片Ping" class="headerlink" title="3.1 图片Ping"></a>3.1 图片Ping</h3><p>第一种跨域请求技术是使用<code>&lt;img&gt;</code>标签，因为加载图片无须担心跨域问题。通过动态地创建图像，使用它们的onload和onerror事件处理程序来确定是否接收到了响应。</p>
<p>图像Ping是与服务器进行简单、单向的跨域通信的一种方式。请求的数据是通过查询字符串形式发送的，而响应可以是任意内容，但通常是像素图或204响应。通过图像Ping，浏览器得不到任何具体的数据，但通过侦听load和error事件，它能知道响应是什么时候接收到的。图像Ping最常用于跟踪用户点击页面或动态广告曝光次数。</p>
<h3 id="3-2-JSONP"><a href="#3-2-JSONP" class="headerlink" title="3.2 JSONP"></a>3.2 JSONP</h3><p>JSONP由两部分组成：回调函数和数据。回调函数是当响应到来时应该在页面中调用的函数。回调函数的名字一般是在请求中指定的。而数据就是传入回调函数中的JSON数据。下面是一个典型的JSONP请求。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http:<span class="comment">//tst.com/json/?callback=handlRes</span></div></pre></td></tr></table></figure>
<p>JSONP是通过动态<code>&lt;script&gt;</code>元素来使用的，使用时可以为src属性指定一个跨域URL。这里的<code>&lt;script&gt;</code>元素与<code>&lt;img&gt;</code>元素类似，都有能力不受限制地从其他域加载资源。因为JSONP是有效的JavaScript代码，所以在请求完成后，即在JSONP响应加载到页面中以后，就会立即执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleRes</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> respose.ip;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</div><div class="line">script.scr = <span class="string">"http://tst.com/json/?callback=handlRes"</span>;</div><div class="line"><span class="built_in">document</span>.body.insertBefore(script, <span class="built_in">document</span>.body.firstChild);</div></pre></td></tr></table></figure>
<h2 id="4-Comet"><a href="#4-Comet" class="headerlink" title="4. Comet"></a>4. Comet</h2><p>Ajax是一种从页面向服务器请求数据的技术，而Comet则是一种服务器向页面推送数据的技术。有两种实现Comet的方式：长轮询和流：</p>
<ol>
<li>短轮询: 浏览器定时向服务器发送请求，看有没有更新的数据</li>
<li>长轮询: <ul>
<li>页面发起一个到服务器的请求，然后服务器一直保持连接打开，直到有数据可发送。发送完数据之后，浏览器关闭连接，随即又发起一个到服务器的新请求</li>
<li>短轮询是服务器立即发送响应，无论数据是否有效，而长轮询是等待发送响应。</li>
<li>轮询的优势是所有浏览器都支持，因为使用XHR对象和setTimeout()就能实现</li>
</ul>
</li>
<li>HTTP流:<ul>
<li>流不同于上述两种轮询，因为它在页面的整个生命周期内只使用一个HTTP连接</li>
<li>具体来说，就是浏览器向服务器发送一个请求，而服务器保持连接打开，然后周期性地向浏览器发送数据</li>
<li>通过侦听readystatechange事件及检测readyState的值是否为3，就可以利用XHR对象实现HTTP流</li>
<li>当readyState值变为3时，responseText属性中就会保存接收到的所有数据</li>
</ul>
</li>
</ol>
<h2 id="5-SSE"><a href="#5-SSE" class="headerlink" title="5. SSE"></a>5. SSE</h2><p>SSE API用于创建到服务器的单向连接:</p>
<ol>
<li>服务器通过这个连接可以发送任意数量的数据</li>
<li>服务器响应的MIME类型必须是text/event-stream，而且是浏览器中的JavaScript API能解析格式输出</li>
<li>SSE支持短轮询、长轮询和HTTP流，而且能在断开连接时自动确定何时重新连接</li>
</ol>
<p>有了这么简单实用的API，再实现Comet就容易多了。</p>
<h3 id="5-1-SSE-API"><a href="#5-1-SSE-API" class="headerlink" title="5.1 SSE API"></a>5.1 SSE API</h3><p>要预订新的事件流，首先要创建一个新的EventSource对象，并传进一个入口点: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 传入的URL必须与创建对象的页面同</span></div><div class="line"><span class="keyword">var</span> source = New EventSource(<span class="string">"example.php"</span>);</div><div class="line">source.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123; <span class="comment">// 接收数据</span></div><div class="line">    <span class="keyword">var</span> data = event.data;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>EventSource对象会保持与服务器的活动连接。如果连接断开，还会重新连接。EventSource的实例有一个readyState属性，值为0表示正连接到服务器，值为1表示打开了连接，值为2表示关闭了连接。另外，还有以下三个事件:</p>
<ol>
<li>open：在建立连接时触发</li>
<li>message：在从服务器接收到新事件时触发</li>
<li>error：在无法建立连接时触发</li>
</ol>
<h2 id="6-WebSocket"><a href="#6-WebSocket" class="headerlink" title="6. WebSocket"></a>6. WebSocket</h2><p>Web Sockets的目标是在一个单独的持久连接上提供全双工、双向通信。在JavaScript中创建了Web Socket之后，会有一个HTTP请求发送到浏览器以发起连接。在取得服务器响应后，建立的连接会使用HTTP升级从HTTP协议交换为WebSocket协议。也就是说，使用标准的HTTP服务器无法实现WebSockets，只有支持这种协议的专门服务器才能正常工作。</p>
<p>Web Sockets 使用的协议是 <code>ws://</code> 和 <code>wss://</code>(加密)。使用自定义协议而非HTTP协议的好处是，能够在客户端和服务器之间发送非常少量的数据，而不必担心HTTP那样字节级的开销。</p>
<h3 id="6-1-WebSocket-API"><a href="#6-1-WebSocket-API" class="headerlink" title="6.1 WebSocket API"></a>6.1 WebSocket API</h3><p>要创建Web Socket，先实例一个WebSocket对象并传入要连接的URL：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">"ws://www.example.com/server.php"</span>);</div><div class="line">socket.close();</div><div class="line">socket.send(<span class="string">"hello"</span>); <span class="comment">// 发送数据</span></div><div class="line"></div><div class="line"><span class="comment">// 必须使用DOM 0级语法分别定义每个事件处理程序</span></div><div class="line">socket.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123; <span class="comment">// 通过 message 事件接收数据</span></div><div class="line">    <span class="keyword">var</span> data = event.data</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>必须给WebSocket构造函数传入绝对URL。同源策略对Web Sockets不适用，因此可以通过它打开到任何站点的连接。WebSocket也有一个表示当前状态的readyState属性:</p>
<ol>
<li>WebSocket.OPENING (0)：正在建立连接</li>
<li>WebSocket.OPEN (1)：已经建立连接</li>
<li>WebSocket.CLOSING (2)：正在关闭连接</li>
<li>WebSocket.CLOSE (3)：已经关闭连接</li>
</ol>
<p>WebSocket没有readystatechange事件；不过，它有其他事件，对应着不同的状态:</p>
<ol>
<li>当服务器向客户端发来消息时，WebSocket对象就会触发message事件，数据保存在 event.data 中</li>
<li>open：在成功建立连接时触发</li>
<li>error：在发生错误时触发，连接不能持续</li>
<li>close：在连接关闭时触发<ul>
<li>close事件的event对象有额外的信息</li>
</ul>
</li>
</ol>
<p>open,error,close 的事件对象有三个额外的属性：wasClean、code和reason:</p>
<ol>
<li>wasClean是一个布尔值，表示连接是否已经明确地关闭；</li>
<li>code是服务器返回的数值状态码</li>
<li>reason是一个字符串，包含服务器发回的消息</li>
</ol>
<p>在考虑是使用SSE还是使用Web Sockets时，可以考虑如下几个因素:</p>
<ol>
<li>是否有自由度建立和维护Web Sockets服务器，SSE通过常规HTTP通信，因此现有服务器就可以满足需求</li>
<li>到底需不需要双向通信，只需读取服务器数据（如比赛成绩），那么SSE比较容易实现</li>
</ol>

        </div>
        <!--  -->
        <footer class="article-footer">
            



    <a data-url="http://yoursite.com/2020/08/15/JavaScript/js_12/" data-id="ckh24n3yp00095ou9ibmbf4o0" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-google-plus"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2020/08/16/ES6/es6_1/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            1 ES6 入门开篇
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2020/08/14/JavaScript/js_11/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">11 JavaScript 表单处理</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/09/06/html_css/html_css_6/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/前端/">前端</a></p>
                            <p class="item-title"><a href="/2020/09/06/html_css/html_css_6/" class="title">6 CSS 布局-响应式布局</a></p>
                            <p class="item-date"><time datetime="2020-09-05T16:00:00.000Z" itemprop="datePublished">2020-09-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/09/05/html_css/html_css_5/" class="thumbnail">
    
    
        <span style="background-image:url(/images/html_css/grid.png)" alt="5 CSS 布局-网格" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/前端/">前端</a></p>
                            <p class="item-title"><a href="/2020/09/05/html_css/html_css_5/" class="title">5 CSS 布局-网格</a></p>
                            <p class="item-date"><time datetime="2020-09-04T16:00:00.000Z" itemprop="datePublished">2020-09-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/09/04/html_css/html_css_4/" class="thumbnail">
    
    
        <span style="background-image:url(/images/html_css/flex_terms.png)" alt="4 CSS 布局-弹性盒子和多列布局" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/前端/">前端</a></p>
                            <p class="item-title"><a href="/2020/09/04/html_css/html_css_4/" class="title">4 CSS 布局-弹性盒子和多列布局</a></p>
                            <p class="item-date"><time datetime="2020-09-03T16:00:00.000Z" itemprop="datePublished">2020-09-04</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/09/03/html_css/html_css_2/" class="thumbnail">
    
    
        <span style="background-image:url(/images/JavaScript/select_css.png)" alt="2 CSS 选择器" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/前端/">前端</a></p>
                            <p class="item-title"><a href="/2020/09/03/html_css/html_css_2/" class="title">2 CSS 选择器</a></p>
                            <p class="item-date"><time datetime="2020-09-02T16:00:00.000Z" itemprop="datePublished">2020-09-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/09/03/html_css/html_css_3/" class="thumbnail">
    
    
        <span style="background-image:url(/images/html_css/标准盒模型.png)" alt="3 CSS 布局-基础" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/前端/">前端</a></p>
                            <p class="item-title"><a href="/2020/09/03/html_css/html_css_3/" class="title">3 CSS 布局-基础</a></p>
                            <p class="item-date"><time datetime="2020-09-02T16:00:00.000Z" itemprop="datePublished">2020-09-03</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">56</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">31</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/存储/">存储</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维/">运维</a><span class="category-list-count">188</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">48</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">29</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Brendan-Gregg/">Brendan Gregg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML-CSS/">HTML&CSS</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript-入门/">JavaScript 入门</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8S/">K8S</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux性能调优/">Linux性能调优</a><span class="tag-list-count">49</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL实战45讲/">MySQL实战45讲</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go语言入门/">go语言入门</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wrapt/">wrapt</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/入门指南/">入门指南</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据密集型应用/">数据密集型应用</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a><span class="tag-list-count">39</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/极客时间/">极客时间</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-Linux/">马哥 Linux</a><span class="tag-list-count">135</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-MySQL-运维/">马哥 MySQL 运维</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高性能的MySQL/">高性能的MySQL</a><span class="tag-list-count">5</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Brendan-Gregg/" style="font-size: 10px;">Brendan Gregg</a> <a href="/tags/ES6/" style="font-size: 16.15px;">ES6</a> <a href="/tags/HTML-CSS/" style="font-size: 13.08px;">HTML&CSS</a> <a href="/tags/JavaScript/" style="font-size: 15.38px;">JavaScript</a> <a href="/tags/JavaScript-入门/" style="font-size: 10px;">JavaScript 入门</a> <a href="/tags/K8S/" style="font-size: 10px;">K8S</a> <a href="/tags/Linux性能调优/" style="font-size: 19.23px;">Linux性能调优</a> <a href="/tags/MySQL实战45讲/" style="font-size: 17.69px;">MySQL实战45讲</a> <a href="/tags/go语言入门/" style="font-size: 14.62px;">go语言入门</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/python/" style="font-size: 10.77px;">python</a> <a href="/tags/wrapt/" style="font-size: 16.92px;">wrapt</a> <a href="/tags/入门指南/" style="font-size: 12.31px;">入门指南</a> <a href="/tags/数据密集型应用/" style="font-size: 11.54px;">数据密集型应用</a> <a href="/tags/数据结构与算法/" style="font-size: 18.46px;">数据结构与算法</a> <a href="/tags/极客时间/" style="font-size: 17.69px;">极客时间</a> <a href="/tags/马哥-Linux/" style="font-size: 20px;">马哥 Linux</a> <a href="/tags/马哥-MySQL-运维/" style="font-size: 13.85px;">马哥 MySQL 运维</a> <a href="/tags/高性能的MySQL/" style="font-size: 12.31px;">高性能的MySQL</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">讨论区</h3>
        <div class="widget">
            <h4> 联系我 <h4>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2020 宋涛</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://yoursite.com/2020/08/15/JavaScript/js_12/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
