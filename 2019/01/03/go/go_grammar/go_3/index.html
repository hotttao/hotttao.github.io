<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>3 go 基础数据类型 | 宋涛的博客</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="go语言入门" />
    
    <meta name="description" content="Go 的类型系统">
<meta name="keywords" content="go语言入门">
<meta property="og:type" content="article">
<meta property="og:title" content="3 go 基础数据类型">
<meta property="og:url" content="http://yoursite.com/2019/01/03/go/go_grammar/go_3/index.html">
<meta property="og:site_name" content="宋涛的博客">
<meta property="og:description" content="Go 的类型系统">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/go/grammar/go_type.jpg">
<meta property="og:updated_time" content="2019-04-14T01:55:16.587Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 go 基础数据类型">
<meta name="twitter:description" content="Go 的类型系统">
<meta name="twitter:image" content="http://yoursite.com/images/go/grammar/go_type.jpg">
    

    
        <link rel="alternate" href="/" title="宋涛的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">漫步在大陆上的海龟</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Go/">Go</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Python/">Python</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/分布式/">分布式</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/前端/">前端</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/存储/">存储</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/操作系统/">操作系统</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/运维/">运维</a></li></ul>
                                    
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Go/">Go</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-go/go_grammar/go_3" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        3 go 基础数据类型
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2019/01/03/go/go_grammar/go_3/" class="article-date">
            <time datetime="2019-01-02T16:00:00.000Z" itemprop="datePublished">2019-01-03</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/go语言入门/">go语言入门<span class="tag-count">11</span></a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>Go 的类型系统<br><img src="/images/go/grammar/go_type.jpg" alt="Hello World"></p>
<a id="more"></a>
<h2 id="1-Go-中的数据类型"><a href="#1-Go-中的数据类型" class="headerlink" title="1. Go 中的数据类型"></a>1. Go 中的数据类型</h2><p>Go语言将数据类型分为四类：基础类型、复合类型、引用类型和接口类型。基础类型，包括：数字、字符串和布尔型。复合数据类型包括数组和结构体(通过组合简单类型，来表达更加复杂的数据结构)。引用类型包括指针、切片、字典、函数、通道，虽然数据种类很多，但它们都是对程序中一个变量或状态的间接引用。函数和通道并不属于我们通常所说的数据类型，我们放在后面相关章节来介绍。</p>
<p>对于大多数编程语言来说，基础类型以及它们之上的可用运算符都是类似，更加需要我们注意的是，编程语言提供给我们的数据容器以及操作它们的方式。因此我们分成以下几个部分来讲解 Go 的类型系统。</p>
<ol>
<li>数值与布尔型</li>
<li>字符串与编码</li>
<li>数组与结构体</li>
<li>切片</li>
<li>字典</li>
</ol>
<p>本节我们先来介绍 Go 中的基本数据类型，即数值，布尔值和字符串。在介绍这些数据类型之前，我们先来谈谈变量类型的含义，这有助于加深我们对编程语言本身的理解。</p>
<h3 id="1-1-变量的类型"><a href="#1-1-变量的类型" class="headerlink" title="1.1 变量的类型"></a>1.1 变量的类型</h3><p>无论什么数据，在存储器内都是 0-1，那数据是数值还是字符完全取决于我们对这些二进制数据的解释。变量的类型就是用来定义对应存储值的属性特征，即它们在内部是如何表示的，支持的操作符，以及关联的方法集等。</p>
<p>而在一个编程语言类型系统中，除了内置的变量类型外，还有如下一些问题:</p>
<ol>
<li>自定义类型</li>
<li>定义新的类型名称(类型重命名)</li>
<li>类型转换</li>
</ol>
<h3 id="1-2-自定义类型"><a href="#1-2-自定义类型" class="headerlink" title="1.2 自定义类型"></a>1.2 自定义类型</h3><p>自定义类型允许我们在编程语言底层类型的基础上定义更加复杂的类型，它是面向对象编程的基础。在 Go 中自定义类型就是使用结构体。</p>
<h3 id="1-2-类型重命名"><a href="#1-2-类型重命名" class="headerlink" title="1.2 类型重命名"></a>1.2 类型重命名</h3><p>在任何程序中都会存在一些变量有着相同的内部结构，但是却表示完全不同的概念。例如，一个int类型的变量可以用来表示一个循环的迭代索引、或者一个时间戳、或者一个文件描述符。类型重命名就是为分隔不同概念的类型。新的类型名称使用类型声明语句创建。Go 的类型声明语法如下所示:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type 类型名字 底层类型</div></pre></td></tr></table></figure>
<p>新的类型和底层类型具有相同的底层结构，支持和底层类型相同的运算符。但是新类型与底层类型以及基于相同底层类型的不同新类型，是完全不不同的数据类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"><span class="keyword">type</span> Celsius <span class="keyword">float64</span> <span class="comment">// 摄氏温度</span></div><div class="line"><span class="keyword">type</span> Fahrenheit <span class="keyword">float64</span> <span class="comment">// 华氏温度</span></div><div class="line"></div><div class="line"><span class="comment">// 因为 Fahrenheit，float64，Celsius 是完全不同的类型，所以它们不能直接比较</span></div><div class="line"><span class="comment">// compile error: type mismatch</span></div><div class="line">fmt.Println(Fahrenheit(<span class="number">1.0</span>) == <span class="keyword">float64</span>(<span class="number">1.0</span>))</div><div class="line">fmt.Println(Fahrenheit(<span class="number">1.0</span>) == Celsius(<span class="number">1.0</span>))</div></pre></td></tr></table></figure>
<h3 id="1-2-类型转换"><a href="#1-2-类型转换" class="headerlink" title="1.2 类型转换"></a>1.2 类型转换</h3><p>对于每一个类型T，都有一个对应的类型转换操作T(x)，用于将x转为T类型。如果T是指针类型，可能会需要用小括弧包装T，比如 <code>(*int)(0)</code>。</p>
<p>在编程语言中，不同类型的变量之间是不能进行直接赋值和比较的，要这样做就需要显示或隐式的类型转换。对于不同编程语言而言，有不同的类型转换规则，但大多数规则都是类似。在 Go 中:</p>
<ol>
<li><code>数值</code>之间的转类型转换有一套特定规则，这个规则在不同的编程语言中是一样的，比如将浮点数转换为整数会损失小数部分</li>
<li><code>显示的类型转换T(x)</code>要求 <code>T</code> 和 <code>x</code> 具有相同的底层基础类型或指向相同底层结构的指针类型；对于数据容器而言需要它们有类似的实现，比如可以将一个字符串转为 []byte类型</li>
<li><code>自定义的新类型名称</code>，不会自动应用底层类型的隐式类型转换规则，一个命名类型的变量只能和另一个有相同类型的变量，或有着相同底层类型的未命名类型的值之间做比较；依赖相同底层类型的不同自定义类型之间想要进行比较或赋值必须进行显示的类型转换。</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="comment">// 自定义类型与其底层类型不可比较</span></div><div class="line"><span class="keyword">type</span> tt <span class="keyword">int</span></div><div class="line">fmt.Println(tt(<span class="number">1</span>) &gt; <span class="keyword">int</span>(<span class="number">0</span>)） <span class="comment">// compile error: type mismatch</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> c Celsius</div><div class="line"><span class="keyword">var</span> f Fahrenheit</div><div class="line">fmt.Println(c == <span class="number">0</span>) <span class="comment">// "true"</span></div><div class="line">fmt.Println(f &gt;= <span class="number">0</span>) <span class="comment">// "true"</span></div><div class="line"></div><div class="line"><span class="comment">// 依赖相同底层类型的不同自定义类型不可比较</span></div><div class="line">fmt.Println(c == f) <span class="comment">// compile error: type mismatch</span></div><div class="line">fmt.Println(c == Celsius(f)) <span class="comment">// "true"!</span></div></pre></td></tr></table></figure>
<p>说了这么多，接下来我们开始正式讲解 Go 中的数据类型。</p>
<h2 id="2-数值"><a href="#2-数值" class="headerlink" title="2. 数值"></a>2. 数值</h2><p>Go语言的数值类型包括几种不同大小的整数、浮点数和复数，还有一些为特定用途定义的类型别名。</p>
<h3 id="2-1-整数"><a href="#2-1-整数" class="headerlink" title="2.1 整数"></a>2.1 整数</h3><p>整数包括如下几种类型及类型别名：</p>
<table>
<thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">大小</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">uint8</td>
<td style="text-align:left">8</td>
<td style="text-align:left">无符号 8 位整型</td>
</tr>
<tr>
<td style="text-align:left">uint16</td>
<td style="text-align:left">16</td>
<td style="text-align:left">无符号 16 位整型</td>
</tr>
<tr>
<td style="text-align:left">uint32</td>
<td style="text-align:left">32</td>
<td style="text-align:left">无符号 32 位整型</td>
</tr>
<tr>
<td style="text-align:left">uint64</td>
<td style="text-align:left">64</td>
<td style="text-align:left">无符号 64 位整型</td>
</tr>
<tr>
<td style="text-align:left"><code>uint</code></td>
<td style="text-align:left">32 或 64位</td>
<td style="text-align:left">平台相关，取决于CPU平台机器字大小</td>
</tr>
<tr>
<td style="text-align:left"><code>int</code></td>
<td style="text-align:left">32 或 64位</td>
<td style="text-align:left">平台相关，取决于CPU平台机器字大小</td>
</tr>
<tr>
<td style="text-align:left">int8</td>
<td style="text-align:left">8</td>
<td style="text-align:left">有符号 8 位整型</td>
</tr>
<tr>
<td style="text-align:left">int16</td>
<td style="text-align:left">16</td>
<td style="text-align:left">有符号 16 位整型</td>
</tr>
<tr>
<td style="text-align:left">int32</td>
<td style="text-align:left">32</td>
<td style="text-align:left">有符号 32 位整型</td>
</tr>
<tr>
<td style="text-align:left">int64</td>
<td style="text-align:left">64</td>
<td style="text-align:left">有符号 64 位整型</td>
</tr>
<tr>
<td style="text-align:left"><code>byte</code></td>
<td style="text-align:left">8, int8的别名</td>
<td style="text-align:left">表示原始的二进制数据</td>
</tr>
<tr>
<td style="text-align:left"><code>rune</code></td>
<td style="text-align:left">32, int32的别名</td>
<td style="text-align:left"><code>Unicode</code>字符，表示一个<code>Unicode</code>码点</td>
</tr>
<tr>
<td style="text-align:left"><code>uintptr</code></td>
<td style="text-align:left">无符号整数，没有明确指定大小</td>
<td style="text-align:left">用于存放一个指针，GO 底层使用</td>
</tr>
</tbody>
</table>
<p>其中int是应用最广泛的数值类型。内置的<code>len</code>函数返回一个有符号的int，虽然使用uint无符号类型似乎是一个更合理的选择。len函数返回有符号 int ，可以使我们像下面这样处理逆序循环。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">medals := []<span class="keyword">string</span>&#123;<span class="string">"gold"</span>, <span class="string">"silver"</span>, <span class="string">"bronze"</span>&#125;</div><div class="line">  <span class="keyword">for</span> i := <span class="built_in">len</span>(medals) ‐ <span class="number">1</span>; i &gt;= <span class="number">0</span>; i‐‐ &#123;</div><div class="line">    fmt.Println(medals[i]) <span class="comment">// "bronze", "silver", "gold"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>所以尽管Go语言提供了无符号数和运算，并且在数值本身不可能出现负数的情况下，我们还是倾向于使用有符号的int类型。出于这个原因，无符号数往往只有在位运算或其它特殊的运算场景才会使用，就像bit集合、分析二进制文件格式或者是哈希和加密操作等。它们通常并不用于仅仅是表达非负数量的场合。</p>
<h3 id="2-2-整数的运算符"><a href="#2-2-整数的运算符" class="headerlink" title="2.2 整数的运算符"></a>2.2 整数的运算符</h3><p>Go 的整数支持如下操作符号，其中大多数与其他语言类似，只有一个比较特殊<code>x &amp;^ y</code>，它表示将 x 中与 y 对应的且 y 中等于 1 的位置为 0，即位清空<code>(AND NOT)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># 优先级递减</div><div class="line">*   /    %               # 算数运算符</div><div class="line">&lt;&lt;  &gt;&gt;   &amp;   &amp;^          # 位运算符</div><div class="line">+    ‐                   # 算数运算符</div><div class="line">|    ^                   # 位运算符</div><div class="line">==  !=   &lt;   &lt;=  &gt;  &gt;=   # 比较运算符</div><div class="line">&amp;&amp;(AND)  ||(or)          # 逻辑运算符</div></pre></td></tr></table></figure>
<h3 id="2-3-浮点数"><a href="#2-3-浮点数" class="headerlink" title="2.3 浮点数"></a>2.3 浮点数</h3><p>Go语言提供了两种精度的浮点数，float32 和 float64 。浮点数的范围极限值可以在math包找到。常量<code>math.MaxFloat32</code>表示float32能表示的最大数值，对应的 float64 为 <code>math.MaxFloat64</code>。</p>
<p>一个float32类型的浮点数可以提供大约6个十进制数的精度，而float64则可以提供约15个十进制数的精度；通常应该优先使用float64类型。小数点前面或后面的数字都可能被省略（例如.707或1.）。很小或很大的数最好用科学计数法书写，通过e或E来指定指数部分。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// float32的有效bit位只有23个，整数大于23bit表示范围时，将出现误差</span></div><div class="line"><span class="keyword">var</span> f <span class="keyword">float32</span> = <span class="number">16777216</span> <span class="comment">// 1 &lt;&lt; 24</span></div><div class="line">fmt.Println(f == f+<span class="number">1</span>) <span class="comment">// "true"!</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> a = <span class="number">.909</span></div><div class="line"><span class="keyword">const</span> Avogadro = <span class="number">6.02214129e23</span> <span class="comment">// 阿伏伽德罗常数</span></div><div class="line"><span class="keyword">const</span> Planck = <span class="number">6.62606957</span>e‐<span class="number">34</span> <span class="comment">// 普朗克常数</span></div></pre></td></tr></table></figure>
<p>math包中除了提供大量常用的数学函数外，还提供了IEEE754浮点数标准中定义的特殊值的创建和测试。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">v := math.Inf(<span class="number">1</span>) <span class="comment">// 返回正无穷</span></div><div class="line">p := math.Inf(<span class="number">-1</span>) <span class="comment">// 返回负无穷</span></div><div class="line"></div><div class="line">n := math.NaN() <span class="comment">// 返回 NaN 非数，一般用于表示无效的除法操作结果0/0或Sqrt(­1).</span></div><div class="line">t ：= math.IsNaN(n) <span class="comment">// 测试是否为 NaN</span></div><div class="line"></div><div class="line"><span class="comment">// NaN和任何数都是不相等的</span></div><div class="line">nan := math.NaN()</div><div class="line">fmt.Println(nan == nan, nan &lt; nan, nan &gt; nan) <span class="comment">// "false false false"</span></div></pre></td></tr></table></figure>
<h3 id="2-4-复数"><a href="#2-4-复数" class="headerlink" title="2.4 复数"></a>2.4 复数</h3><p>Go语言提供了两种精度的复数类型：<code>complex64</code> 和 <code>complex128</code>，分别对应 <code>float32</code> 和 <code>float64</code> 两种浮点数精度。内置的<code>complex</code>函数用于构建复数，内建的<code>real</code>和<code>imag</code>函数分别返回复数的实部和虚部。复数的字面量使用 <code>i</code> 后缀。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x <span class="keyword">complex128</span> = <span class="built_in">complex</span>(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// 1+2i</span></div><div class="line"><span class="keyword">var</span> y <span class="keyword">complex128</span> = <span class="built_in">complex</span>(<span class="number">3</span>, <span class="number">4</span>) <span class="comment">// 3+4i</span></div><div class="line">fmt.Println(x*y) <span class="comment">// "(‐5+10i)"</span></div><div class="line">fmt.Println(<span class="built_in">real</span>(x*y)) <span class="comment">// "‐5"</span></div><div class="line">fmt.Println(<span class="built_in">imag</span>(x*y)) <span class="comment">// "10"</span></div><div class="line"></div><div class="line"><span class="comment">// 复数的字面量</span></div><div class="line">x := <span class="number">1</span> + <span class="number">2i</span></div><div class="line">y := <span class="number">3</span> + <span class="number">4i</span></div></pre></td></tr></table></figure>
<h2 id="3-布尔值"><a href="#3-布尔值" class="headerlink" title="3. 布尔值"></a>3. 布尔值</h2><p>Go 布尔类型的值只有两种：<code>true</code> 和 <code>false</code>，<code>if</code> 和 <code>for</code> 语句的条件部分都是布尔值。需要特别注意的是 在 Go 中布尔之值不会与其他任何类型作隐式转换，将其他类型的值用在 <code>if</code> 或 <code>for</code> 中作为条件判断时，必须作显示的类型转换。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">itob</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> i != <span class="number">0</span> &#125;</div><div class="line"></div><div class="line">b := <span class="number">0</span></div><div class="line">i := <span class="number">0</span></div><div class="line"><span class="keyword">if</span> itob(b) &#123;</div><div class="line">  i = <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-字符串"><a href="#4-字符串" class="headerlink" title="4. 字符串"></a>4. 字符串</h2><h3 id="4-1-字符串操作"><a href="#4-1-字符串操作" class="headerlink" title="4.1 字符串操作"></a>4.1 字符串操作</h3><p>创建字符串最简单的方式是字符串字面量。在 Go 中，单个字符的字面量使用单引号，字符串字面量使用双引号，原生字符串使用反引号。所谓原生字符类似于 Python 中的 <code>r&quot;&quot;</code> 用于消除字符串中的所有转义操作。Go 的原生字符甚至可以消除换行，实现跨行，所以原生字符广泛使用再正则表达式，HTML模板、JSON面值以及命令行提示信息中。</p>
<p>与 Python 将大多数字符串操作作为字符串对象的方法不同，Go 大多数的字符串操作都在 <code>strings</code> 包，我们将这部分内容放在后面专门介绍，先来看看Go 提供的字符串基础操作。下面是一些代码示例:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 原生字符串</span></div><div class="line"><span class="keyword">const</span> GoUsage = <span class="string">`Go is a tool for managing Go source code.</span></div><div class="line"><span class="string">Usage:</span></div><div class="line"><span class="string">go command [arguments]</span></div><div class="line"><span class="string">`</span></div><div class="line"></div><div class="line">s := <span class="string">"hello, world"</span></div><div class="line"><span class="comment">// 1. len 函数获取字符串长度</span></div><div class="line">fmt.Println(<span class="built_in">len</span>(s)) <span class="comment">// "12"</span></div><div class="line"></div><div class="line"><span class="comment">// 2. 索引</span></div><div class="line">fmt.Println(s[<span class="number">0</span>], s[<span class="number">7</span>]) <span class="comment">// "104 119" ('h' and 'w')</span></div><div class="line"></div><div class="line"><span class="comment">// 3. 切片</span></div><div class="line">fmt.Println(s[<span class="number">0</span>:<span class="number">5</span>]) <span class="comment">// "hello</span></div><div class="line"></div><div class="line"><span class="comment">// 4. + 拼接</span></div><div class="line">fmt.Println(<span class="string">"goodbye"</span> + s[<span class="number">5</span>:]) <span class="comment">// "goodbye, world"</span></div><div class="line"></div><div class="line"><span class="comment">// 5. 不可修改</span></div><div class="line">s[<span class="number">0</span>] = <span class="string">'L'</span> <span class="comment">// compile error: cannot assign to s[0]</span></div></pre></td></tr></table></figure>
<p>虽然字符串作为一个基本的数据类型被几乎所有的编程语言所支持，但是字符串本身确是很复杂。而复杂的地方至少有如下两点:</p>
<ol>
<li>字符串的实现</li>
<li>字符的编码问题</li>
</ol>
<h3 id="4-1-字符串的实现"><a href="#4-1-字符串的实现" class="headerlink" title="4.1 字符串的实现"></a>4.1 字符串的实现</h3><p><img src="/images/go/grammar/string_base.png" alt="string"></p>
<p>上面是字符串以及切片操作结果的示意图，在 Go 中，字符串是一个不可改变的字节序列，底层是一个字符数组，一个字符串可认为由两个部分构成:指针、长度</p>
<ol>
<li>指针指向第一个字符对应的底层数组元素的地址</li>
<li>长度对应字符串中字符的个数</li>
<li>字符串的底层数组位于受保护的内存中，不能被修改，因此字符串是不可变的</li>
<li>对字符串变量进行重新赋值，不会改变字符串的底层数组，而只是改变了字符串中的指针的指向</li>
</ol>
<p>不变性意味两个字符串可以安全的共享相同的底层数据，这使得字符串复制和切片不会发生实际的复制行为，而是直接共享原有的底层字符数组，因此操作非常迅速。</p>
<h3 id="4-3-字符集"><a href="#4-3-字符集" class="headerlink" title="4.3 字符集"></a>4.3 字符集</h3><p>在上面关于字符串的实现中，我们忽略了一个问题，即如何把字符串中的字符保存在一个数组中。我们知道在计算机上保存的数据只有二进制的 0 和 1，显然计算机没办法直接保存每个字符，于是就有了字符集的概念。</p>
<p>对于字符集以及字符的编码和解码，我是这样理解的:</p>
<ol>
<li>字符集中最重要的概念就是码表，其作用是将每个字符与一个特定的数字对应起来，用特定的数字(又称<strong>码点</strong>)来表示特定的字符，因此码表就是字符集能表示的字符范围</li>
<li>有了码表，并没有解决保存字符的问题，显然就算是数字也要保存为整数的二进制格式。对于不同字符集而言，码点到特定的二进制也有一套特定的转换规则</li>
<li>因此，字符集实现了<code>字符 --&gt; 码点 ---&gt; 码点二进制值</code>的转换过程，<code>码点 ---&gt; 码点二进制值</code>被称为编码，反过来就是解码</li>
</ol>
<p>有了上面的说明，就能解释清楚下面两个问题:</p>
<ol>
<li><code>ASCII</code> 字符集 与 <code>Unicode</code> 字符集区别: <code>ASCII</code>字符集使用7bit来表示一个码点，而 <code>Unicode</code> 使用32bit表示一个 <code>Unicode</code> 码点，<code>Unicode</code> 显然能表示更大的字符范围</li>
<li><code>UTF8</code> 编码与 <code>UTF32</code> 编码的区别: <code>UTF32</code> 编码直接将每个 <code>Unicode</code> 码点保存为 int32 的整数，而<code>UTF8</code> 会根据<code>Unicode</code>码点变长编码成二进制，它们都表示 <code>Unicode</code> 字符集，但是编码规则不同</li>
</ol>
<h3 id="4-4-字符串和-rune"><a href="#4-4-字符串和-rune" class="headerlink" title="4.4 字符串和 []rune"></a>4.4 字符串和 []rune</h3><p>Go语言的源文件采用UTF8编码，因此程序运行之后，保存在字符数组内的是 UTF8 编码的二进制值。因此前面我们所讲的字符串基础操作，操作的其实是UTF8 编码的每个字节，并不是我们理解的字符。为了处理真实的字符，我们需要对字符串进行解码。Go 将 Unicode 码点表示为 <code>rune</code> 整数类型，因此字符串解码后的类型就是 <code>[]rune</code>。下面就是Go 中字符编码解码的一些代码示例:</p>
<p><img src="/images/go/grammar/string_unicode.png" alt="string_unicode"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 字符串基础操作操作的是 UTF8 中的字节</span></div><div class="line"><span class="keyword">import</span> <span class="string">"unicode/utf8"</span></div><div class="line">s := <span class="string">"Hello, 世界"</span></div><div class="line">fmt.Println(<span class="built_in">len</span>(s)) <span class="comment">// "13"</span></div><div class="line">fmt.Println(utf8.RuneCountInString(s)) <span class="comment">// "9"</span></div><div class="line"></div><div class="line"><span class="comment">// 2. unicode 提供了 UTF8 的解码函数</span></div><div class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); &#123;</div><div class="line">  r, size := utf8.DecodeRuneInString(s[i:])</div><div class="line">  fmt.Printf(<span class="string">"%d\t%c\n"</span>, i, r)</div><div class="line">  i += size</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 3. range 会自动对字符串解码</span></div><div class="line"><span class="keyword">for</span> i, r := <span class="keyword">range</span> <span class="string">"Hello, 世界"</span> &#123;</div><div class="line">  fmt.Printf(<span class="string">"%d\t%q\t%d\n"</span>, i, r, r)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 4. []rune 字符串的类型转换</span></div><div class="line">s := <span class="string">"プログラム"</span></div><div class="line">fmt.Printf(<span class="string">"% x\n"</span>, s) <span class="comment">// "e3 83 97 e3 83 ad e3 82 b0 e3 83 a9 e3 83 a0"</span></div><div class="line"></div><div class="line"><span class="comment">// 字符串 --&gt; []rune</span></div><div class="line">r := []<span class="keyword">rune</span>(s)</div><div class="line">fmt.Printf(<span class="string">"%x\n"</span>, r) <span class="comment">// "[30d7 30ed 30b0 30e9 30e0]</span></div><div class="line"></div><div class="line"><span class="comment">// string 函数： []rune ---&gt; 字符串</span></div><div class="line">fmt.Println(<span class="keyword">string</span>(r)) <span class="comment">// "プログラム</span></div><div class="line"></div><div class="line"><span class="comment">// 5. 生成Unicode码点字符的UTF8字符串</span></div><div class="line">fmt.Println(<span class="keyword">string</span>(<span class="number">65</span>)) <span class="comment">// "A", not "65"</span></div><div class="line">fmt.Println(<span class="keyword">string</span>(<span class="number">0x4eac</span>)) <span class="comment">// "京"</span></div></pre></td></tr></table></figure>
<h3 id="4-5-字符串和-byte"><a href="#4-5-字符串和-byte" class="headerlink" title="4.5 字符串和 []byte"></a>4.5 字符串和 []byte</h3><p>一个字符串是包含的只读字节数组，一旦创建，是不可变的。相比之下，一个字节slice(即 <code>[]byte</code>，下一节我们会详述)的元素则可以自由地修改。字符串和字节slice之间可以相互转换：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">s := <span class="string">"abc"</span></div><div class="line">b := []<span class="keyword">byte</span>(s)</div><div class="line">s2 := <span class="keyword">string</span>(b)</div></pre></td></tr></table></figure>
<h3 id="4-6-字符串相关类型的包"><a href="#4-6-字符串相关类型的包" class="headerlink" title="4.6 字符串相关类型的包"></a>4.6 字符串相关类型的包</h3><p>标准库中有四个包对字符串处理尤为重要：bytes、strings、strconv和unicode包</p>
<ol>
<li>strings包提供了许多如字符串的查询、替换、比较、截断、拆分和合并等功能。</li>
<li>bytes包也提供了很多类似功能的函数，但是针对和字符串有着相同结构的[]byte类型</li>
<li>strconv包提供了布尔型、整型数、浮点数和对应字符串的相互转换，还提供了双引号转义相关的转换</li>
<li>unicode包提供了IsDigit、IsLetter、IsUpper和IsLower等类似功能，它们用于给字符分类，每个函数有一个单一的rune类型的参数，然后返回一个布尔值</li>
</ol>
<p>下面是字符串与数值转换的代码示例，我们会在后面专门讲解这些包的实现和使用。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 数值转字符串</span></div><div class="line">x := <span class="number">123</span></div><div class="line">y := fmt.Sprintf(<span class="string">"%d"</span>, x)</div><div class="line">fmt.Println(y, strconv.Itoa(x)) <span class="comment">// "123 123"</span></div><div class="line"></div><div class="line"><span class="comment">// 数值的进制转换</span></div><div class="line">fmt.Println(strconv.FormatInt(<span class="keyword">int64</span>(x), <span class="number">2</span>)) <span class="comment">// "1111011"</span></div><div class="line">s := fmt.Sprintf(<span class="string">"x=%b"</span>, x) <span class="comment">// "x=1111011</span></div><div class="line"></div><div class="line"><span class="comment">// 字符串转数值</span></div><div class="line">x, err := strconv.Atoi(<span class="string">"123"</span>) <span class="comment">// x is an int</span></div><div class="line">y, err := strconv.ParseInt(<span class="string">"123"</span>, <span class="number">10</span>, <span class="number">64</span>) <span class="comment">// base 10, up to 64 bits</span></div></pre></td></tr></table></figure>
<h2 id="5-常量"><a href="#5-常量" class="headerlink" title="5. 常量"></a>5. 常量</h2><h3 id="5-1-常量的类型"><a href="#5-1-常量的类型" class="headerlink" title="5.1 常量的类型"></a>5.1 常量的类型</h3><p>在讲常量之前，先问大家一个问题，你知道字面量，常量，变量，字面量类型之间的区别么？</p>
<p>字面量是编程语言提供的用来创建特定值的快捷方式，因此字面量也有类型，特定的字面量代表什么类型，完全有编程语言决定。因此对于像下面的赋值语句来说，在字面量类型和变量类型之间发生了类型转换。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f <span class="keyword">float64</span> = <span class="number">3</span></div></pre></td></tr></table></figure>
<p>常量和变量都是变量，但是相比与变量，常量有以下特点:</p>
<ul>
<li>常量的值不可变，并且常量的类型只能是基础类型：boolean、string或数字</li>
<li>常量表达式的值在编译期计算，而不是在运行期，因此常量可以是构成类型的一部分，例如用于指定数组类型的长度</li>
</ul>
<p>因为常量也是变量，所以常量通常有确定的类型，但Go语言的常量有个不同寻常之处， Go 中的常量可以没有一个明确的基础类型。</p>
<p>首先在 Go 中，有六种无类型的字面量，分别是无类型的布尔型、无类型的整数、无类型的字符、无类型的浮点数、无类型的复数、无类型的字符串。例如0、0.0、0i和’\u0000’分别对应无类型的整数、无类型的浮点数、无类型的复数和无类型的字符。</p>
<p>其次在如下不带类型声明的常量声明语句中，不会发生隐式类型转换，常量的类型依旧为无类型的整数。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> deadbeef = <span class="number">0xdeadbeef</span> <span class="comment">// untyped int with value 3735928559</span></div></pre></td></tr></table></figure>
<p>为了便于描述下面我们将无类型的字面量和常量统称为无类型常量，这些无类型常量有诸多好处。</p>
<p>编译器为这些无类型常量提供了比基础类型更高精度的算术运算。通过延迟明确常量的具体类型，无类型的常量不仅可以提供更高的运算精度，而且可以直接用于更多的表达式而不需要显式的类型转换。</p>
<p>只有常量可以是无类型的。当一个无类型的常量被赋值给一个变量的时候，或者出现在有明确类型的变量声明的右边，无类型的常量将会被隐式转换为对应的类型，如果转换合法的话。对于一个没有显式类型的变量声明（包括简短变量声明），字面量的形式将隐式决定变量的默认类型，Go 有一个明确的转换规则。如果要给变量一个不同的类型，我们必须显式地将无类型的常量转化为所需的类型，或给声明的变量指定明确的类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 常量可以无类型，无类型常量可以提供更高的精度</span></div><div class="line"><span class="keyword">const</span> (</div><div class="line">  deadbeef = <span class="number">0xdeadbeef</span> <span class="comment">// untyped int with value 3735928559</span></div><div class="line">  a = <span class="keyword">uint32</span>(deadbeef) <span class="comment">// uint32 with value 3735928559</span></div><div class="line">  b = <span class="keyword">float32</span>(deadbeef) <span class="comment">// float32 with value 3735928576 (rounded up)</span></div><div class="line">  c = <span class="keyword">float64</span>(deadbeef) <span class="comment">// float64 with value 3735928559 (exact)</span></div><div class="line">  d = <span class="keyword">int32</span>(deadbeef) <span class="comment">// compile error: constant overflows int32</span></div><div class="line">  e = <span class="keyword">float64</span>(<span class="number">1e309</span>) <span class="comment">// compile error: constant overflows float64</span></div><div class="line">  f = <span class="keyword">uint</span>(‐<span class="number">1</span>) <span class="comment">// compile error: constant underflows uint</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// 2. 无类型常量，可以直接应用在更多的表达式中，无需显示类型转换</span></div><div class="line"><span class="keyword">var</span> f <span class="keyword">float64</span> = <span class="number">3</span> + <span class="number">0i</span> <span class="comment">// untyped complex ‐&gt; float64</span></div><div class="line">f = <span class="number">2</span> <span class="comment">// untyped integer ‐&gt; float64</span></div><div class="line">f = <span class="number">1e123</span> <span class="comment">// untyped floating‐point ‐&gt; float64</span></div><div class="line">f = <span class="string">'a'</span> <span class="comment">// untyped rune ‐&gt; float64</span></div><div class="line"></div><div class="line"><span class="comment">// 3. 有类型声明时，无类型常量将根据类型隐式类性转换</span></div><div class="line"><span class="keyword">var</span> x <span class="keyword">float32</span> = math.Pi</div><div class="line"><span class="keyword">var</span> y <span class="keyword">float64</span> = math.Pi</div><div class="line"><span class="keyword">var</span> z <span class="keyword">complex128</span> = math.Pi</div><div class="line"></div><div class="line"><span class="comment">// 4. 无类型声明时，根据字面量形式，决定变量类型</span></div><div class="line">i := <span class="number">0</span> <span class="comment">// untyped integer; implicit int(0)  </span></div><div class="line">r := <span class="string">'\000'</span> <span class="comment">// untyped rune; implicit rune('\000')</span></div><div class="line">f := <span class="number">0.0</span> <span class="comment">// untyped floating‐point; implicit float64(0.0)</span></div><div class="line">c := <span class="number">0i</span> <span class="comment">// untyped complex; implicit complex128(0i)</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> i = <span class="keyword">int8</span>(<span class="number">0</span>)</div><div class="line"><span class="keyword">var</span> i <span class="keyword">int8</span> = <span class="number">0</span></div></pre></td></tr></table></figure>
<h3 id="5-2-常量批量声明"><a href="#5-2-常量批量声明" class="headerlink" title="5.2 常量批量声明"></a>5.2 常量批量声明</h3><p>最后，Go 为常量的批量声明提供了一些便捷方式，下面是代码示例:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 批量声明多个常量</span></div><div class="line"><span class="keyword">const</span> (</div><div class="line">  e = <span class="number">2.71828182845904523536028747135266249775724709369995957496696763</span></div><div class="line">  pi = <span class="number">3.14159265358979323846264338327950288419716939937510582097494459</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> (</div><div class="line">  a = <span class="number">1</span></div><div class="line">  b      <span class="comment">// 省略初始化表达式，表示使用前面常量的初始化表达式写法， b=1</span></div><div class="line">  c = <span class="number">2</span></div><div class="line">  d     <span class="comment">// d=2</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// 2. iota常量生成器初始化，用于生成一组以相似规则初始化的常量</span></div><div class="line"><span class="keyword">type</span> Weekday <span class="keyword">int</span></div><div class="line">  <span class="keyword">const</span> (</div><div class="line">  Sunday Weekday = <span class="literal">iota</span>  <span class="comment">// 在第一个声明的常量所在的行，iota将会被置为0，</span></div><div class="line">  Monday                 <span class="comment">// 然后在每一个有常量声明的行加一， 1</span></div><div class="line">  Tuesday               <span class="comment">// 2</span></div><div class="line">  Wednesday             <span class="comment">// 3</span></div><div class="line">  Thursday</div><div class="line">  Friday</div><div class="line">  Saturday</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> (</div><div class="line">  _ = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</div><div class="line">  KiB <span class="comment">// 1024</span></div><div class="line">  MiB <span class="comment">// 1048576</span></div><div class="line">  GiB <span class="comment">// 1073741824</span></div><div class="line">  TiB <span class="comment">// 1099511627776 (exceeds 1 &lt;&lt; 32)</span></div><div class="line">  PiB <span class="comment">// 1125899906842624</span></div><div class="line">  EiB <span class="comment">// 1152921504606846976</span></div><div class="line">  ZiB <span class="comment">// 1180591620717411303424 (exceeds 1 &lt;&lt; 64)</span></div><div class="line">  YiB <span class="comment">// 1208925819614629174706176</span></div><div class="line">)</div></pre></td></tr></table></figure>

        </div>
        <!--  -->
        <footer class="article-footer">
            



    <a data-url="http://yoursite.com/2019/01/03/go/go_grammar/go_3/" data-id="ckvgqi83r00f8h0u9s416eat3" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-google-plus"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2019/01/04/go/go_grammar/go_4/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            4 go 复合数据类型
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2019/01/02/go/go_grammar/go_2/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">2 go 变量及流程控制</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/10/17/assembley/link/link_01/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/操作系统/">操作系统</a></p>
                            <p class="item-title"><a href="/2021/10/17/assembley/link/link_01/" class="title">1. 《程序员的自我修养》读书笔记</a></p>
                            <p class="item-date"><time datetime="2021-10-16T16:00:00.000Z" itemprop="datePublished">2021-10-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/05/assembley/x86/x86_05/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/memery_stack.png)" alt="5. x86 实模式(一)" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/05/assembley/x86/x86_05/" class="title">5. x86 实模式(一)</a></p>
                            <p class="item-date"><time datetime="2021-07-04T16:00:00.000Z" itemprop="datePublished">2021-07-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/04/assembley/x86/x86_04/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/video.png)" alt="4. x86 实模式(一)" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/04/assembley/x86/x86_04/" class="title">4. x86 实模式(一)</a></p>
                            <p class="item-date"><time datetime="2021-07-03T16:00:00.000Z" itemprop="datePublished">2021-07-04</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/03/assembley/x86/x86_03/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/cpu_structure.png)" alt="3. x86 汇编环境准备" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/03/assembley/x86/x86_03/" class="title">3. x86 汇编环境准备</a></p>
                            <p class="item-date"><time datetime="2021-07-02T16:00:00.000Z" itemprop="datePublished">2021-07-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/02/assembley/x86/x86_02/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/cpu_ram_rom.jpg)" alt="2. 硬件系统的结构" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/02/assembley/x86/x86_02/" class="title">2. 硬件系统的结构</a></p>
                            <p class="item-date"><time datetime="2021-07-01T16:00:00.000Z" itemprop="datePublished">2021-07-02</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">39</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">58</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/存储/">存储</a><span class="category-list-count">58</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维/">运维</a><span class="category-list-count">198</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">48</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">29</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Brendan-Gregg/">Brendan Gregg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML-CSS/">HTML&CSS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8S/">K8S</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/">Kafka</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux性能调优/">Linux性能调优</a><span class="tag-list-count">49</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL实战45讲/">MySQL实战45讲</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openstack/">Openstack</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go并发编程/">go并发编程</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go标准库及第三方库/">go标准库及第三方库</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go语言入门/">go语言入门</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wrapt/">wrapt</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/x86-汇编/">x86 汇编</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/入门指南/">入门指南</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/好玩的数据结构与算法/">好玩的数据结构与算法</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据密集型应用/">数据密集型应用</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a><span class="tag-list-count">39</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/极客时间/">极客时间</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/程序员的自我修养/">程序员的自我修养</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-Linux/">马哥 Linux</a><span class="tag-list-count">135</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-MySQL-运维/">马哥 MySQL 运维</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高性能的MySQL/">高性能的MySQL</a><span class="tag-list-count">5</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Brendan-Gregg/" style="font-size: 10px;">Brendan Gregg</a> <a href="/tags/ES6/" style="font-size: 15.63px;">ES6</a> <a href="/tags/HTML-CSS/" style="font-size: 12.5px;">HTML&CSS</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/K8S/" style="font-size: 10px;">K8S</a> <a href="/tags/Kafka/" style="font-size: 16.25px;">Kafka</a> <a href="/tags/Linux性能调优/" style="font-size: 19.38px;">Linux性能调优</a> <a href="/tags/MySQL实战45讲/" style="font-size: 18.13px;">MySQL实战45讲</a> <a href="/tags/Openstack/" style="font-size: 13.75px;">Openstack</a> <a href="/tags/React/" style="font-size: 15.63px;">React</a> <a href="/tags/Vue/" style="font-size: 15.63px;">Vue</a> <a href="/tags/go并发编程/" style="font-size: 17.5px;">go并发编程</a> <a href="/tags/go标准库及第三方库/" style="font-size: 10.63px;">go标准库及第三方库</a> <a href="/tags/go语言入门/" style="font-size: 14.38px;">go语言入门</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/python/" style="font-size: 11.25px;">python</a> <a href="/tags/wrapt/" style="font-size: 16.88px;">wrapt</a> <a href="/tags/x86-汇编/" style="font-size: 11.88px;">x86 汇编</a> <a href="/tags/入门指南/" style="font-size: 16.25px;">入门指南</a> <a href="/tags/好玩的数据结构与算法/" style="font-size: 11.88px;">好玩的数据结构与算法</a> <a href="/tags/数据密集型应用/" style="font-size: 15.63px;">数据密集型应用</a> <a href="/tags/数据结构与算法/" style="font-size: 18.75px;">数据结构与算法</a> <a href="/tags/极客时间/" style="font-size: 18.13px;">极客时间</a> <a href="/tags/程序员的自我修养/" style="font-size: 10px;">程序员的自我修养</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/马哥-Linux/" style="font-size: 20px;">马哥 Linux</a> <a href="/tags/马哥-MySQL-运维/" style="font-size: 13.13px;">马哥 MySQL 运维</a> <a href="/tags/高性能的MySQL/" style="font-size: 11.88px;">高性能的MySQL</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">讨论区</h3>
        <div class="widget">
            <h4> 联系我 <h4>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2021 宋涛</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://yoursite.com/2019/01/03/go/go_grammar/go_3/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
