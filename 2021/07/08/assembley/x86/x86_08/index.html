<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>8. 进入保护模式 | 宋涛的博客</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="x86 汇编" />
    
    <meta name="description" content="保护模式二">
<meta name="keywords" content="x86 汇编">
<meta property="og:type" content="article">
<meta property="og:title" content="8. 进入保护模式">
<meta property="og:url" content="http://yoursite.com/2021/07/08/assembley/x86/x86_08/index.html">
<meta property="og:site_name" content="宋涛的博客">
<meta property="og:description" content="保护模式二">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/assembly/gdt.png">
<meta property="og:updated_time" content="2021-11-14T07:05:42.070Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="8. 进入保护模式">
<meta name="twitter:description" content="保护模式二">
<meta name="twitter:image" content="http://yoursite.com/images/assembly/gdt.png">
    

    
        <link rel="alternate" href="/" title="宋涛的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">漫步在大陆上的海龟</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Go/">Go</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Python/">Python</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/分布式/">分布式</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/前端/">前端</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/存储/">存储</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/操作系统/">操作系统</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/运维/">运维</a></li></ul>
                                    
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Go/">Go</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-assembley/x86/x86_08" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        8. 进入保护模式
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2021/07/08/assembley/x86/x86_08/" class="article-date">
            <time datetime="2021-07-07T16:00:00.000Z" itemprop="datePublished">2021-07-08</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/x86-汇编/">x86 汇编<span class="tag-count">11</span></a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>保护模式二<br><a id="more"></a></p>
<h2 id="1-内容概述"><a href="#1-内容概述" class="headerlink" title="1. 内容概述"></a>1. 内容概述</h2><p>上一节我们简单介绍了 32 位计算机保护模式的基本概念和基本术语，这一节我们将学习如何在保护模式下进行编程，内容包括:</p>
<ol>
<li>定义全局描述符表GDT，认识段描述符的各个组成部分以及它们的含义和作用。</li>
<li>认识全局描述符表寄存器GDTR、段寄存器（由段选择器和描述符高速缓存器组成）、控制寄存器CR0 和段选择子</li>
<li>了解进入32 位保护模式的方法和步骤。</li>
</ol>
<h3 id="2-全局描述符表-GDT"><a href="#2-全局描述符表-GDT" class="headerlink" title="2. 全局描述符表 GDT"></a>2. 全局描述符表 GDT</h3><p>出现全局描述符表 GDT 的逻辑是这样的:</p>
<ol>
<li>首先在保护模式下，对内存的访问仍然使用段地址和偏移地址，但是，与实模式不同的是，在每个段能够访问之前，必须先进行登记。并且当访问的偏移地址超出段的界限时，处理器就会阻止这种访问，并产生一个叫做内部异常的中断。</li>
<li>和一个段有关的信息需要8 个字节来描述，称为<strong>段描述符（Segment Descriptor）</strong></li>
<li>每个段都需要一个描述符。为了存放这些描述符，需要在内存中开辟出一段空间。在这段空间里，所有的描述符都是挨在一起，集中存放的，这就构成一个<strong>描述符表</strong>。</li>
<li>最主要的描述符表是<strong>全局描述符表（Global Descriptor Table，GDT）</strong>，因为是全局的，所以进入保护模式前，需要先定义 GDT。</li>
<li>为了跟踪全局描述符表，处理器内部有一个48 位的寄存器，称为<strong>全局描述符表寄存器（GDTR）</strong>。如下图所示，它分为两部分，分别是32 位的线性地址和16 位的边界。32 位线性基地址部分保存的是全局描述符表在内存中的起始线性地址，16 位边界部分保存的是全局描述符表的边界（界限），其在数值上等于表的大小（总字节数）减一。</li>
</ol>
<p><img src="/images/assembly/gdt.png" alt="GDT"></p>
<p>GDT 的界限是16 位的，所以，该表最大是2^16 字节，也就是65536 字节（64KB）。又因为一个描述符占8 字节，故最多可以定义8192 个描述符。</p>
<p>理论上，全局描述符表可以位于内存中的任何地方。由于刚开机时，处理器是处于实模式中，在实模式下只能访问1MB 的内存，故GDT 通常都定义在1MB 以下的内存范围中。当然，允许在进入保护模式之后换个位置重新定义GDT。注意在 GDT 的设置必须在进入保护模式之前定义。</p>
<p>在 32 位实模式下之所以可以对用户程序进行保护，是因为:</p>
<ol>
<li>在保护模式下，在访问内存之前，必须先在GDT 内定义要访问的内存段</li>
<li>而描述符不是由用户程序自己建立的，而是在加载时，由操作系统根据你的程序结构而建立的，而用户程序通常是无法建立和修改GDT 的，所以每个程序只能自己限定的范围内访问内存。</li>
</ol>
<h2 id="3-段描述符"><a href="#3-段描述符" class="headerlink" title="3. 段描述符"></a>3. 段描述符</h2><h3 id="3-1-段描述格式"><a href="#3-1-段描述格式" class="headerlink" title="3.1 段描述格式"></a>3.1 段描述格式</h3><p>如下图所示，每个描述符在 GDT 中占8 字节，下面是低32 位，上面是高32 位。</p>
<p><img src="/images/assembly/seg_desc.png" alt="存储器的段描述符格式"></p>
<ol>
<li>段基地址可以是0～4GB 范围内的任意地址，不过，还是建议应当选取那些16 字节对齐的地址。</li>
<li>20 位的段界限用来限制段的扩展范围<ul>
<li>对于向上扩展的段，如代码段和数据段来说，偏移量是从0 开始递增，段界限决定了偏移量的最大值；</li>
<li>对于向下扩展的段，如栈段来说，段界限决定了偏移量的最小值。</li>
</ul>
</li>
<li>G 位是粒度（Granularity）位，用于解释段界限的含义<ul>
<li>当G 位是“0”时，段界限以字节为单位。此时，段的扩展范围是从1 字节到1 兆字节（1B～1MB）</li>
<li>当G 位是“1”，那么，段界限是以4KB 为单位的。这样，段的扩展范围是从4KB 到 4GB</li>
</ul>
</li>
<li>D/B 位<ul>
<li>是“默认的操作数大小”（Default Operation Size）或者“默认的栈指针大小”（Default Stack Pointer Size），又或者“上部边界”（Upper Bound）标志。</li>
<li>设立该标志位，主要是为了能够在32 位处理器上兼容运行16 位保护模式的程序</li>
<li>该标志位对不同的段有不同的效果。对于代码段，此位称做“D”位，用于指示指令中默认的偏移地址和操作数尺寸。D＝0 表示指令中的偏移地址或者操作数是16 位的；D＝1，指示32 位的偏移地址或者操作数。</li>
<li>对于栈段来说，该位被叫做“B”位，用于在进行隐式的栈操作时，是使用SP 寄存器还是ESP 寄存器。B=0，表示使用使用SP 寄存器。</li>
<li>同时，B 位的值也决定了栈的上部边界。如果B＝0，那么栈段的上部边界（也就是SP 寄存器的最大值）为0xFFFF；如果B＝1，那么栈段的上部边界（也就是ESP 寄存器的最大值）为0xFFFFFFFF。</li>
</ul>
</li>
<li>L 位是64 位代码段标志（64-bit Code Segment），保留此位给64 位处理器使用</li>
<li>AVL 是软件可以使用的位（Available），通常由操作系统来用，可以理解为多余位</li>
<li>P 是段存在位（Segment Present）<ul>
<li>P 位用于指示描述符所对应的段是否存在。</li>
<li>P 位是由处理器负责检查的。每当通过描述符访问内存中的段时，如果P 位是“0”，处理器就会产生一个异常中断。通常，该中断处理过程是由操作系统提供的，该处理过程的任务是负责将该段从硬盘换回内存，并将P 位置1。</li>
</ul>
</li>
<li>DPL 表示描述符的特权级（Descriptor Privilege Level，DPL）<ul>
<li>共有4 种处理器支持的特权级别，分别是0、1、2、3，其中0 是最高特权级别，3 是最低特权级别。</li>
<li>在这里，描述符的特权级用于指定要访问该段所必须具有的最低特权级。</li>
<li>操作系统代码具有最高特权级0，用户程序特权级通常是 3</li>
<li>不同特权级别的程序是互相隔离的，其互访是严格限制的，而且有些处理器指令（特权指令）只能由0 特权级的程序来执行，为的就是安全。</li>
</ul>
</li>
<li>S 位用于指定描述符的类型（Descriptor Type）。<ul>
<li>当该位是“0”时，表示是一个系统段；</li>
<li>为“1”时，表示是一个代码段或者数据段（栈段也是特殊的数据段）</li>
</ul>
</li>
<li>TYPE 字段共4 位，用于指示描述符的子类型，如下图所示，对于数据段来说，这4 位分别是X、E、W、A 位；而对于代码段来说，这4 位则分别是X、C、R、A 位。</li>
</ol>
<p><img src="/images/assembly/seg_type.png" alt="段描述符 TYPE 位"></p>
<p>TYPE 位中:</p>
<ol>
<li>表示是否可以执行（eXecutable）<ul>
<li>数据段总是不可执行的，X＝0；</li>
<li>代码段总是可以执行的，因此，X＝1</li>
</ul>
</li>
<li>E 位指示段的扩展方向<ul>
<li>E＝0 是向上扩展的，也就是向高地址方向扩展的，是普通的数据段；</li>
<li>E＝1 是向下扩展的，也就是向低地址方向扩展的，通常是栈段</li>
</ul>
</li>
<li>W 位指示段的读写属性，或者说段是否可写<ul>
<li>W＝0 的段是不允许写入的，否则会引发处理器异常中断；</li>
<li>W ＝1 的段是可以正常写入的</li>
</ul>
</li>
<li>C 位指示段是否为特权级依从的（Conforming）<ul>
<li>C＝0 表示非依从的代码段，这样的代码段可以从与它特权级相同的代码段调用，或者通过门调用；</li>
<li>C＝1 表示允许从低特权级的程序转移到该段执行</li>
</ul>
</li>
<li>R 位指示代码段是否允许读出<ul>
<li>R＝0 表示不能读出，如果企图去读一个R＝0 的代码段，会引发处理器异常中断；</li>
<li>R＝1，则代码段是可以读出的，即可以把这个段的内容当成ROM 一样使用</li>
<li>这里的R 属性并非用来限制处理器，而是用来限制程序和指令的行为。一个典型的例子是使用段超越前缀“CS:”来访问代码段中的内容</li>
</ul>
</li>
<li>A 位是已访问（Accessed）位，用于指示它所指向的段最近是否被访问过。<ul>
<li>在描述符创建的时候，应该清零</li>
<li>每当该段被访问时，处理器自动将该位置“1”</li>
<li>对该位的清零是由软件（操作系统）负责的，通过定期监视该位的状态，就可以统计出该段的使用频率</li>
<li>当内存空间紧张时，可以把不经常使用的段退避到硬盘上，从而实现虚拟内存管理</li>
</ul>
</li>
</ol>
<h2 id="4-安装存储器的段描述符并加载GDTR"><a href="#4-安装存储器的段描述符并加载GDTR" class="headerlink" title="4. 安装存储器的段描述符并加载GDTR"></a>4. 安装存储器的段描述符并加载GDTR</h2><p>现在开始安装各个描述符:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">         ;设置堆栈段和栈指针 </div><div class="line">         mov ax,cs      </div><div class="line">         mov ss,ax</div><div class="line">         mov sp,0x7c00</div><div class="line">      </div><div class="line">         ;计算GDT所在的逻辑段地址 </div><div class="line">         mov ax,[cs:gdt_base+0x7c00]        ;低16位 </div><div class="line">         mov dx,[cs:gdt_base+0x7c00+0x02]   ;高16位 </div><div class="line">         mov bx,16        </div><div class="line">         div bx            </div><div class="line">         mov ds,ax                          ;令DS指向该段以进行操作</div><div class="line">         mov bx,dx                          ;段内起始偏移地址 </div><div class="line">      </div><div class="line">         ;创建0#描述符，它是空描述符，这是处理器的要求</div><div class="line">         mov dword [bx+0x00],0x00</div><div class="line">         mov dword [bx+0x04],0x00  </div><div class="line"></div><div class="line">         ;创建#1描述符，保护模式下的代码段描述符</div><div class="line">         mov dword [bx+0x08],0x7c0001ff     </div><div class="line">         mov dword [bx+0x0c],0x00409800     </div><div class="line"></div><div class="line">         ;创建#2描述符，保护模式下的数据段描述符（文本模式下的显示缓冲区） </div><div class="line">         mov dword [bx+0x10],0x8000ffff     </div><div class="line">         mov dword [bx+0x14],0x0040920b     </div><div class="line"></div><div class="line">         ;创建#3描述符，保护模式下的堆栈段描述符</div><div class="line">         mov dword [bx+0x18],0x00007a00</div><div class="line">         mov dword [bx+0x1c],0x00409600</div><div class="line"></div><div class="line">         ;初始化描述符表寄存器GDTR</div><div class="line">         mov word [cs: gdt_size+0x7c00],31  ;描述符表的界限（总字节数减一）   </div><div class="line">                                             </div><div class="line">         lgdt [cs: gdt_size+0x7c00]</div><div class="line">         </div><div class="line">         in al,0x92                         ;南桥芯片内的端口 </div><div class="line">         or al,0000_0010B</div><div class="line">         out 0x92,al                        ;打开A20</div><div class="line"></div><div class="line">         cli                                ;保护模式下中断机制尚未建立，应 </div><div class="line">                                            ;禁止中断 </div><div class="line"></div><div class="line">         mov eax,cr0</div><div class="line">         or eax,1</div><div class="line">         mov cr0,eax                        ;设置PE位</div><div class="line">      </div><div class="line">         ;以下进入保护模式... ...</div><div class="line">         jmp dword 0x0008:flush             ;16位的描述符选择子：32位偏移</div><div class="line">                                            ;清流水线并串行化处理器 </div><div class="line">         [bits 32] </div><div class="line">    flush:</div><div class="line">         mov cx,00000000000_10_000B         ;加载数据段选择子(0x10)</div><div class="line">         mov ds,cx</div><div class="line">         ............</div><div class="line"></div><div class="line">;-------------------------------------------------------------------------------</div><div class="line">     </div><div class="line">         gdt_size         dw 0</div><div class="line">         gdt_base         dd 0x00007e00     ;GDT的物理地址</div></pre></td></tr></table></figure>
<h4 id="lgdt"><a href="#lgdt" class="headerlink" title="lgdt"></a>lgdt</h4><p>加载描述符表的线性基地址和界限到 GDTR 寄存器，要使用lgdt 指令。lgdt 指令格式为 <code>lgdt m48</code>:</p>
<ol>
<li>该指令的操作数是一个48 位（6字节）的内存区域。在16 位模式下，该地址是16 位的；在32 位模式下，该地址是32 位的。</li>
<li>在这6 字节的内存区域中，要求前（低）16 位是GDT 的界限值，后（高）32 位是GDT 的基地址。</li>
<li>在初始状态下（计算机启动之后），GDTR 的基地址被初始化为0x00000000；界限值为0xFFFF。</li>
</ol>
<h2 id="5-模式切换"><a href="#5-模式切换" class="headerlink" title="5.模式切换"></a>5.模式切换</h2><p>lgt 之后我们已经达到了是模式与保护模式的分界线，而控制这两种模式切换的开关是在一个叫CR0 的寄存器中。CR0 是处理器内部的控制寄存器（Control Register，CR）包含了一系列用于控制处理器操作模式和运行状态的标志位。它的第1 位（位0）是保护模式允许位（Protection Enable，PE），如果把该位置“1”，则处理器进入保护模式，按保护模式的规则开始运行。代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">cli                                ;保护模式下中断机制尚未建立，应 </div><div class="line">                                   ;禁止中断 </div><div class="line">mov eax,cr0</div><div class="line">or eax,1</div><div class="line">mov cr0,eax                        ;设置PE位</div></pre></td></tr></table></figure>
<p>保护模式下的中断机制和实模式不同，因此，原有的中断向量表不再适用，而且，必须要知道的是，在保护模式下，BIOS 中断都不能再用，因为它们是实模式下的代码。在重新设置保护模式下的中断环境之前，必须关中断。</p>
<h2 id="6-实模式下的段访问"><a href="#6-实模式下的段访问" class="headerlink" title="6. 实模式下的段访问"></a>6. 实模式下的段访问</h2><p>8086 处理器的段寄存器是16 位的，共有4 个：CS、DS、ES 和SS。而在32 位处理器内，在原先的基础上又增加了两个段寄存器FS 和GS。而这 6 个段寄存器又分为两部分:</p>
<ol>
<li>前16 位和8086 相同，用于向后兼容</li>
<li>第二部分称为描述符高速缓存器，用来存放段的线性基地址、段界限和段属性。这一部分不可见的部分，由处理器内部进行访问<br><img src="/images/assembly/seg_cache.png" alt="段描述符 TYPE 位"></li>
</ol>
<p>实模式下的6 个段寄存器CS、DS、ES、FS、GS 和SS，在保护模式下叫做段选择器。保护模式下尽管访问内存时也需要指定一个段，但传送到段选择器的内容不是逻辑段地址，而是段描述符在描述符表中的索引号，又称<strong>段选择子</strong>。</p>
<p>段选择子的格式如下:</p>
<ol>
<li>第一部分是描述符的索引号，用来在描述符表中选择一个段描述符。</li>
<li>TI 是描述符表指示器（Table Indicator）<ul>
<li>TI＝0 时，表示描述符在GDT 中；TI＝1 时，描述符在LDT 中</li>
<li>RPL 是请求特权级，表示给出当前选择子的那个程序的特权级别，正是该程序要求访问这个内存段。</li>
</ul>
</li>
</ol>
<p><img src="/images/assembly/seg_select.png" alt="段描述符 TYPE 位"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">flush:</div><div class="line">     mov cx,00000000000_10_000B         ;加载数据段选择子(0x10)</div><div class="line">     mov ds,cx</div><div class="line"></div><div class="line">     ;以下在屏幕上显示&quot;Protect mode OK.&quot; </div><div class="line">     mov byte [0x00],&apos;P&apos;  </div><div class="line">     mov byte [0x02],&apos;r&apos;</div><div class="line">     mov byte [0x04],&apos;o&apos;</div><div class="line">     mov byte [0x06],&apos;t&apos;</div><div class="line">     mov byte [0x08],&apos;e&apos;</div><div class="line">     mov byte [0x0a],&apos;c&apos;</div><div class="line">     mov byte [0x0c],&apos;t&apos;</div><div class="line">     mov byte [0x0e],&apos; &apos;</div><div class="line">     mov byte [0x10],&apos;m&apos;</div><div class="line">     mov byte [0x12],&apos;o&apos;</div><div class="line">     mov byte [0x14],&apos;d&apos;</div><div class="line">     mov byte [0x16],&apos;e&apos;</div><div class="line">     mov byte [0x18],&apos; &apos;</div><div class="line">     mov byte [0x1a],&apos;O&apos;</div><div class="line">     mov byte [0x1c],&apos;K&apos;</div></pre></td></tr></table></figure>
<p>上面的代码中，将描述符选择子0x0010（二进制数0000<em>0000</em> 00010_0_00）传送到段选择器DS 中，0x0010 指定的描述符索引号是2，指定的描述符表是GDT，请求特权级RPL 是00。</p>
<h3 id="6-1-段加载过程"><a href="#6-1-段加载过程" class="headerlink" title="6.1 段加载过程"></a>6.1 段加载过程</h3><p>当处理器在执行任何改变段选择器的指令时（比如pop、mov、jmp far、call far、iret、retf），就将指令中提供的索引号乘以8 作为偏移地址，同GDTR 中提供的线性基地址相加，以访问GDT。如果没有发现什么问题（比如超出了GDT 的界限），就自动将找到的描述符加载到不可见的描述符高速缓存部分。</p>
<p>加载的部分包括段的线性基地址、段界限和段的访问属性。此后，每当有访问内存的指令时，就不再访问GDT 中的描述符，直接用当前段寄存器描述符高速缓存器提供线性基地址</p>
<h2 id="7-清空流水线"><a href="#7-清空流水线" class="headerlink" title="7. 清空流水线"></a>7. 清空流水线</h2><p>我们在讲解上面的汇编代码时，跳过了两条指令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">;以下进入保护模式... ...</div><div class="line">jmp dword 0x0008:flush             ;16位的描述符选择子：32位偏移</div><div class="line">                                   ;清流水线并串行化处理器 </div><div class="line">[bits 32]</div></pre></td></tr></table></figure>
<p>这两条指令是干嘛的呢？我们通过 CR0 寄存器从实模式切换到了保护模式，看似切换已经完成，但是仍有两个亟待解决的问题。</p>
<ol>
<li>在实模式下，段寄存器的描述符高速缓存器也被用于访问内存，仅低20 位有效，高12 位是全零。当处理器进入保护模式后，这些内容依然残留着，但不影响使用，程序可以继续执行。但是，这些残留的内容在保护模式下是无效的，迟早会在执行某些指令的时候出问题。因此，比较安全的做法是尽快刷新CS、SS、DS、ES、FS 和GS 的内容，包括它们的段选择器和描述符高速缓存器。</li>
<li>在进入保护模式前，有很多指令已经进入了流水线。因为处理器工作在实模式下，所以它们都是按16 位操作数和16 位地址长度进行译码的，即使是那些用bits 32 编译的指令。进入保护模式后，受CS 段描述符高速缓存器中实模式残留内容的影响，处理器进入16 位保护模式工作。如果保护模式下的代码是16 位的，影响可能不大，但如果是用bits 32 编译的，那么，由于对对操作数和默认地址大小的解释不同，指令的执行结果可能会不正确，所以必须清空流水线。同时，那些通过乱序执行得到的中间结果也是无效的，必须清理掉，让处理器串行化执行，即，重新按指令的自然顺序执行。</li>
</ol>
<p>这里有一个两全其美的方案，那就是使用远转移指令jmp 或者远过程调用指令call。处理器最怕转移指令，遇到这种指令，一般会清空流水线，并串行化执行；另一方面，远转移会重新加载段选择器CS，并刷新描述符高速缓存器中的内容。一个建议的方法是在设置了控制寄存器CR0 的PE 位之后，立即用jmp 或者call 转移到当前指令流的下一条指令上。</p>
<p><code>jmp dword 0x0008:flush</code></p>
<p>这条指令和位于它前面的指令一样，默认地是用“bits 16”编译的，而且使用了关键字“dword”，该关键字修饰偏移地址，意思是要求使用32 位的偏移量。因此，会有指令前缀0x66。</p>
<p>因为现在已经处于保护模式下，处理器都将把第一个操作数0x0008 视为段选择子，而不是实模式下的逻辑段地址。选择子为0x0008（索引号为1，TI 位是0，RPL 为00）。当指令执行时，处理器加载段选择器CS，从GDT 中取出相应的描述符加载到CS 描述符高速缓存。</p>
<p>保护模式下的代码段，基地址为0x00007c00，段界限为0x1ff，长度为0x200，正好对应着当前程序在内存中的区域。在这种情况下，上面那条指令执行时，目标位置在段内的偏移量就是标号flush 的汇编地址，处理器用它的数值来代替指令指针寄存器EIP 的原有内容。</p>
<p><code>[bits 32]</code></p>
<p>进入保护模式开始，之后的指令都应当是按32 位操作数方式编译的。因此，第53 行，使用了伪指令[bits 32]。当处理器执行到这里时，它会按32 位模式进行译码。</p>
<p>最后注意在保护模式下，不允许使用mov 指令改变段寄存器CS 的内容</p>
<h2 id="8-保护模式下的栈"><a href="#8-保护模式下的栈" class="headerlink" title="8. 保护模式下的栈"></a>8. 保护模式下的栈</h2><p>栈是向下扩展的，因此，描述符中的段界限，和向上扩展的段含义不同。</p>
<ol>
<li>对于向上扩展的段，段内偏移量是从0 开始递增，偏移量的最大值是界限值和粒度的乘积；</li>
<li>而对于向下扩展的段来说，段内偏移量的最小值是界限值和粒度的乘积加一。</li>
</ol>
<p>栈操作时，必须符合条件：<code>ESP &gt; 段界限 * 粒度值</code></p>

        </div>
        <!--  -->
        <footer class="article-footer">
            



    <a data-url="http://yoursite.com/2021/07/08/assembley/x86/x86_08/" data-id="ckxy3rqos00dw8ku93i7d2o3m" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-google-plus"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2021/07/09/assembley/x86/x86_09/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            9. 存储器的保护
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2021/07/07/assembley/x86/x86_07/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">7. 保护模式概述</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/10/17/assembley/link/link_01/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/操作系统/">操作系统</a></p>
                            <p class="item-title"><a href="/2021/10/17/assembley/link/link_01/" class="title">1. 《程序员的自我修养》读书笔记</a></p>
                            <p class="item-date"><time datetime="2021-10-16T16:00:00.000Z" itemprop="datePublished">2021-10-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/11/assembley/x86/x86_11/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/task.png)" alt="11. 任务和特权级保护" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/11/assembley/x86/x86_11/" class="title">11. 任务和特权级保护</a></p>
                            <p class="item-date"><time datetime="2021-07-10T16:00:00.000Z" itemprop="datePublished">2021-07-11</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/10/assembley/x86/x86_10/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/memory_asign.png)" alt="10. 程序的动态加载和执行" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/10/assembley/x86/x86_10/" class="title">10. 程序的动态加载和执行</a></p>
                            <p class="item-date"><time datetime="2021-07-09T16:00:00.000Z" itemprop="datePublished">2021-07-10</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/09/assembley/x86/x86_09/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/seg_check.png)" alt="9. 存储器的保护" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/09/assembley/x86/x86_09/" class="title">9. 存储器的保护</a></p>
                            <p class="item-date"><time datetime="2021-07-08T16:00:00.000Z" itemprop="datePublished">2021-07-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/07/08/assembley/x86/x86_08/" class="thumbnail">
    
    
        <span style="background-image:url(/images/assembly/gdt.png)" alt="8. 进入保护模式" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2021/07/08/assembley/x86/x86_08/" class="title">8. 进入保护模式</a></p>
                            <p class="item-date"><time datetime="2021-07-07T16:00:00.000Z" itemprop="datePublished">2021-07-08</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">45</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">58</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/存储/">存储</a><span class="category-list-count">58</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维/">运维</a><span class="category-list-count">198</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">48</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">29</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Brendan-Gregg/">Brendan Gregg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML-CSS/">HTML&CSS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8S/">K8S</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/">Kafka</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux性能调优/">Linux性能调优</a><span class="tag-list-count">49</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL实战45讲/">MySQL实战45讲</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openstack/">Openstack</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go并发编程/">go并发编程</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go标准库及第三方库/">go标准库及第三方库</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go语言入门/">go语言入门</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wrapt/">wrapt</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/x86-汇编/">x86 汇编</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/入门指南/">入门指南</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/好玩的数据结构与算法/">好玩的数据结构与算法</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据密集型应用/">数据密集型应用</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a><span class="tag-list-count">39</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/极客时间/">极客时间</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/程序员的自我修养/">程序员的自我修养</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-Linux/">马哥 Linux</a><span class="tag-list-count">135</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-MySQL-运维/">马哥 MySQL 运维</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高性能的MySQL/">高性能的MySQL</a><span class="tag-list-count">5</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Brendan-Gregg/" style="font-size: 10px;">Brendan Gregg</a> <a href="/tags/ES6/" style="font-size: 15.63px;">ES6</a> <a href="/tags/HTML-CSS/" style="font-size: 12.5px;">HTML&CSS</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/K8S/" style="font-size: 10px;">K8S</a> <a href="/tags/Kafka/" style="font-size: 16.25px;">Kafka</a> <a href="/tags/Linux性能调优/" style="font-size: 19.38px;">Linux性能调优</a> <a href="/tags/MySQL实战45讲/" style="font-size: 18.13px;">MySQL实战45讲</a> <a href="/tags/Openstack/" style="font-size: 13.75px;">Openstack</a> <a href="/tags/React/" style="font-size: 15.63px;">React</a> <a href="/tags/Vue/" style="font-size: 15.63px;">Vue</a> <a href="/tags/go并发编程/" style="font-size: 17.5px;">go并发编程</a> <a href="/tags/go标准库及第三方库/" style="font-size: 10.63px;">go标准库及第三方库</a> <a href="/tags/go语言入门/" style="font-size: 14.38px;">go语言入门</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/python/" style="font-size: 11.25px;">python</a> <a href="/tags/wrapt/" style="font-size: 16.88px;">wrapt</a> <a href="/tags/x86-汇编/" style="font-size: 14.38px;">x86 汇编</a> <a href="/tags/入门指南/" style="font-size: 16.25px;">入门指南</a> <a href="/tags/好玩的数据结构与算法/" style="font-size: 11.88px;">好玩的数据结构与算法</a> <a href="/tags/数据密集型应用/" style="font-size: 15.63px;">数据密集型应用</a> <a href="/tags/数据结构与算法/" style="font-size: 18.75px;">数据结构与算法</a> <a href="/tags/极客时间/" style="font-size: 18.13px;">极客时间</a> <a href="/tags/程序员的自我修养/" style="font-size: 10px;">程序员的自我修养</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/马哥-Linux/" style="font-size: 20px;">马哥 Linux</a> <a href="/tags/马哥-MySQL-运维/" style="font-size: 13.13px;">马哥 MySQL 运维</a> <a href="/tags/高性能的MySQL/" style="font-size: 11.88px;">高性能的MySQL</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">讨论区</h3>
        <div class="widget">
            <h4> 联系我 <h4>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2022 宋涛</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://yoursite.com/2021/07/08/assembley/x86/x86_08/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
