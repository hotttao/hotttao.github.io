<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>29.6 ansible 常用模块 - LoveIt</title><meta name="Description" content="29.6 ansible 常用模块"><meta property="og:title" content="29.6 ansible 常用模块" />
<meta property="og:description" content="29.6 ansible 常用模块" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_module/" /><meta property="og:image" content="https://hotttao.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-11-06T22:10:00+08:00" />
<meta property="article:modified_time" content="2022-02-23T21:55:15+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://hotttao.github.io/logo.png"/>

<meta name="twitter:title" content="29.6 ansible 常用模块"/>
<meta name="twitter:description" content="29.6 ansible 常用模块"/>
<meta name="application-name" content="宋涛的个人博客">
<meta name="apple-mobile-web-app-title" content="宋涛的个人博客"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_module/" /><link rel="prev" href="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible%E7%AE%80%E4%BB%8B/" /><link rel="next" href="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_playbook/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "29.6 ansible 常用模块",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/hotttao.github.io\/posts\/linux\/linux_mt\/32-ansible\/ansible_module\/"
        },"image": ["https:\/\/hotttao.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "马哥 Linux","wordcount":  4351 ,
        "url": "https:\/\/hotttao.github.io\/posts\/linux\/linux_mt\/32-ansible\/ansible_module\/","datePublished": "2018-11-06T22:10:00+08:00","dateModified": "2022-02-23T21:55:15+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/hotttao.github.io\/images\/hugo\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "宋涛"
            },"description": "29.6 ansible 常用模块"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/go/"> Go </a><a class="menu-item" href="/categories/linux/"> Linux </a><a class="menu-item" href="/categories/distributed/"> 分布式 </a><a class="menu-item" href="/categories/distributed/"> 架构 </a><a class="menu-item" href="/posts/about/"> 关于 </a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/go/" title="">Go</a><a class="menu-item" href="/categories/linux/" title="">Linux</a><a class="menu-item" href="/categories/distributed/" title="">分布式</a><a class="menu-item" href="/categories/distributed/" title="">架构</a><a class="menu-item" href="/posts/about/" title="">关于</a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">29.6 ansible 常用模块</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://hotttao.github.io/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>宋涛</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/linux/"><i class="far fa-folder fa-fw"></i>Linux</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2018-11-06">2018-11-06</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 4351 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 9 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-ansible-核心程序">1. ansible 核心程序</a>
      <ul>
        <li><a href="#11-ansible">1，1 ansible</a>
          <ul>
            <li><a href="#host-pattern">host-pattern</a></li>
          </ul>
        </li>
        <li><a href="#12-ansible-doc">1.2 ansible-doc</a></li>
        <li><a href="#ansible-playbook">ansible-playbook</a></li>
      </ul>
    </li>
    <li><a href="#2ansible-常用模块">2.ansible 常用模块</a>
      <ul>
        <li><a href="#21-基本模块">2.1 基本模块</a>
          <ul>
            <li><a href="#user">user</a></li>
            <li><a href="#group">group</a></li>
            <li><a href="#copy">copy</a></li>
            <li><a href="#file">file</a></li>
            <li><a href="#template">template</a></li>
          </ul>
        </li>
        <li><a href="#22--命令执行">2.2  命令执行</a>
          <ul>
            <li><a href="#command">command</a></li>
            <li><a href="#shell">shell</a></li>
            <li><a href="#script">script</a></li>
            <li><a href="#ping">ping</a></li>
          </ul>
        </li>
        <li><a href="#23-程序安装">2.3 程序安装</a>
          <ul>
            <li><a href="#yum">yum</a></li>
            <li><a href="#pip">pip</a></li>
          </ul>
        </li>
        <li><a href="#24-服务管理">2.4 服务管理</a>
          <ul>
            <li><a href="#cron">cron</a></li>
            <li><a href="#service">service</a></li>
          </ul>
        </li>
        <li><a href="#25-变量获取">2.5 变量获取</a>
          <ul>
            <li><a href="#setup">setup</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>ansible 常用模块</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/linux_mt/linux_ansible.jpg"
        data-srcset="/images/linux_mt/linux_ansible.jpg, /images/linux_mt/linux_ansible.jpg 1.5x, /images/linux_mt/linux_ansible.jpg 2x"
        data-sizes="auto"
        alt="/images/linux_mt/linux_ansible.jpg"
        title="HA" /></p>
<!-- more -->
<p>上一节我们对 ansible 做了一个概括性的介绍，本节我们来看看 ansible 主程序与常见模块的使用，模块是我们定义服务配置的关键。</p>
<h2 id="1-ansible-核心程序">1. ansible 核心程序</h2>
<p>ansible 的核心程序有三个</p>
<ol>
<li>ansible: ad-hoc 执行命令</li>
<li>ansible-doc: ansible 插件(模块)文档查看工具</li>
<li>ansible-playbook: playbook 执行命令</li>
</ol>
<h3 id="11-ansible">1，1 ansible</h3>
<p><code>ansible &lt;host-pattern&gt; [-m module_name] [-a args] options</code></p>
<ul>
<li>作用: ansible 命令行工具</li>
<li>模块:
<ul>
<li><code>[-m module_name]</code>: 指定使用的模块</li>
<li><code>[-a args]</code>: 传递给模块的参数</li>
</ul>
</li>
<li>选项: ansible 命令行工具的选项可分为三类
<ol>
<li>通用选项</li>
<li>连接选项</li>
<li>权限选项</li>
</ol>
</li>
<li>通用选项:
<ul>
<li><code>-C, --check</code>: 不实际执行，只显示程序执行可能的结果</li>
<li><code>-D, --diff</code>: 当执行的命令改变了文件或模板的内容时，显示更改前后的内容比较，最好和 <code>-C, --check</code> 一起使用</li>
<li><code>-e EXTRA_VARS, --extra-vars=EXTRA_VARS</code>: 向 ansible 传递的额外参数，参数值必需是行如<code>key=value</code>的键值对</li>
<li><code>-f FORKS, --forks=FORKS</code>: 并发操作的最大机器数</li>
<li><code>-i INVENTORY, --inventory=INVENTORY, --inventory-file=INVENTORY</code>: 定义 inventory 文件位置</li>
<li><code>--list-hosts</code>: 只显示被操作的主机</li>
<li><code>--syntax-check </code>:只对 playbook 执行语法检查, 不执行</li>
<li><code>-t TREE, --tree=TREE</code>: 日志的输出目录</li>
<li><code>--version</code>: 显示 ansible 的版本信息</li>
</ul>
</li>
<li>连接选项:
<ul>
<li><code>--private-key=PRIVATE_KEY_FILE</code>: 指定连接的密钥文件</li>
<li><code>--key-file=PRIVATE_KEY_FILE</code>:指定连接的密钥文件</li>
<li><code>-u,--user=REMOTE_USER</code>: 连接到被管控主机的帐户，默认为 None</li>
<li><code>-c, --connection=CONNECTION</code>: 连接的类型，默认为 smart</li>
<li><code>-T, --timeout=TIMEOUT</code>: 连接超时时长</li>
</ul>
</li>
<li>权限选项:
<ul>
<li><code>-b, --become</code>:</li>
<li><code>--become-user=BECOME_USER</code>: 提权限操作切换到的用户，默认为 root</li>
<li><code>--become-method=BECOME_METHOD</code>: 进行权限升级时使用的操作，默认为 sudo，可选值包括<code>sudo | su</code></li>
<li><code>--ask-become-pass</code>: 使用 sudo 或 su 时，使用的密码</li>
</ul>
</li>
</ul>
<h4 id="host-pattern">host-pattern</h4>
<p>ansible 支持多种主机匹配方式，以便我们能灵活的控制要操作的主机范围。常见的方式有如下几种</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 1. 全部主机</span>
</span></span><span class="line"><span class="cl">all
</span></span><span class="line"><span class="cl">*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2. IP地址或系列主机名</span>
</span></span><span class="line"><span class="cl">one.example.com
</span></span><span class="line"><span class="cl">one.example.com:two.example.com
</span></span><span class="line"><span class="cl">192.168.1.50
</span></span><span class="line"><span class="cl">192.168.1.*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3. 一个或多个groups</span>
</span></span><span class="line"><span class="cl">webservers             <span class="c1"># 单个组</span>
</span></span><span class="line"><span class="cl">webservers:dbservers   <span class="c1"># 多个组的并集</span>
</span></span><span class="line"><span class="cl">webservers:<span class="p">&amp;</span>staging    <span class="c1"># 多个组的交集</span>
</span></span><span class="line"><span class="cl">webservers:!phoenix    <span class="c1"># ! 表示排除关系，隶属 webservers 组但同时不在 phoenix组</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4. host names, IPs , groups都支持通配符</span>
</span></span><span class="line"><span class="cl">*.example.com
</span></span><span class="line"><span class="cl">*.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 5. 通配和groups的混合使用</span>
</span></span><span class="line"><span class="cl">one*.com:dbservers
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 6. 应用正则表达式，只需要以 ‘~’ 开头</span>
</span></span><span class="line"><span class="cl">~<span class="o">(</span>web<span class="p">|</span>db<span class="o">)</span>.*<span class="se">\.</span>example<span class="se">\.</span>com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 7. 通过 --limit 标记来添加排除条件</span>
</span></span><span class="line"><span class="cl">ansible-playbook site.yml --limit datacenter2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 8. 从文件读取hosts,文件名以@为前缀即可</span>
</span></span><span class="line"><span class="cl">ansible-playbook site.yml --limit @retry_hosts.txt
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="12-ansible-doc">1.2 ansible-doc</h3>
<p><code>ansible-doc options</code></p>
<ul>
<li>作用: ansible 文档查看工具</li>
<li>选项:
<ul>
<li><code>-l, --list</code>: 显示所有可用插件及模块</li>
<li><code>-s, --snippet=module</code>: 显示指定插件的的帮助信息</li>
<li><code>-t, --type=TYPE</code>: 指定被选择的插件类型，默认为 module</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">~$ ansible-doc -s shell
</span></span><span class="line"><span class="cl">- name: Execute commands in nodes.
</span></span><span class="line"><span class="cl">  shell:
</span></span><span class="line"><span class="cl">      chdir:                 # cd into this directory before running the command
</span></span><span class="line"><span class="cl">      creates:               # a filename, when it already exists, this step will *not* be run.
</span></span><span class="line"><span class="cl">      executable:            # change the shell used to execute the command. Should be an absolute path to the executable.
</span></span><span class="line"><span class="cl">      free_form:             # (required) The shell module takes a free form command to run, as a string.  There&#39;s not an actual option named
</span></span><span class="line"><span class="cl">                               &#34;free form&#34;.  See the examples!
</span></span><span class="line"><span class="cl">      removes:               # a filename, when it does not exist, this step will *not* be run.
</span></span><span class="line"><span class="cl">      stdin:                 # Set the stdin of the command directly to the specified value.
</span></span><span class="line"><span class="cl">      warn:                  # if command warnings are on in ansible.cfg, do not warn about this particular line if set to no/false.
</span></span></code></pre></td></tr></table>
</div>
</div><p>ansible-doc 显示的参数都是可以在 <code>ansible</code> 命令中 通过 <code>-a</code> 选项中传递给模块的参数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible -m shell -a &#34;echo &#39;test&#39; chdir=/root&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ansible-playbook">ansible-playbook</h3>
<p><code>ansible-playbook [options] playbook.yml [playbook2 ...]</code></p>
<ul>
<li>作用: playbook 的执行命令</li>
<li>参数: <code>playbook.yml...</code> 表示 playbook 的路经</li>
<li>选项: <code>ansible-playbook</code> 与 <code>ansible</code> 命令行工具的选项基本类似
<ul>
<li><code> --playbook-dir=BASEDIR</code>: playbook 的根目录，这个根目录的设置会影响 <code>roles/ group_vars/</code> 等目录的查找路经</li>
<li><code> -t TAGS, --tags=TAGS</code>: 运行指定标签对应的任务</li>
</ul>
</li>
</ul>
<h2 id="2ansible-常用模块">2.ansible 常用模块</h2>
<p>ansible 命令的执行是为了达到期望的状态，如果被管控主机的当前状态与命令指定的状态不一致，则执行命令，所以ansible 的命令都是通过 state 参数指定要进行的操作。</p>
<h3 id="21-基本模块">2.1 基本模块</h3>
<h4 id="user">user</h4>
<p><code>ansible -m user -a &quot;options&quot;</code></p>
<ul>
<li>作用: 用户管理</li>
<li>选项:
<ul>
<li><code>name</code>: 用户名</li>
<li><code>uid</code>: 指定创建用户的 uid</li>
<li><code>shell</code>: 设置默认shell</li>
<li><code>group</code>: 设置默认组</li>
<li><code>groups</code>: 设置附加组，默认操作是替换</li>
<li><code>append</code>: <code>groups</code> 操作为追加而不是替换</li>
<li><code>home</code>: 家目录</li>
<li><code>system</code>: yes|no 是否为系统用户</li>
<li><code>move</code>: 更新用户家目录时，是否将原有家目录的内容移动到新的目录中去</li>
<li><code>state</code>: 用户操作
<ul>
<li><code>present</code>: 创建用户</li>
<li><code>absent</code>: 删除用户</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ ansible-doc -s user
</span></span><span class="line"><span class="cl">$ ansible all -m user -a &#34;name=test uid=3000 shell=/bin/tsh groups=testgrp&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="group">group</h4>
<p><code>ansible -m user -a &quot;options&quot;</code></p>
<ul>
<li>作用: 用户组管理</li>
<li>选项:
<ul>
<li><code>name</code>: 组名</li>
<li><code>gid</code>: 指定gid</li>
<li><code>system</code>: yes|no 是否为系统用户</li>
<li><code>state</code>: 目标状态 <code>present|absent</code></li>
</ul>
</li>
</ul>
<h4 id="copy">copy</h4>
<p><code>ansible -m copy -a 'options'</code></p>
<ul>
<li>作用: 文件复制和创建</li>
<li>选项:
<ul>
<li><code>backup</code>：在覆盖之前将原文件备份，备份文件包含时间信息。有两个选项：yes|no</li>
<li><code>content</code>：用于替代&quot;src&quot;,可以直接设定指定文件的值</li>
<li><code>dest</code>：必选项。要将源文件复制到的远程主机的绝对路径，如果源文件是一个目录，那么该路径也必须是个目录</li>
<li><code>directory_mode</code>：递归的设定目录的权限，默认为系统默认权限</li>
<li><code>force</code>：如果目标主机包含该文件，但内容不同，如果设置为yes，则强制覆盖，如果为no，则只有当目标主机的目标位置不存在该文件时，才复制。默认为yes</li>
<li><code>others</code>：所有的file模块里的选项都可以在这里使用</li>
<li><code>src</code>：要复制到远程主机的文件在本地的地址，可以是绝对路径，也可以是相对路径。如果路径是一个目录，它将递归复制。在这种情况下，如果路径使用&quot;/&ldquo;来结尾，则只复制目录里的内容，如果没有使用&rdquo;/&ldquo;来结尾，则包含目录在内的整个内容全部复制，类似于rsync</li>
<li><code>remote_src</code>: yes|no，指定 scr 参数的源是本机还是远程的被管理主机，no 为本机</li>
<li><code>owner</code>: 设置目标文件的属主</li>
<li><code>group</code>: 设置目标文件的属组</li>
<li><code>mode</code>: 设置目标文件的权限</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible -m copy -a &#34;src=/etc/fstab dest=/tmp/fstab.ansible&#34;
</span></span><span class="line"><span class="cl">ansible -m copy -a &#34;content=&#39;hi ansible\n&#39; dest=/tmp/fstab.ansible mode=600&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="file">file</h4>
<p><code>ansible -m file -a &quot;options&quot;</code></p>
<ul>
<li>作用: 文件属性管理</li>
<li>选项:
<ul>
<li><code>force</code>：yes|no 是否强制创建软连接
<ul>
<li>一种是源文件不存在但之后会建立的情况下，强制创建</li>
<li>另一种是目标软链接已存在,需要先取消之前的软链，然后创建新的软链</li>
</ul>
</li>
<li><code>group</code>：定义文件/目录的属组</li>
<li><code>mode</code>：定义文件/目录的权限</li>
<li><code>owner</code>：定义文件/目录的属主</li>
<li><code>path</code>：必选项，定义文件/目录的路径</li>
<li><code>recurse</code>：递归的设置文件的属性，只对目录有效</li>
<li><code>src</code>：要被链接的源文件的路径，只应用于<code>state=link</code>的情况</li>
<li><code>dest</code>：被链接到的路径，只应用于state=link的情况</li>
<li><code>state</code>：
<ul>
<li><code>directory</code>：如果目录不存在，创建目录</li>
<li><code>file</code>：即使文件不存在，也不会被创建</li>
<li><code>link</code>：创建软链接</li>
<li><code>hard</code>：创建硬链接</li>
<li><code>touch</code>：如果文件不存在，则会创建一个新的文件，如果文件或目录已存在，则更新其最后修改时间</li>
<li><code>absent</code>：删除目录、文件或者取消链接文件</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible test -m file -a &#34;src=/etc/fstab dest=/tmp/fstab state=link&#34;
</span></span><span class="line"><span class="cl">ansible test -m file -a &#34;path=/tmp/fstab state=absent&#34;
</span></span><span class="line"><span class="cl">ansible test -m file -a &#34;path=/tmp/test state=touch&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="template">template</h4>
<p><code>ansible -m template -a 'option'</code></p>
<ul>
<li>作用: 基于 python jinja2 模板生成文件并复制到目标主机</li>
<li>选项:
<ul>
<li><code>backup</code>：在覆盖之前将原文件备份，备份文件包含时间信息。有两个选项：yes|no</li>
<li><code>src</code>：要被链接的源文件的路径，只应用于<code>state=link</code>的情况</li>
<li><code>dest</code>：必选项。要将源文件复制到的远程主机的绝对路径，如果源文件是一个目录，那么该路径也必须是个目录</li>
<li><code>force</code>：如果目标主机包含该文件，但内容不同，如果设置为yes，则强制覆盖，如果为no，则只有当目标主机的目标位置不存在该文件时，才复制。默认为yes</li>
<li><code>owner</code>: 设置目标文件的属主</li>
<li><code>group</code>: 设置目标文件的属组</li>
<li><code>mode</code>: 设置目标文件的权限</li>
</ul>
</li>
</ul>
<h3 id="22--命令执行">2.2  命令执行</h3>
<h4 id="command">command</h4>
<p><code>ansible -m command -a 'option'</code></p>
<ul>
<li>作用: 命令执行，但是无法解析 bash 中的特殊字符，比如 <code>|</code>，只能执行简单命令</li>
<li>选项:
<ul>
<li><code>free_form</code>: 非参数名称，指代任何可执行命令</li>
<li><code>creates</code>: 文件名，2.0 后支持通配符，表示指定的文件存在时不执行命令</li>
<li><code>removes</code>: 与 <code>creates</code> 相反，表示文件不存在时不执行命令</li>
<li><code>chdir</code>: 指定命令运行的当前目录</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible -m command -a &#34;ifconfig&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="shell">shell</h4>
<p><code>ansible -m shell -a 'option'</code></p>
<ul>
<li>作用: 命令执行，能正常解析 shell 语法</li>
<li>选项:
<ul>
<li><code>free_form</code>: 非参数名称，指代任何可执行命令</li>
<li><code>creates</code>: 文件名，2.0 后支持通配符，表示指定的文件存在时不执行命令</li>
<li><code>removes</code>: 与 <code>creates</code> 相反，表示文件不存在时不执行命令</li>
<li><code>chdir</code>: 指定命令运行的当前目录</li>
<li><code>executable</code>: 执行运行命令的 shell 解释器，必需是绝对路经</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible -m command -a &#34;echo pswd|password --stdin tao&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="script">script</h4>
<p><code>ansible -m script -a 'option'</code></p>
<ul>
<li>作用: 将脚本复制到管控主机并执行</li>
<li>选项:
<ul>
<li><code>free_form</code>: 非参数名称，指代任何可执行命令</li>
<li><code>creates</code>: 文件名，2.0 后支持通配符，表示指定的文件存在时不执行命令</li>
<li><code>removes</code>: 与 <code>creates</code> 相反，表示文件不存在时不执行命令</li>
<li><code>chdir</code>: 指定命令运行的当前目录</li>
<li><code>executable</code>: 执行运行命令的 shell 解释器，必需是绝对路经</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible -m script -a &#34;mount.sh&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ping">ping</h4>
<p><code>ansible -m ping -a 'option'</code></p>
<ul>
<li>作用: 测试主机是否是通的</li>
<li>选项：无</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible 10.212.52.252 -m ping
</span></span><span class="line"><span class="cl">10.212.52.252 | success &gt;&gt; {
</span></span><span class="line"><span class="cl">    &#34;changed&#34;: false,
</span></span><span class="line"><span class="cl">    &#34;ping&#34;: &#34;pong&#34;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="23-程序安装">2.3 程序安装</h3>
<h4 id="yum">yum</h4>
<p><code>ansible -m yum -a 'option'</code></p>
<ul>
<li>作用: 文件属性管理</li>
<li>选项：
<ul>
<li><code>config_file</code>：yum的配置文件</li>
<li><code>disable_gpg_check</code>：关闭gpg_check</li>
<li><code>disablerepo</code>：不启用某个源</li>
<li><code>enablerepo</code>：启用某个源</li>
<li><code>name</code>：要进行操作的软件包的名字，可附带版本信息，也可以传递一个url或者一个本地的rpm包的路径</li>
<li><code>allow_downgrade</code>: 是否允许降级安装，默认为 no；默认的安装操作相当于 <code>yum -y update</code>，如果 <code>name</code> 指定的版本相对于已安装的版本较低，则不会安装</li>
<li><code>state</code>：状态（present，absent，latest）</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">ansible</span> <span class="n">test</span> <span class="o">-</span><span class="n">m</span> <span class="n">yum</span> <span class="o">-</span><span class="n">a</span> <span class="s1">&#39;name=httpd state=latest&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">ansible</span> <span class="n">test</span> <span class="o">-</span><span class="n">m</span> <span class="n">yum</span> <span class="o">-</span><span class="n">a</span> <span class="s1">&#39;name=&#34;@Development tools&#34; state=present&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">ansible</span> <span class="n">test</span> <span class="o">-</span><span class="n">m</span> <span class="n">yum</span> <span class="o">-</span><span class="n">a</span> <span class="s1">&#39;name=http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm state=present&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="pip">pip</h4>
<p><code>ansible -m pip -a 'option'</code></p>
<ul>
<li>作用: 文件属性管理</li>
<li>选项：
<ul>
<li><code>chdir</code>: pip 命令运行前切换到此目录</li>
<li><code>executable</code>: 指定运行 pip的版本，pip 的名称或绝对路经；不能与<code>virtualenv</code>同时使用</li>
<li><code>extra_args</code>: 传给 <code>pip</code>的额外参数</li>
<li><code>name</code>: 安装的程序包名称，可以是一个 url</li>
<li><code>version</code>: 指定的Python库的安装版本</li>
<li><code>virtualenv</code>：virtualenv 虚拟环境目录，不能与 <code>executable</code> 同时使用，如果虚拟环境不存在，将自动创建</li>
<li><code>virtualenv_command</code>: 虚拟环境使用的管理命令或绝对路经，eg:<code>pyvenv, ~/bin/virtualenv</code></li>
<li><code>virtualenv_python</code>: 虚拟环境中的 python 版本，当virtualenv_command使用pyvenv或-m venv模块时，不应使用此参数</li>
<li><code>state</code>:
<ul>
<li><code>present</code>:默认的，表示为安装</li>
<li><code>lastest</code>: 安装为最新的版本</li>
<li><code>absent</code>：表示删除</li>
<li><code>forcereinstall</code>：“forcereinstall”选项仅适用于可ansible 2.1及更高版本</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 支持 pipenv 么？
</span></span><span class="line"><span class="cl">ansible -m pip -a &#34;name=ipython virtualenv=/opt/vdd/project virtualenv_command=pipenv&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="24-服务管理">2.4 服务管理</h3>
<h4 id="cron">cron</h4>
<p><code>ansible -m cron -a 'option'</code></p>
<ul>
<li>作用: 周期性任务管理</li>
<li>选项：
<ul>
<li><code>backup</code>：对远程主机上的原任务计划内容修改之前做备份</li>
<li><code>cron_file</code>：如果指定该选项，则用该文件替换远程主机上的cron.d目录下的用户的任务计划</li>
<li><code>day</code>：日</li>
<li><code>hour</code>：小时</li>
<li><code>minute</code>：分钟</li>
<li><code>month</code>：月</li>
<li><code>weekday</code>：周</li>
<li><code>job</code>：要执行的任务，依赖于<code>state=present</code></li>
<li><code>name</code>：该任务的描述</li>
<li><code>special_time</code>：指定什么时候执行，参数包括 <code>reboot,yearly,annually,monthly,weekly,daily,hourly</code></li>
<li><code>state</code>：确认该任务计划是创建还是删除，present or absent</li>
<li><code>user</code>：以哪个用户的身份执行</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible test -m cron -a &#39;name=&#34;a job for reboot&#34; special_time=reboot job=&#34;/some/job.sh&#34;&#39;
</span></span><span class="line"><span class="cl">ansible test -m cron -a &#39;name=&#34;yum autoupdate&#34; weekday=&#34;2&#34; minute=0 hour=12 user=&#34;root
</span></span><span class="line"><span class="cl">ansible 10.212.52.252 -m cron  -a &#39;backup=&#34;True&#34; name=&#34;test&#34; minute=&#34;0&#34; hour=&#34;2&#34; job=&#34;ls -alh &gt; /dev/null&#34;&#39;
</span></span><span class="line"><span class="cl">ansilbe test -m cron -a &#39;cron_file=ansible_yum-autoupdate state=absent&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="service">service</h4>
<p><code>ansible -m service -a 'option'</code></p>
<ul>
<li>作用: 管理服务管理</li>
<li>选项：
<ul>
<li><code>arguments</code>：给命令行提供一些选项</li>
<li><code>enabled</code>：是否开机启动 yes|no</li>
<li><code>name</code>：必选项，服务名称</li>
<li><code>pattern</code>：定义一个模式，如果通过status指令来查看服务的状态时，没有响应，就会通过ps指令在进程中根据该模式进行查找，如果匹配到，则认为该服务依然在运行</li>
<li><code>runlevel</code>：运行级别</li>
<li><code>sleep</code>：如果执行了restarted，在则stop和start之间沉睡几秒钟</li>
<li><code>state</code>：对当前服务执行启动，停止、重启、重新加载等操作（started,stopped,restarted,reloaded）</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible -m service -a &#34;name=httpd state=started enabled=yes&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="25-变量获取">2.5 变量获取</h3>
<h4 id="setup">setup</h4>
<p><code>ansible -m setup -a 'option'</code></p>
<ul>
<li>作用: 获取被管控主机的所有系统参数信息</li>
<li>选项：
<ul>
<li><code>filter</code>: 参数过滤，支持 shell 通配语法</li>
<li><code>gather_subset</code>: 限制返回的参数范围，可选值包括 <code>all, min, hardware, network, virtual, ohai</code>,值前的 <code>!</code> 表示取反</li>
<li><code>gather_timeout</code>: 参数收集的超时时长</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible 10.212.52.252 -m setup -a &#39;filter=ansible_*_mb&#39;   //查看主机内存信息
</span></span><span class="line"><span class="cl">ansible 10.212.52.252 -m setup -a &#39;filter=ansible_eth[0-2]&#39;   //查看地接口为eth0-2的网卡信息
</span></span><span class="line"><span class="cl">ansible all -m setup --tree /tmp/facts   //将所有主机的信息输入到/tmp/facts目录下，每台主机的信息输入到主机名文件中
</span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-02-23&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/c5f4155585e6653049f0ba550b4c73da73bd958f" target="_blank" title="commit by WardSong(1556824234@qq.com) c5f4155585e6653049f0ba550b4c73da73bd958f: 马哥linux 运维">
                                    <i class="fas fa-hashtag fa-fw"></i>c5f4155</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/linux/linux_mt/32-ansible/ansible_module/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_module/" data-title="29.6 ansible 常用模块" data-hashtags="马哥 Linux"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_module/" data-hashtag="马哥 Linux"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_module/" data-title="29.6 ansible 常用模块"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_module/" data-title="29.6 ansible 常用模块"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://hotttao.github.io/posts/linux/linux_mt/32-ansible/ansible_module/" data-title="29.6 ansible 常用模块" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/%E9%A9%AC%E5%93%A5-linux/">马哥 Linux</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/linux/linux_mt/32-ansible/ansible%E7%AE%80%E4%BB%8B/" class="prev" rel="prev" title="29.5 ansible简介"><i class="fas fa-angle-left fa-fw"></i>29.5 ansible简介</a>
            <a href="/posts/linux/linux_mt/32-ansible/ansible_playbook/" class="next" rel="next" title="29.7 ansible playbook">29.7 ansible playbook<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.120.2">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">宋涛</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":30},"comment":{"gitalk":{"admin":["hotttao"],"clientID":"7b48df1b81d23057c798","clientSecret":"65c6f9e6ca6ae4d8105f757578b6b594e3668e61","id":"2018-11-06T22:10:00+08:00","owner":"hotttao","repo":"hotttao.github.io","title":"29.6 ansible 常用模块"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
