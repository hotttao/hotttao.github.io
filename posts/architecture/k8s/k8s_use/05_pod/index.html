<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Pod - LoveIt</title><meta name="Description" content="什么是 Pod"><meta property="og:title" content="Pod" />
<meta property="og:description" content="什么是 Pod" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hotttao.github.io/posts/architecture/k8s/k8s_use/05_pod/" /><meta property="og:image" content="https://hotttao.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-03T22:00:00+08:00" />
<meta property="article:modified_time" content="2023-03-01T10:06:25+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://hotttao.github.io/logo.png"/>

<meta name="twitter:title" content="Pod"/>
<meta name="twitter:description" content="什么是 Pod"/>
<meta name="application-name" content="宋涛的个人博客">
<meta name="apple-mobile-web-app-title" content="宋涛的个人博客"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://hotttao.github.io/posts/architecture/k8s/k8s_use/05_pod/" /><link rel="prev" href="https://hotttao.github.io/posts/architecture/k8s/k8s_use/06_pod/" /><link rel="next" href="https://hotttao.github.io/posts/architecture/k8s/k8s_use/02_docker_net/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Pod",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/hotttao.github.io\/posts\/architecture\/k8s\/k8s_use\/05_pod\/"
        },"image": ["https:\/\/hotttao.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "k8s","wordcount":  6430 ,
        "url": "https:\/\/hotttao.github.io\/posts\/architecture\/k8s\/k8s_use\/05_pod\/","datePublished": "2020-08-03T22:00:00+08:00","dateModified": "2023-03-01T10:06:25+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/hotttao.github.io\/images\/hugo\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "宋涛"
            },"description": "什么是 Pod"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/go/"> Go </a><a class="menu-item" href="/categories/linux/"> Linux </a><a class="menu-item" href="/categories/distributed/"> 分布式 </a><a class="menu-item" href="/categories/distributed/"> 架构 </a><a class="menu-item" href="/posts/about/"> 关于 </a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/go/" title="">Go</a><a class="menu-item" href="/categories/linux/" title="">Linux</a><a class="menu-item" href="/categories/distributed/" title="">分布式</a><a class="menu-item" href="/categories/distributed/" title="">架构</a><a class="menu-item" href="/posts/about/" title="">关于</a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Pod</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://hotttao.github.io/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>宋涛</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/architecture/"><i class="far fa-folder fa-fw"></i>architecture</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-08-03">2020-08-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 6430 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 13 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#2-为什么我们需要-pod">2. 为什么我们需要 Pod</a>
      <ul>
        <li><a href="#21-成组调度">2.1 成组调度</a></li>
        <li><a href="#22-pod-的实现原理">2.2 Pod 的实现原理</a></li>
        <li><a href="#23-容器设计模式">2.3 容器设计模式</a></li>
      </ul>
    </li>
    <li><a href="#3-pod对象基本概念">3. Pod对象基本概念</a>
      <ul>
        <li><a href="#31-pod-中重要的字段">3.1 Pod 中重要的字段</a>
          <ul>
            <li><a href="#调度相关">调度相关</a></li>
            <li><a href="#网络配置">网络配置</a></li>
            <li><a href="#linux-namespace-相关">Linux Namespace 相关</a></li>
            <li><a href="#容器相关">容器相关</a></li>
          </ul>
        </li>
        <li><a href="#32-container-中重要的字段">3.2 Container 中重要的字段</a>
          <ul>
            <li><a href="#imagepullpolicy">ImagePullPolicy</a></li>
            <li><a href="#lifecycle">Lifecycle</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#4-pod-的声明周期">4. Pod 的声明周期</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>接下来我们要先来认识 k8s 中最基础的 API 对象 POD，这是学习后面所有的编排对象的基础。</p>
<h2 id="2-为什么我们需要-pod">2. 为什么我们需要 Pod</h2>
<h3 id="21-成组调度">2.1 成组调度</h3>
<p>Pod，是 Kubernetes 项目中最小的 API 对象，更专业的说法可以描述为: Pod，是 Kubernetes 项目的原子调度单位。那为什么我们需要 Pod 呢？如果我们做一个类比:</p>
<ol>
<li>容器的本质是进程，是未来云计算系统中的进程</li>
<li>容器镜像就是这个系统里的“.exe”安装包</li>
<li>Kubernetes 则是未来云计算的操作系统</li>
<li>在操作系统里进程是以进程组的方式组织在一起</li>
<li>Kubernetes 项目所做的，其实就是将“进程组”的概念映射到了容器技术中，并使其称为一等公民</li>
<li>之所以这么做的原因是应用往往都存在着类似于“进程和进程组”的关系，更具体地说，就是这些应用之间有着密切的协作关系，使得它们必须部署在同一台机器上</li>
</ol>
<p>所以 Pod 的存在就是为了解决成组调度（gang scheduling）的问题。Pod 是 Kubernetes 里的原子调度单位。这就意味着，Kubernetes 项目的调度器，是统一按照 Pod 而非容器的资源需求进行计算的。</p>
<p>像这样容器间的紧密协作，我们可以称为“超亲密关系”。这些具有“超亲密关系”容器的典型特征包括但不限于：</p>
<ol>
<li>互相之间会发生直接的文件交换</li>
<li>使用 localhost 或者 Socket 文件进行本地通信</li>
<li>会发生非常频繁的远程调用</li>
<li>需要共享某些 Linux Namespace（比如，一个容器要加入另一个容器的 Network Namespace）等等。</li>
</ol>
<p>注:再次强调一下：容器的“单进程模型”，并不是指容器里只能运行“一个”进程，而是指容器没有管理多个进程的能力。这是因为容器里 PID=1 的进程就是应用本身，其他的进程都是这个 PID=1 进程的子进程。可是，用户编写的应用，并不能够像正常操作系统里的 init 进程或者 systemd 那样拥有进程管理的功能。</p>
<h3 id="22-pod-的实现原理">2.2 Pod 的实现原理</h3>
<p>首先，Pod 只是一个逻辑概念。所以不存在什么 Pod 的边界，存在的依旧是 Linux Namespace 和 Cgroups。本质上 Pod，其实是一组共享了某些资源的容器。具体的说：Pod 里的所有容器，共享的是同一个 Network Namespace，并且可以声明共享同一个 Volume。</p>
<p>而为了避免使用 <code>docker run --net=B --volumes-from=B --name=A image-A ...</code> 让 Pod 内的容器引入不对等关系，Pod 的实现使用了一个中间容器，这个容器叫作 Infra 容器。在这个 Pod 中，Infra 容器永远都是第一个被创建的容器，而其他用户定义的容器，则通过 Join Network Namespace 的方式，与 Infra 容器关联在一起，这样的组织关系，可以用下面这样一个示意图来表达：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/k8s/k8s_use/infra.webp"
        data-srcset="/images/k8s/k8s_use/infra.webp, /images/k8s/k8s_use/infra.webp 1.5x, /images/k8s/k8s_use/infra.webp 2x"
        data-sizes="auto"
        alt="/images/k8s/k8s_use/infra.webp"
        title="rootfs" /></p>
<p>Kubernetes 项目里，Infra 容器一定要占用极少的资源，所以它使用的是一个非常特殊的镜像，叫作：k8s.gcr.io/pause。这个镜像是一个用汇编语言编写的、永远处于“暂停”状态的容器，解压后的大小也只有 100~200 KB 左右。而在 Infra 容器“Hold 住”Network Namespace 后，用户容器就可以加入到 Infra 容器的 Network Namespace 当中了。Pod 的生命周期只跟 Infra 容器一致，而与容器 A 和 B 无关。</p>
<p>而对于同一个 Pod 里面的所有用户容器来说，它们的进出流量，也可以认为都是通过 Infra 容器完成的。这一点很重要，因为将来如果你要为 Kubernetes 开发一个网络插件时，应该重点考虑的是如何配置这个 Pod 的 Network Namespace，而不是每一个用户容器如何使用你的网络配置，这是没有意义的。</p>
<p>有了这个设计之后，共享 Volume 就简单多了：Kubernetes 项目只要把所有 Volume 的定义都设计在 Pod 层级即可。一个 Volume 对应的宿主机目录对于 Pod 来说就只有一个，Pod 里的容器只要声明挂载这个 Volume，就一定可以共享这个 Volume 对应的宿主机目录。</p>
<h3 id="23-容器设计模式">2.3 容器设计模式</h3>
<p>前面说了 Pod 存在的一个重要原因是成组调度，而另一个原因就是容器设计模式。容器设计模式，实际上就是希望，当用户想在一个容器里跑多个功能并不相关的应用时，应该优先考虑它们是不是更应该被描述成一个 Pod 里的多个容器。</p>
<p>第一个最典型的例子是：WAR 包与 Web 服务器:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">javaweb-2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">initContainers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">geektime/sample:v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">war</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;cp&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;/sample.war&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;/app&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l">/app</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">app-volume</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">geektime/tomcat:7.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">tomcat</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span><span class="s2">&#34;-c&#34;</span><span class="p">,</span><span class="s2">&#34;/root/apache-tomcat-7.0.42-v2/bin/start.sh&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l">/root/apache-tomcat-7.0.42-v2/webapps</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">app-volume</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">hostPort</span><span class="p">:</span><span class="w"> </span><span class="m">8001</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">app-volume</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>在 Pod 中，所有 Init Container 定义的容器，都会比 spec.containers 定义的用户容器先启动。并且，Init Container 容器会按顺序逐一启动，而直到它们都启动并且退出了，用户容器才会启动。最终的结果就是，我们使用了一种“组合”方式，解决了 WAR 包与 Tomcat 容器之间耦合关系的问题。</p>
<p>实际上，这个所谓的“组合”操作，正是容器设计模式里最常用的一种模式，它的名字叫：sidecar。sidecar 指的就是我们可以在一个 Pod 中，启动一个辅助容器，来完成一些独立于主进程（主容器）之外的工作。</p>
<p>这个例子中的 sidecar 的主要工作也是使用共享的 Volume 来完成对文件的操作。但不要忘记，Pod 的另一个重要特性是，它的所有容器都共享同一个 Network Namespace。这就使得很多与 Pod 网络相关的配置和管理，也都可以交给 sidecar 完成，而完全无须干涉用户容器。这里最典型的例子莫过于 Istio 这个微服务治理项目了。</p>
<p>Kubernetes 社区曾经把“容器设计模式”这个理论，整理成了一篇<a href="https://www.usenix.org/conference/hotcloud16/workshop-program/presentation/burns" target="_blank" rel="noopener noreffer">小论文</a></p>
<p>你现在可以这么理解 Pod 的本质：Pod，实际上是在扮演传统基础设施里“虚拟机”的角色；而容器，则是这个虚拟机里运行的用户程序。当你需要把一个运行在虚拟机里的应用迁移到 Docker 容器中时，一定要仔细分析到底有哪些进程（组件）运行在这个虚拟机里。然后，你就可以把整个虚拟机想象成为一个 Pod，把这些进程分别做成容器镜像，把有顺序关系的容器，定义为 Init Container。这才是更加合理的、松耦合的容器编排诀窍，也是从传统应用架构，到“微服务架构”最自然的过渡方式。</p>
<p>Pod 这个概念，提供的是一种编排思想，而不是具体的技术方案。所以，如果愿意的话，你完全可以使用虚拟机来作为 Pod 的实现，然后把用户容器都运行在这个虚拟机里。比如，Mirantis 公司的virtlet 项目就在干这个事情。甚至，你可以去实现一个带有 Init 进程的容器项目，来模拟传统应用的运行方式。这些工作，在 Kubernetes 中都是非常轻松的，也是我们后面讲解 CRI 时会提到的内容。</p>
<h2 id="3-pod对象基本概念">3. Pod对象基本概念</h2>
<p>接下来我们就要深入到 Pod 对象中细节中了，那么首先我们要面对的问题就是: 到底哪些属性属于 Pod 对象，而又有哪些属性属于 Container 呢？。Pod 对标的是虚拟机所以在 Pod 的配置中，所以凡是调度、网络、存储，以及安全相关的属性，基本上是 Pod 级别的。这些属性的共同特征是，它们描述的是“机器”这个整体，而不是里面运行的“程序”</p>
<h3 id="31-pod-中重要的字段">3.1 Pod 中重要的字段</h3>
<h4 id="调度相关">调度相关</h4>
<p>与调度有关的字段包括:
2. NodeName：</p>
<ul>
<li>一旦 Pod 的这个字段被赋值，Kubernetes 项目就会被认为这个 Pod 已经经过了调度，调度的结果就是赋值的节点名字</li>
<li>所以，这个字段一般由调度器负责设置，但用户也可以设置它来“骗过”调度器，当然这个做法一般是在测试或者调试的时候才会用到</li>
</ul>
<ol>
<li>NodeSelector：</li>
</ol>
<ul>
<li>是一个供用户将 Pod 与 Node 进行绑定的字段</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">nodeSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">disktype</span><span class="p">:</span><span class="w"> </span><span class="l">ssd</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>这样的一个配置，意味着这个 Pod 永远只能运行在携带了“disktype: ssd”标签（Label）的节点上；否则，它将调度失败。</p>
<h4 id="网络配置">网络配置</h4>
<p>与网络配置有关的字段包括:</p>
<ol>
<li>HostAliases：定义了 Pod 的 hosts 文件（比如 /etc/hosts）里的内容</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hostAliases</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;10.1.2.3&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostnames</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;foo.remote&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;bar.remote&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">...</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>上面配置的 Pod 启动后，/etc/hosts 文件的内容将如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat /etc/hosts
</span></span><span class="line"><span class="cl"># Kubernetes-managed hosts file.
</span></span><span class="line"><span class="cl">127.0.0.1 localhost
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">10.244.135.10 hostaliases-pod
</span></span><span class="line"><span class="cl"># 通过 HostAliases 字段为 Pod 设置的
</span></span><span class="line"><span class="cl">10.1.2.3 foo.remote
</span></span><span class="line"><span class="cl">10.1.2.3 bar.remote
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="linux-namespace-相关">Linux Namespace 相关</h4>
<p>与 Namespace 配置有关的字段包括:</p>
<ol>
<li><code>shareProcessNamespace: true</code>: Pod 里的容器要共享 PID Namespace</li>
<li><code>hostNetwork: true</code>: 共享宿主机的 Network Namespace</li>
<li><code>hostIPC: true</code>: 共享宿主机的 IPC Namespace</li>
<li><code>hostPID: true</code>: 共享宿主机的 PID Namespace</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">shareProcessNamespace</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">shell</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">busybox</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">stdin</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tty</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 可以直接认为 tty 就是 Linux 给用户提供的一个常驻小程序，用于接收用户的标准输入，返回操作系统的标准输出。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 为了能够在 tty 中输入信息，你还需要同时开启 stdin（标准输入流）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 连接到 shell 容器的 tty 上</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># kubectl attach -it nginx -c shell</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hostNetwork</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hostIPC</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hostPID</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">...</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="容器相关">容器相关</h4>
<p>Init Containers 和 Containers 都属于 Pod 对容器的定义，内容也完全相同，只是 Init Containers 的生命周期，会先于所有的 Containers，并且严格按照定义的顺序执行。</p>
<h3 id="32-container-中重要的字段">3.2 Container 中重要的字段</h3>
<p>Container 的定义除了 Docker 中的常规字段，如下几个字段相对特殊。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 常规字段</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">geektime/tomcat:7.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">workingDir</span><span class="p">:</span><span class="w"> </span><span class="l">/root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">tomcat</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span><span class="s2">&#34;-c&#34;</span><span class="p">,</span><span class="s2">&#34;/root/apache-tomcat-7.0.42-v2/bin/start.sh&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">      
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">hostPort</span><span class="p">:</span><span class="w"> </span><span class="m">8001</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="imagepullpolicy">ImagePullPolicy</h4>
<p>ImagePullPolicy 定义了镜像拉取的策略</p>
<ul>
<li>Always: 默认值，每次创建 Pod 都重新拉取一次镜像。另外，当容器的镜像是类似于 nginx 或者 nginx:latest 这样的名字时，ImagePullPolicy 也会被认为 Always</li>
<li>Never 或者 IfNotPresent，则意味着 Pod 永远不会主动拉取这个镜像，或者只在宿主机上不存在这个镜像时才拉取</li>
</ul>
<h4 id="lifecycle">Lifecycle</h4>
<p>定义的是 Container Lifecycle Hooks。顾名思义，Container Lifecycle Hooks 就是在容器状态发生变化时触发一系列“钩子”。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">lifecycle-demo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">lifecycle-demo-container</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">lifecycle</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">postStart</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;/bin/sh&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;-c&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;echo Hello from the postStart handler &gt; /usr/share/message&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">preStop</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;/usr/sbin/nginx&#34;</span><span class="p">,</span><span class="s2">&#34;-s&#34;</span><span class="p">,</span><span class="s2">&#34;quit&#34;</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>postStart:</li>
</ol>
<ul>
<li>指的是，在容器启动后，立刻执行一个指定的操作。</li>
<li>需要明确的是，postStart 定义的操作，虽然是在 Docker 容器 ENTRYPOINT 执行之后，但它并不严格保证顺序。</li>
<li>也就是说，在 postStart 启动时，ENTRYPOINT 有可能还没有结束。</li>
<li>如果 postStart 执行超时或者错误，Kubernetes 会在该 Pod 的 Events 中报出该容器启动失败的错误信息，导致 Pod 也处于失败的状态</li>
</ul>
<ol start="2">
<li>preStop:</li>
</ol>
<ul>
<li>发生的时机，则是容器被杀死之前</li>
<li>preStop 操作的执行，是同步的。所以，它会阻塞当前的容器杀死流程，直到这个 Hook 定义操作完成之后，才允许容器被杀死，这跟 postStart 不一样</li>
</ul>
<h2 id="4-pod-的声明周期">4. Pod 的声明周期</h2>
<p>Pod 生命周期的变化，主要体现在 Pod API 对象的 Status 部分，其中，<strong>pod.status.phase</strong>，就是 Pod 的当前状态，它有如下几种可能的情况：</p>
<ol>
<li>Pending: API 对象已经被创建并保存在 Etcd 当中。但是，这个 Pod 里有些容器因为某种原因而不能被顺利创建。比如，调度不成功</li>
<li>Running: Pod 已经调度成功，跟一个具体的节点绑定。它包含的容器都已经创建成功，并且至少有一个正在运行中</li>
<li>Succeeded: Pod 里的所有容器都正常运行完毕，并且已经退出了，运行一次性任务时最为常见</li>
<li>Failed: Pod 里至少有一个容器以不正常的状态（非 0 的返回码）退出</li>
<li>Unknown: 这是一个异常状态，意味着 Pod 的状态不能持续地被 kubelet 汇报给 kube-apiserver，这很有可能是主从节点（Master 和 Kubelet）间的通信出现了问题</li>
</ol>
<p>更进一步地，Pod 对象的 Status 字段，还可以再细分出一组 <strong>Conditions</strong>。这些细分状态的值包括：PodScheduled、Ready、Initialized，以及 Unschedulable。它们主要用于描述造成当前 Status 的具体原因是什么。比如，Pod 当前的 Status 是 Pending，对应的 Condition 是 Unschedulable，这就意味着它的调度出现了问题。</p>
<p>而其中，Ready 这个细分状态非常值得我们关注：它意味着 Pod 不仅已经正常启动（Running 状态），而且已经可以对外提供服务了。这两者之间（Running 和 Ready）是有区别的。</p>
<p>最后附上 <a href="https://github.com/kubernetes/api/blob/master/core/v1/types.go" target="_blank" rel="noopener noreffer">pod 的 go struct 定义</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">PodSpec</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// List of volumes that can be mounted by containers belonging to the pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://kubernetes.io/docs/concepts/storage/volumes
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchMergeKey=name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchStrategy=merge,retainKeys
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Volumes</span> <span class="p">[]</span><span class="nx">Volume</span> <span class="s">`json:&#34;volumes,omitempty&#34; patchStrategy:&#34;merge,retainKeys&#34; patchMergeKey:&#34;name&#34; protobuf:&#34;bytes,1,rep,name=volumes&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// List of initialization containers belonging to the pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Init containers are executed in order prior to containers being started. If any
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// init container fails, the pod is considered to have failed and is handled according
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// to its restartPolicy. The name for an init container or normal container must be
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// unique among all containers.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Init containers may not have Lifecycle actions, Readiness probes, Liveness probes, or Startup probes.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// The resourceRequirements of an init container are taken into account during scheduling
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// by finding the highest request/limit for each resource type, and then using the max of
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// of that value or the sum of the normal containers. Limits are applied to init containers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// in a similar fashion.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Init containers cannot currently be added or removed.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Cannot be updated.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchMergeKey=name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchStrategy=merge
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">InitContainers</span> <span class="p">[]</span><span class="nx">Container</span> <span class="s">`json:&#34;initContainers,omitempty&#34; patchStrategy:&#34;merge&#34; patchMergeKey:&#34;name&#34; protobuf:&#34;bytes,20,rep,name=initContainers&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// List of containers belonging to the pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Containers cannot currently be added or removed.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// There must be at least one container in a Pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Cannot be updated.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchMergeKey=name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchStrategy=merge
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Containers</span> <span class="p">[]</span><span class="nx">Container</span> <span class="s">`json:&#34;containers&#34; patchStrategy:&#34;merge&#34; patchMergeKey:&#34;name&#34; protobuf:&#34;bytes,2,rep,name=containers&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// List of ephemeral containers run in this pod. Ephemeral containers may be run in an existing
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// pod to perform user-initiated actions such as debugging. This list cannot be specified when
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// creating a pod, and it cannot be modified by updating the pod spec. In order to add an
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// ephemeral container to an existing pod, use the pod&#39;s ephemeralcontainers subresource.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchMergeKey=name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchStrategy=merge
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">EphemeralContainers</span> <span class="p">[]</span><span class="nx">EphemeralContainer</span> <span class="s">`json:&#34;ephemeralContainers,omitempty&#34; patchStrategy:&#34;merge&#34; patchMergeKey:&#34;name&#34; protobuf:&#34;bytes,34,rep,name=ephemeralContainers&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Restart policy for all containers within the pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// One of Always, OnFailure, Never.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Default to Always.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#restart-policy
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">RestartPolicy</span> <span class="nx">RestartPolicy</span> <span class="s">`json:&#34;restartPolicy,omitempty&#34; protobuf:&#34;bytes,3,opt,name=restartPolicy,casttype=RestartPolicy&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Optional duration in seconds the pod needs to terminate gracefully. May be decreased in delete request.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Value must be non-negative integer. The value zero indicates stop immediately via
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// the kill signal (no opportunity to shut down).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If this value is nil, the default grace period will be used instead.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// The grace period is the duration in seconds after the processes running in the pod are sent
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// a termination signal and the time when the processes are forcibly halted with a kill signal.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Set this value longer than the expected cleanup time for your process.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Defaults to 30 seconds.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">TerminationGracePeriodSeconds</span> <span class="o">*</span><span class="kt">int64</span> <span class="s">`json:&#34;terminationGracePeriodSeconds,omitempty&#34; protobuf:&#34;varint,4,opt,name=terminationGracePeriodSeconds&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Optional duration in seconds the pod may be active on the node relative to
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// StartTime before the system will actively try to mark it failed and kill associated containers.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Value must be a positive integer.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">ActiveDeadlineSeconds</span> <span class="o">*</span><span class="kt">int64</span> <span class="s">`json:&#34;activeDeadlineSeconds,omitempty&#34; protobuf:&#34;varint,5,opt,name=activeDeadlineSeconds&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Set DNS policy for the pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Defaults to &#34;ClusterFirst&#34;.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Valid values are &#39;ClusterFirstWithHostNet&#39;, &#39;ClusterFirst&#39;, &#39;Default&#39; or &#39;None&#39;.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// DNS parameters given in DNSConfig will be merged with the policy selected with DNSPolicy.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// To have DNS options set along with hostNetwork, you have to specify DNS policy
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// explicitly to &#39;ClusterFirstWithHostNet&#39;.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">DNSPolicy</span> <span class="nx">DNSPolicy</span> <span class="s">`json:&#34;dnsPolicy,omitempty&#34; protobuf:&#34;bytes,6,opt,name=dnsPolicy,casttype=DNSPolicy&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// NodeSelector is a selector which must be true for the pod to fit on a node.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Selector which must match a node&#39;s labels for the pod to be scheduled on that node.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +mapType=atomic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">NodeSelector</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span> <span class="s">`json:&#34;nodeSelector,omitempty&#34; protobuf:&#34;bytes,7,rep,name=nodeSelector&#34;`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// ServiceAccountName is the name of the ServiceAccount to use to run this pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">ServiceAccountName</span> <span class="kt">string</span> <span class="s">`json:&#34;serviceAccountName,omitempty&#34; protobuf:&#34;bytes,8,opt,name=serviceAccountName&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// DeprecatedServiceAccount is a depreciated alias for ServiceAccountName.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Deprecated: Use serviceAccountName instead.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +k8s:conversion-gen=false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">DeprecatedServiceAccount</span> <span class="kt">string</span> <span class="s">`json:&#34;serviceAccount,omitempty&#34; protobuf:&#34;bytes,9,opt,name=serviceAccount&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// AutomountServiceAccountToken indicates whether a service account token should be automatically mounted.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">AutomountServiceAccountToken</span> <span class="o">*</span><span class="kt">bool</span> <span class="s">`json:&#34;automountServiceAccountToken,omitempty&#34; protobuf:&#34;varint,21,opt,name=automountServiceAccountToken&#34;`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// NodeName is a request to schedule this pod onto a specific node. If it is non-empty,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// the scheduler simply schedules this pod onto that node, assuming that it fits resource
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// requirements.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">NodeName</span> <span class="kt">string</span> <span class="s">`json:&#34;nodeName,omitempty&#34; protobuf:&#34;bytes,10,opt,name=nodeName&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Host networking requested for this pod. Use the host&#39;s network namespace.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If this option is set, the ports that will be used must be specified.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Default to false.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +k8s:conversion-gen=false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">HostNetwork</span> <span class="kt">bool</span> <span class="s">`json:&#34;hostNetwork,omitempty&#34; protobuf:&#34;varint,11,opt,name=hostNetwork&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Use the host&#39;s pid namespace.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Optional: Default to false.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +k8s:conversion-gen=false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">HostPID</span> <span class="kt">bool</span> <span class="s">`json:&#34;hostPID,omitempty&#34; protobuf:&#34;varint,12,opt,name=hostPID&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Use the host&#39;s ipc namespace.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Optional: Default to false.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +k8s:conversion-gen=false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">HostIPC</span> <span class="kt">bool</span> <span class="s">`json:&#34;hostIPC,omitempty&#34; protobuf:&#34;varint,13,opt,name=hostIPC&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Share a single process namespace between all of the containers in a pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// When this is set containers will be able to view and signal processes from other containers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// in the same pod, and the first process in each container will not be assigned PID 1.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// HostPID and ShareProcessNamespace cannot both be set.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Optional: Default to false.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +k8s:conversion-gen=false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">ShareProcessNamespace</span> <span class="o">*</span><span class="kt">bool</span> <span class="s">`json:&#34;shareProcessNamespace,omitempty&#34; protobuf:&#34;varint,27,opt,name=shareProcessNamespace&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// SecurityContext holds pod-level security attributes and common container settings.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Optional: Defaults to empty.  See type description for default values of each field.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">SecurityContext</span> <span class="o">*</span><span class="nx">PodSecurityContext</span> <span class="s">`json:&#34;securityContext,omitempty&#34; protobuf:&#34;bytes,14,opt,name=securityContext&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// ImagePullSecrets is an optional list of references to secrets in the same namespace to use for pulling any of the images used by this PodSpec.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If specified, these secrets will be passed to individual puller implementations for them to use.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchMergeKey=name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchStrategy=merge
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">ImagePullSecrets</span> <span class="p">[]</span><span class="nx">LocalObjectReference</span> <span class="s">`json:&#34;imagePullSecrets,omitempty&#34; patchStrategy:&#34;merge&#34; patchMergeKey:&#34;name&#34; protobuf:&#34;bytes,15,rep,name=imagePullSecrets&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Specifies the hostname of the Pod
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If not specified, the pod&#39;s hostname will be set to a system-defined value.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Hostname</span> <span class="kt">string</span> <span class="s">`json:&#34;hostname,omitempty&#34; protobuf:&#34;bytes,16,opt,name=hostname&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// If specified, the fully qualified Pod hostname will be &#34;&lt;hostname&gt;.&lt;subdomain&gt;.&lt;pod namespace&gt;.svc.&lt;cluster domain&gt;&#34;.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If not specified, the pod will not have a domainname at all.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Subdomain</span> <span class="kt">string</span> <span class="s">`json:&#34;subdomain,omitempty&#34; protobuf:&#34;bytes,17,opt,name=subdomain&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// If specified, the pod&#39;s scheduling constraints
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Affinity</span> <span class="o">*</span><span class="nx">Affinity</span> <span class="s">`json:&#34;affinity,omitempty&#34; protobuf:&#34;bytes,18,opt,name=affinity&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// If specified, the pod will be dispatched by specified scheduler.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If not specified, the pod will be dispatched by default scheduler.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">SchedulerName</span> <span class="kt">string</span> <span class="s">`json:&#34;schedulerName,omitempty&#34; protobuf:&#34;bytes,19,opt,name=schedulerName&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// If specified, the pod&#39;s tolerations.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Tolerations</span> <span class="p">[]</span><span class="nx">Toleration</span> <span class="s">`json:&#34;tolerations,omitempty&#34; protobuf:&#34;bytes,22,opt,name=tolerations&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// HostAliases is an optional list of hosts and IPs that will be injected into the pod&#39;s hosts
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// file if specified. This is only valid for non-hostNetwork pods.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchMergeKey=ip
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchStrategy=merge
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">HostAliases</span> <span class="p">[]</span><span class="nx">HostAlias</span> <span class="s">`json:&#34;hostAliases,omitempty&#34; patchStrategy:&#34;merge&#34; patchMergeKey:&#34;ip&#34; protobuf:&#34;bytes,23,rep,name=hostAliases&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// If specified, indicates the pod&#39;s priority. &#34;system-node-critical&#34; and
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// &#34;system-cluster-critical&#34; are two special keywords which indicate the
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// highest priorities with the former being the highest priority. Any other
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// name must be defined by creating a PriorityClass object with that name.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If not specified, the pod priority will be default or zero if there is no
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// default.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">PriorityClassName</span> <span class="kt">string</span> <span class="s">`json:&#34;priorityClassName,omitempty&#34; protobuf:&#34;bytes,24,opt,name=priorityClassName&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// The priority value. Various system components use this field to find the
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// priority of the pod. When Priority Admission Controller is enabled, it
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// prevents users from setting this field. The admission controller populates
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// this field from PriorityClassName.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// The higher the value, the higher the priority.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Priority</span> <span class="o">*</span><span class="kt">int32</span> <span class="s">`json:&#34;priority,omitempty&#34; protobuf:&#34;bytes,25,opt,name=priority&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Specifies the DNS parameters of a pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Parameters specified here will be merged to the generated DNS
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// configuration based on DNSPolicy.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">DNSConfig</span> <span class="o">*</span><span class="nx">PodDNSConfig</span> <span class="s">`json:&#34;dnsConfig,omitempty&#34; protobuf:&#34;bytes,26,opt,name=dnsConfig&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// If specified, all readiness gates will be evaluated for pod readiness.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// A pod is ready when all its containers are ready AND
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// all conditions specified in the readiness gates have status equal to &#34;True&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://git.k8s.io/enhancements/keps/sig-network/580-pod-readiness-gates
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">ReadinessGates</span> <span class="p">[]</span><span class="nx">PodReadinessGate</span> <span class="s">`json:&#34;readinessGates,omitempty&#34; protobuf:&#34;bytes,28,opt,name=readinessGates&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// RuntimeClassName refers to a RuntimeClass object in the node.k8s.io group, which should be used
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// to run this pod.  If no RuntimeClass resource matches the named class, the pod will not be run.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If unset or empty, the &#34;legacy&#34; RuntimeClass will be used, which is an implicit class with an
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// empty definition that uses the default runtime handler.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://git.k8s.io/enhancements/keps/sig-node/585-runtime-class
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">RuntimeClassName</span> <span class="o">*</span><span class="kt">string</span> <span class="s">`json:&#34;runtimeClassName,omitempty&#34; protobuf:&#34;bytes,29,opt,name=runtimeClassName&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// EnableServiceLinks indicates whether information about services should be injected into pod&#39;s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// environment variables, matching the syntax of Docker links.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Optional: Defaults to true.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">EnableServiceLinks</span> <span class="o">*</span><span class="kt">bool</span> <span class="s">`json:&#34;enableServiceLinks,omitempty&#34; protobuf:&#34;varint,30,opt,name=enableServiceLinks&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// PreemptionPolicy is the Policy for preempting pods with lower priority.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// One of Never, PreemptLowerPriority.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Defaults to PreemptLowerPriority if unset.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">PreemptionPolicy</span> <span class="o">*</span><span class="nx">PreemptionPolicy</span> <span class="s">`json:&#34;preemptionPolicy,omitempty&#34; protobuf:&#34;bytes,31,opt,name=preemptionPolicy&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Overhead represents the resource overhead associated with running a pod for a given RuntimeClass.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// This field will be autopopulated at admission time by the RuntimeClass admission controller. If
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// the RuntimeClass admission controller is enabled, overhead must not be set in Pod create requests.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// The RuntimeClass admission controller will reject Pod create requests which have the overhead already
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// set. If RuntimeClass is configured and selected in the PodSpec, Overhead will be set to the value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// defined in the corresponding RuntimeClass, otherwise it will remain unset and treated as zero.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// More info: https://git.k8s.io/enhancements/keps/sig-node/688-pod-overhead/README.md
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Overhead</span> <span class="nx">ResourceList</span> <span class="s">`json:&#34;overhead,omitempty&#34; protobuf:&#34;bytes,32,opt,name=overhead&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// TopologySpreadConstraints describes how a group of pods ought to spread across topology
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// domains. Scheduler will schedule pods in a way which abides by the constraints.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// All topologySpreadConstraints are ANDed.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchMergeKey=topologyKey
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +patchStrategy=merge
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +listType=map
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +listMapKey=topologyKey
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +listMapKey=whenUnsatisfiable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">TopologySpreadConstraints</span> <span class="p">[]</span><span class="nx">TopologySpreadConstraint</span> <span class="s">`json:&#34;topologySpreadConstraints,omitempty&#34; patchStrategy:&#34;merge&#34; patchMergeKey:&#34;topologyKey&#34; protobuf:&#34;bytes,33,opt,name=topologySpreadConstraints&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// If true the pod&#39;s hostname will be configured as the pod&#39;s FQDN, rather than the leaf name (the default).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// In Linux containers, this means setting the FQDN in the hostname field of the kernel (the nodename field of struct utsname).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// In Windows containers, this means setting the registry value of hostname for the registry key HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters to FQDN.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If a pod does not have FQDN, this has no effect.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Default to false.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">SetHostnameAsFQDN</span> <span class="o">*</span><span class="kt">bool</span> <span class="s">`json:&#34;setHostnameAsFQDN,omitempty&#34; protobuf:&#34;varint,35,opt,name=setHostnameAsFQDN&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Specifies the OS of the containers in the pod.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Some pod and container fields are restricted if this is set.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If the OS field is set to linux, the following fields must be unset:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// -securityContext.windowsOptions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If the OS field is set to windows, following fields must be unset:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.hostPID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.hostIPC
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.hostUsers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.seLinuxOptions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.seccompProfile
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.fsGroup
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.fsGroupChangePolicy
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.sysctls
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.shareProcessNamespace
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.runAsUser
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.runAsGroup
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.securityContext.supplementalGroups
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.seLinuxOptions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.seccompProfile
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.capabilities
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.readOnlyRootFilesystem
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.privileged
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.allowPrivilegeEscalation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.procMount
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.runAsUser
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// - spec.containers[*].securityContext.runAsGroup
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">OS</span> <span class="o">*</span><span class="nx">PodOS</span> <span class="s">`json:&#34;os,omitempty&#34; protobuf:&#34;bytes,36,opt,name=os&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Use the host&#39;s user namespace.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Optional: Default to true.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// If set to true or not present, the pod will be run in the host user namespace, useful
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// for when the pod needs a feature only available to the host user namespace, such as
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// loading a kernel module with CAP_SYS_MODULE.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// When set to false, a new userns is created for the pod. Setting false is useful for
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// mitigating container breakout vulnerabilities even allowing users to run their
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// containers as root without actually having root privileges on the host.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// This field is alpha-level and is only honored by servers that enable the UserNamespacesSupport feature.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +k8s:conversion-gen=false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// +optional
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">HostUsers</span> <span class="o">*</span><span class="kt">bool</span> <span class="s">`json:&#34;hostUsers,omitempty&#34; protobuf:&#34;bytes,37,opt,name=hostUsers&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2023-03-01&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/983113e69c96e760669dedeb062f1a9ca0ce4e1e" target="_blank" title="commit by tao(tao@example.com) 983113e69c96e760669dedeb062f1a9ca0ce4e1e: k8s pod">
                                    <i class="fas fa-hashtag fa-fw"></i>983113e</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/architecture/k8s/k8s_use/05_pod/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://hotttao.github.io/posts/architecture/k8s/k8s_use/05_pod/" data-title="Pod" data-hashtags="k8s"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://hotttao.github.io/posts/architecture/k8s/k8s_use/05_pod/" data-hashtag="k8s"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://hotttao.github.io/posts/architecture/k8s/k8s_use/05_pod/" data-title="Pod"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://hotttao.github.io/posts/architecture/k8s/k8s_use/05_pod/" data-title="Pod"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://hotttao.github.io/posts/architecture/k8s/k8s_use/05_pod/" data-title="Pod" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/k8s/">k8s</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/architecture/k8s/k8s_use/06_pod/" class="prev" rel="prev" title="Pod"><i class="fas fa-angle-left fa-fw"></i>Pod</a>
            <a href="/posts/architecture/k8s/k8s_use/02_docker_net/" class="next" rel="next" title="容器网络">容器网络<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.110.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">宋涛</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":30},"comment":{"gitalk":{"admin":["hotttao"],"clientID":"7b48df1b81d23057c798","clientSecret":"65c6f9e6ca6ae4d8105f757578b6b594e3668e61","id":"2020-08-03T22:00:00+08:00","owner":"hotttao","repo":"hotttao.github.io","title":"Pod"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
