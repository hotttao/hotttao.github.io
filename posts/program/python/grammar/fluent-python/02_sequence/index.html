<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>序列 - LoveIt</title><meta name="Description" content="Python 序列，迭代器与生成器"><meta property="og:title" content="序列" />
<meta property="og:description" content="Python 序列，迭代器与生成器" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hotttao.github.io/posts/program/python/grammar/fluent-python/02_sequence/" /><meta property="og:image" content="https://hotttao.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-02T22:00:00+08:00" />
<meta property="article:modified_time" content="2022-03-10T13:09:11+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://hotttao.github.io/logo.png"/>

<meta name="twitter:title" content="序列"/>
<meta name="twitter:description" content="Python 序列，迭代器与生成器"/>
<meta name="application-name" content="宋涛的个人博客">
<meta name="apple-mobile-web-app-title" content="宋涛的个人博客"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://hotttao.github.io/posts/program/python/grammar/fluent-python/02_sequence/" /><link rel="prev" href="https://hotttao.github.io/posts/linux/linux_mt/03-linux%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90%E5%92%8C%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9/%E5%B8%B8%E7%94%A8%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" /><link rel="next" href="https://hotttao.github.io/posts/linux/linux_mt/03-linux%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90%E5%92%8C%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9/%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "序列",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/hotttao.github.io\/posts\/program\/python\/grammar\/fluent-python\/02_sequence\/"
        },"image": ["https:\/\/hotttao.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "python 进阶","wordcount":  6071 ,
        "url": "https:\/\/hotttao.github.io\/posts\/program\/python\/grammar\/fluent-python\/02_sequence\/","datePublished": "2018-01-02T22:00:00+08:00","dateModified": "2022-03-10T13:09:11+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/hotttao.github.io\/images\/hugo\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "宋涛"
            },"description": "Python 序列，迭代器与生成器"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/go/"> Go </a><a class="menu-item" href="/categories/linux/"> Linux </a><a class="menu-item" href="/categories/distributed/"> 分布式 </a><a class="menu-item" href="/categories/distributed/"> 架构 </a><a class="menu-item" href="/posts/about/"> 关于 </a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/go/" title="">Go</a><a class="menu-item" href="/categories/linux/" title="">Linux</a><a class="menu-item" href="/categories/distributed/" title="">分布式</a><a class="menu-item" href="/categories/distributed/" title="">架构</a><a class="menu-item" href="/posts/about/" title="">关于</a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">序列</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://hotttao.github.io/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>宋涛</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/python/"><i class="far fa-folder fa-fw"></i>Python</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2018-01-02">2018-01-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 6071 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 13 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-内置序列类型概览">1. 内置序列类型概览</a></li>
    <li><a href="#2-内置序列类型">2. 内置序列类型</a>
      <ul>
        <li><a href="#21-列表">2.1 列表</a>
          <ul>
            <li><a href="#列表推导">列表推导</a></li>
            <li><a href="#生成器表达式">生成器表达式</a></li>
          </ul>
        </li>
        <li><a href="#22-元组">2.2 元组</a>
          <ul>
            <li><a href="#元组拆包">元组拆包</a></li>
            <li><a href="#具名元组">具名元组</a></li>
            <li><a href="#列表与元组对比">列表与元组对比</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#3-序列用法">3. 序列用法</a>
      <ul>
        <li><a href="#31-切片用法">3.1 切片用法</a>
          <ul>
            <li><a href="#实现概览">实现概览</a></li>
            <li><a href="#用法概览">用法概览</a></li>
          </ul>
        </li>
        <li><a href="#32-对序列使用和">3.2 对序列使用+和*</a></li>
        <li><a href="#33-序列的增量赋值">3.3 序列的增量赋值</a>
          <ul>
            <li><a href="#增量的实现">增量的实现</a></li>
            <li><a href="#性能问题">性能问题</a></li>
            <li><a href="#关于的谜题">关于+=的谜题</a></li>
          </ul>
        </li>
        <li><a href="#34-listsort方法和-sorted函数">3.4 list.sort方法和 sorted函数</a></li>
        <li><a href="#35-用bisect来管理已排序的序列">3.5 用bisect来管理已排序的序列</a></li>
      </ul>
    </li>
    <li><a href="#4-列表的可替换类型">4. 列表的可替换类型</a>
      <ul>
        <li><a href="#41-数组">4.1 数组</a></li>
        <li><a href="#42-内存视图">4.2 内存视图</a></li>
        <li><a href="#43-numpy-和-scipy">4.3 Numpy 和 Scipy</a></li>
        <li><a href="#44-队列">4.4 队列</a></li>
        <li><a href="#45-其他队列">4.5 其他队列</a></li>
      </ul>
    </li>
    <li><a href="#附注">附注</a>
      <ul>
        <li><a href="#python-版本差异">Python 版本差异</a></li>
      </ul>
    </li>
    <li><a href="#常用模块">常用模块</a></li>
    <li><a href="#延伸阅读">延伸阅读</a></li>
    <li><a href="#杂谈">杂谈</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="1-内置序列类型概览">1. 内置序列类型概览</h2>
<ol>
<li><strong>容器序列</strong>:</li>
</ol>
<ul>
<li>能存放不同类型的数据</li>
<li>序列内存放的是它们所包含的任意类型的对象的引用</li>
<li>包括
<ul>
<li>list</li>
<li>tuple</li>
<li>collections.deque 这些序列</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>扁平序列</strong>:</li>
</ol>
<ul>
<li>只能容纳一种类型</li>
<li>序列里存放的是值而不是引用</li>
<li>扁平序列是一段连续的内存空间，更加紧凑</li>
<li>但只能存放诸如字符、字节和数值这种基础类型</li>
<li>包括
<ul>
<li>str、 bytes、 bytearray</li>
<li>memoryview</li>
<li>array.array</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>可变序列</strong></li>
</ol>
<ul>
<li>包括
<ul>
<li>list、 bytearray、</li>
<li>array.array、</li>
<li>collections.deque</li>
<li>memoryview</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>不可变序列</strong></li>
</ol>
<ul>
<li>包括
<ul>
<li>tuple、 str 和 bytes</li>
</ul>
</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/fluent_python/sequence_abc.png"
        data-srcset="/images/fluent_python/sequence_abc.png, /images/fluent_python/sequence_abc.png 1.5x, /images/fluent_python/sequence_abc.png 2x"
        data-sizes="auto"
        alt="/images/fluent_python/sequence_abc.png"
        title="内置序列类型概览" /></p>
<h2 id="2-内置序列类型">2. 内置序列类型</h2>
<h3 id="21-列表">2.1 列表</h3>
<h4 id="列表推导">列表推导</h4>
<ul>
<li>list comprehension 简称为 listcomps</li>
<li>适用: 只用列表推导来创建新的列表，并且尽量保持简短</li>
<li>特点:
<ul>
<li>Python3 列表推导有局部作用域，不会有变量泄漏的问题</li>
<li>Python2 在列表推导中 for 关键词之后的赋值操作可能会影响列表推导上下文中的同名变量</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">Python</span> <span class="mf">2.7.6</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Mar</span> <span class="mi">22</span> <span class="mi">2014</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span> <span class="mi">59</span><span class="p">:</span> <span class="mi">38</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">GCC</span> <span class="mf">4.8.2</span><span class="p">]</span> <span class="n">on</span> <span class="n">linux2</span>
</span></span><span class="line"><span class="cl"><span class="n">Type</span> <span class="s2">&#34;help&#34;</span><span class="p">,</span> <span class="s2">&#34;copyright&#34;</span><span class="p">,</span> <span class="s2">&#34;credits&#34;</span> <span class="ow">or</span> <span class="s2">&#34;license&#34;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;my precious&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dummy</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s1">&#39;ABC&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;C&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="生成器表达式">生成器表达式</h4>
<ul>
<li>generator expression 简称为 genexps</li>
<li>语法: 与列表推导类似，把方括号换成圆括号</li>
<li>特点: 遵守了迭代器协议，可以逐个地产出元素</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">symbols</span> <span class="o">=</span> <span class="s1">&#39;$¢£¥€¤&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbols</span><span class="p">)</span> <span class="err">➊</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">162</span><span class="p">,</span> <span class="mi">163</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">8364</span><span class="p">,</span> <span class="mi">164</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">array</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbols</span><span class="p">))</span> <span class="err">➋</span>
</span></span><span class="line"><span class="cl"><span class="n">array</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">162</span><span class="p">,</span> <span class="mi">163</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">8364</span><span class="p">,</span> <span class="mi">164</span><span class="p">])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="22-元组">2.2 元组</h3>
<h4 id="元组拆包">元组拆包</h4>
<ul>
<li>适用: 可以应用到任何可迭代对象上</li>
<li>要求: 被可迭代对象中的元素数量必须要跟接受这些元素的空档数一致</li>
<li>语法:  Python3
<ul>
<li>* 表示忽略多余元素</li>
<li>平行赋值中， * 前缀只能用在一个变量名前面，但是这个变量可以出现在赋值表达式的任意位置</li>
<li>可以是嵌套的，只要接受元组的嵌套结构符合表达式本身的嵌套结构</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">lax_coordinates</span> <span class="o">=</span> <span class="p">(</span><span class="mf">33.9425</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.408056</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span> <span class="o">=</span> <span class="n">lax_coordinates</span> <span class="c1"># 元组拆包</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">divmod</span><span class="p">(</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">_</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/home/luciano/.ssh/idrsa.pub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">rest</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">body</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">metro_areas</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span><span class="s1">&#39;JP&#39;</span><span class="p">,</span><span class="mf">36.933</span><span class="p">,(</span><span class="mf">35.689722</span><span class="p">,</span><span class="mf">139.691667</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="o">=</span>  <span class="n">metro_areas</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="具名元组">具名元组</h4>
<p>collections.namedtuple</p>
<ul>
<li>作用: 工厂函数，用来构建一个带字段名的元组和一个有名字的类</li>
<li>特点:
<ul>
<li>实例所消耗的内存跟元组是一样的,因为字段名都被存在对应的类里面</li>
<li>实例跟普通的对象实例比起来也要小一些，因为Python 不会用 __dict__ 来存放这些实例的属性</li>
</ul>
</li>
<li>专有属性:
<ul>
<li>类属性 _fields: 包含这个类所有字段名称的元组</li>
<li>类方法 _make(iterable): 接受一个可迭代对象来生成这类的实例</li>
<li>实例方法 _asdict(): 把具名元组以 collections.OrderedDict 的形式返回</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">City</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;City&#39;</span><span class="p">,</span> <span class="s1">&#39;name country population coordinates&#39;</span><span class="p">)</span> <span class="err">➊</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">tokyo</span> <span class="o">=</span> <span class="n">City</span><span class="p">(</span><span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span> <span class="s1">&#39;JP&#39;</span><span class="p">,</span> <span class="mf">36.933</span><span class="p">,</span> <span class="p">(</span><span class="mf">35.689722</span><span class="p">,</span> <span class="mf">139.691667</span><span class="p">))</span> <span class="err">➋</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">tokyo</span>
</span></span><span class="line"><span class="cl"><span class="n">City</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span> <span class="n">country</span><span class="o">=</span><span class="s1">&#39;JP&#39;</span><span class="p">,</span> <span class="n">population</span><span class="o">=</span><span class="mf">36.933</span><span class="p">,</span> <span class="n">coordinates</span><span class="o">=</span><span class="p">(</span><span class="mf">35.689722</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="mf">139.691667</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">tokyo</span><span class="o">.</span><span class="n">population</span> <span class="err">➌</span>
</span></span><span class="line"><span class="cl"><span class="mf">36.933</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">City</span><span class="o">.</span><span class="n">_fields</span> <span class="err">➊</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">,</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">delhi_data</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Delhi NCR&#39;</span><span class="p">,</span> <span class="s1">&#39;IN&#39;</span><span class="p">,</span> <span class="mf">21.935</span><span class="p">,</span> <span class="p">(</span><span class="mf">28.613889</span><span class="p">,</span> <span class="mf">77.208889</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">delhi</span> <span class="o">=</span> <span class="n">City</span><span class="o">.</span><span class="n">_make</span><span class="p">(</span><span class="n">delhi_data</span><span class="p">)</span> <span class="err">➋</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">delhi</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span> <span class="err">➌</span>
</span></span><span class="line"><span class="cl"><span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Delhi NCR&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;IN&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="mf">21.935</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;coordinates&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mf">28.613889</span><span class="p">,</span> <span class="n">long</span><span class="o">=</span><span class="mf">77.208889</span><span class="p">))])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="列表与元组对比">列表与元组对比</h4>
<p>|方法|列表|元组|作用|
|: &mdash;|: &mdash;|: &mdash;|: &mdash;|
|s.__add__(s2) |•| • |s + s2，拼接|
|s.__iadd__(s2)|•| |s += s2，就地拼接|
|s.append(e) |•| |在尾部添加一个新元素|
|s.clear() |•| |删除所有元素|
|s.__contains__(e)| •| •| s 是否包含 e|
|s.copy() |•| |列表的浅复制|
|s.count(e) |• |• |e 在 s 中出现的次数|
|s.__delitem__(p) |•| |把位于 p 的元素删除|
|s.extend(it) |•| |把可迭代对象 it 追加给 s|
|s.__getitem__(p) |•| •| s[p]，获取位置 p 的元素|
|s.__getnewargs__()| |•| 在 pickle 中支持更加优化的序列化|
|s.index(e) |•| •| 在 s 中找到元素 e 第一次出现的位置|
|s.insert(p, e) |•| |在位置 p 之前插入元素 e|
|s.__iter__() |•| •| 获取 s 的迭代器|
|s.__len__() |•| •| len(s)，元素的数量|
|s.__mul__(n) |•| •| s * n， n 个 s 的重复拼接|
|s.__imul__(n) |•| |s *= n，就地重复拼接|
|s.__rmul__(n) |•| •| n * s，反向拼接 *|
|s.pop([p]) |• | |删除最后或者是（可选的）位于 p 的元素，并返回它的值|
|s.remove(e) |•| |删除 s 中的第一次出现的 e|
|s.reverse() |•| |就地把 s 的元素倒序排列|
|s.__reversed__() |•| |返回 s 的倒序迭代器|
|s.__setitem__(p, e) |• | |s[p] = e，把元素 e放在位置 p，替代已经在那个位置的元素|
|s.sort([key], [reverse]) |•| |就地对 s 中的元素进行排序，可选的参数有键（ key）和是否倒序（ reverse）|</p>
<h2 id="3-序列用法">3. 序列用法</h2>
<h3 id="31-切片用法">3.1 切片用法</h3>
<h4 id="实现概览">实现概览</h4>
<p>seq[a: b: c]</p>
<ul>
<li>a: b: c - 只能作为索引或者下标用在 [] 中来返回一个切片对象:  slice(a, b, c)</li>
<li>求值的时候， Python会调用 seq.__getitem__(slice(start, stop, step))</li>
</ul>
<h4 id="用法概览">用法概览</h4>
<ol>
<li>可以给切片命名,比用硬编码的数字区间要方便得多</li>
<li>多维切片 - 以逗号分开的多个索引或者是切片</li>
</ol>
<ul>
<li>实现: 要得到 a[i, j] 的值， Python 会调用 a.__getitem__((i, j))</li>
<li>附注: Python 内置的序列类型都是一维的，只支持单一的索引</li>
</ul>
<ol start="3">
<li>省略</li>
</ol>
<ul>
<li>语法: 正确书写方法是三个英语句号（&hellip;）</li>
<li>实现: 省略在 Python 解析器眼里是一个符号，而实际上它是 Ellipsis 对
象的别名，而 Ellipsis 对象又是 ellipsis 类的单一实例;  可以当作切片规范的一部分，
也可以用在函数的参数清单中，比如 f(a, &hellip;, z)，或 a[i: &hellip;]</li>
<li>应用: numpy  eg: 如果 x 是四维数组，那么 x[i, &hellip;] 就是 x[i, : , : , : ]</li>
<li>附注: 还未发现 Python 标准库里有任何 Ellipsis 或者是多维索引的用法</li>
</ul>
<ol start="4">
<li>给切片赋值</li>
</ol>
<ul>
<li>用法: 把切片放在赋值语句的左边，或把它作为 del 操作的对象</li>
<li>语法: 如果赋值的对象是一个切片，那么赋值语句的右侧必须是个可迭代对象</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">l</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span> <span class="mi">7</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span> <span class="p">:</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span> <span class="err">➊</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"><span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="ne">TypeError</span><span class="p">:</span>  <span class="n">can</span> <span class="n">only</span> <span class="n">assign</span> <span class="n">an</span> <span class="n">iterable</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="32-对序列使用和">3.2 对序列使用+和*</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">board</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;_&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">board</span>
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">weird_board</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;_&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">weird_board</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">weird_board</span>
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">]]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="33-序列的增量赋值">3.3 序列的增量赋值</h3>
<h4 id="增量的实现">增量的实现</h4>
<p>seq+=a:</p>
<ul>
<li>实现:
<ul>
<li>如果seq实现了 __iadd__(就地加法)， 调用此方法</li>
<li>未实现，表达式相当于 seq = seq + a，调用seq.__add__(a) 返回一个新对象
并赋值给seq</li>
</ul>
</li>
<li>可变序列: 一般都实现了  __iadd__ 方法，因此 += 是就地加法</li>
<li>不可变序列: 不支持这个操作，使用__add__方法返回一个新对象</li>
</ul>
<h4 id="性能问题">性能问题</h4>
<ol>
<li>对不可变序列进行重复拼接操作的话，效率会很低，因为每次都有一个新对象，而解释器
需要把原来对象中的元素先复制到新的对象里，然后再追加新的元素</li>
<li>str 是一个例外，因为对字符串做 += 实在是太普遍了，所以 CPython 对它做了优化;<br>
为 str 初始化内存的时候，程序会为它留出额外的可扩展空间，因此进行增量操作的时候，
并不会涉及复制原有字符串到新位置这类操作</li>
</ol>
<h4 id="关于的谜题">关于+=的谜题</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"><span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="ne">TypeError</span><span class="p">:</span>  <span class="s1">&#39;tuple&#39;</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">item</span> <span class="n">assignment</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dis</span><span class="o">.</span><span class="n">dis</span><span class="p">(</span><span class="s1">&#39;s[a] += b&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mi">0</span> <span class="n">LOAD_NAME</span> <span class="mi">0</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">LOAD_NAME</span> <span class="mi">1</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">6</span> <span class="n">DUP_TOP_TWO</span>
</span></span><span class="line"><span class="cl"><span class="mi">7</span> <span class="n">BINARY_SUBSCR</span> <span class="err">➊</span>  <span class="c1"># 将 s[a] 的值存入 TOS（ Top Of Stack，栈的顶端）</span>
</span></span><span class="line"><span class="cl"><span class="mi">8</span> <span class="n">LOAD_NAME</span> <span class="mi">2</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">11</span> <span class="n">INPLACE_ADD</span> <span class="err">➋</span>  <span class="c1"># 计算 TOS += b。这一步能够完成，是因为 TOS 指向的是一个可变对象</span>
</span></span><span class="line"><span class="cl"><span class="mi">12</span> <span class="n">ROT_THREE</span>
</span></span><span class="line"><span class="cl"><span class="mi">13</span> <span class="n">STORE_SUBSCR</span> <span class="err">➌</span> <span class="c1"># s[a] = TOS 赋值。这一步失败，是因为 s 是不可变的元组</span>
</span></span><span class="line"><span class="cl"><span class="mi">14</span> <span class="n">LOAD_CONST</span> <span class="mi">0</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">17</span> <span class="n">RETURN_VALUE</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意:</p>
<ul>
<li>不要把可变对象放在元组里面</li>
<li>增量赋值不是一个原子操作</li>
<li>写成 t[2].extend([50, 60]) 就能避免这个异常</li>
</ul>
<h3 id="34-listsort方法和-sorted函数">3.4 list.sort方法和 sorted函数</h3>
<ol>
<li>list.sort 方法</li>
</ol>
<ul>
<li>就地排序列表，不会把原列表复制一份，返回 None</li>
</ul>
<ol start="2">
<li>内置函数 sorted</li>
</ol>
<ul>
<li>新建一个列表作为返回值</li>
<li>可以接受任何形式的可迭代对象作为参数，甚至包括不可变序列或生成器</li>
<li>不管接受的是怎样的参数，最后都会返回一个列表</li>
</ul>
<ol start="3">
<li>可选参数(二者都有)</li>
</ol>
<ul>
<li>reverse - 默认为False，升序输出;  True 降序输出</li>
<li>key - 只有一个参数的函数，用于产生排序比较的对比关键字，默认用元素自己的值来排序</li>
<li>附注: 排序算法是稳定的</li>
</ul>
<h3 id="35-用bisect来管理已排序的序列">3.5 用bisect来管理已排序的序列</h3>
<p>bisect(a, x[, lo[, hi]])</p>
<ul>
<li>a: 一个有序的序列</li>
<li>x: 待查找元素</li>
<li>lo: 默认值是 0，用于限定搜索的下线</li>
<li>hi: 默认值是序列的长度，用于限定搜索的上线</li>
<li>作用: 返回一个位置，该位置前面的 a 的值，都小于或等于 needle 的值</li>
<li>应用: 在很长的有序序列中作为 index 的替代，用来更快地查找一个元素的位置</li>
<li>bisect_right==bisect - 返回跟它相等的元素之后的位置</li>
<li>bisect_left - 返回跟它相等的元素之前的位置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">grade</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">breakpoints</span><span class="o">=</span><span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">grades</span><span class="o">=</span><span class="s1">&#39;FDCBA&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="n">i</span> <span class="o">=</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect</span><span class="p">(</span><span class="n">breakpoints</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">return</span> <span class="n">grades</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">grade</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>insort(seq, item[, lo[, hi]]):</p>
<ul>
<li>作用: 有序插入，把变量 item 插入到序列 seq 中，并能保持 seq 的升序顺序</li>
<li>insort_right == insort - 在 insect_right 返回的位置插入</li>
<li>insort_left - 在bisect_left 返回的位置插入</li>
</ul>
<h2 id="4-列表的可替换类型">4. 列表的可替换类型</h2>
<h3 id="41-数组">4.1 数组</h3>
<p>array.array:</p>
<ul>
<li>只允许存放指定类型数字，通过构造函数中的类型码参数指定</li>
<li>直接存放的数字的字节，而不是对象的引用，效率更高，内存更小</li>
<li>支持所有跟可变序列有关的操作</li>
</ul>
<p><strong>表2-2: 列表和数组的属性和方法</strong></p>
<p>|方法|列表|数组|作用|
|: &mdash;|: &mdash;|: &mdash;|: &mdash;|
|s.__add(s2)__ |•| •| s + s2 ，拼接|
|s.__iadd(s2)__ |•| •| s += s2 ，就地拼接|
|s.append(e) |• |• |在尾部添加一个元素|
|s.byteswap ||• |翻转数组内每个元素的字节序列，转换字节序|
|s.clear() |• | |删除所有元素|
|s.__contains__(e) |• |• |s 是否含有 e|
|s.copy() |• | |对列表浅复制|
|s.__copy__() | |•| 对 copy.copy 的支持|
|s.count(e) |• |• |s 中 e 出现的次数|
|s.__deepcopy__() |•| |对 copy.deepcopy 的支持|
|s.__delitem__(p) |•| •| 删除位置 p 的元素|
|s.extend(it) |• |• |将可迭代对象 it 里的元素添加到尾部|
|s.frombytes(b)  | |• |将压缩成机器值的字节序列读出来添加到尾部|
|s.fromfile(f, n) ||•| 将二进制文件 f 内含有机器值读出来添加到尾部，最多添加 n 项|
|s.fromlist(l) | |•| 将列表里的元素添加到尾部，如果其中任何一个元素导致了TypeError 异常，那么所有的添加都会取消|
|s.__getitem__(p) |• |• |s[p]，读取位置 p 的元素|
|s.index(e) |• |• |找到 e 在序列中第一次出现的位置|
|s.insert(p, e) |• |• |在位于 p 的元素之前插入元素 e|
|s.itemsize | |• |数组中每个元素的长度是几个字节|
|s.__iter__() |• |• |返回迭代器|
|s.__len__() |• |• |len(s)，序列的长度|
|s.__mul__(n) |• |•| s * n，重复拼接|
|s.__imul__(n) |• |• |s *= n ，就地重复拼接|
|s.__rmul__(n) |• |• |n * s ，反向重复拼接 *|
|s.pop([p]) |• |• |删除位于 p 的值并返回这个值， p 的默认值是最后一个元素的位置|
|s.remove(e) |• |• |删除序列里第一次出现的 e 元素|
|s.reverse() |• |• |就地调转序列中元素的位置|
|s.__reversed__() |• | |返回一个从尾部开始扫描元素的迭代器|
|s.__setitem__(p, e) |•| •| s[p] = e，把位于 p 位置的元素替换成 e|
|s.sort([key], [revers]) |•| | 就地排序序列，可选参数有 key 和 reverse|
|s.tobytes() ||• | 把所有元素的机器值用 bytes 对象的形式返回|
|s.tofile(f) | |• | 把所有元素以机器值的形式写入一个文件|
|s.tolist() | |•| 把数组转换成列表，列表里的元素类型是数字对象|
|s.typecode | |• | 返回只有一个字符的字符串，代表数组元素|</p>
<p>附注: python3.4 后数组不再支持 array.sort()方法
<code>a = array.array(a.typecode, sorted(a))</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">array</span> <span class="kn">import</span> <span class="n">array</span> <span class="err">➊</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">7</span><span class="p">)))</span> <span class="err">➋</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="err">➌</span>
</span></span><span class="line"><span class="cl"><span class="mf">0.07802343889111107</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;floats.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span> <span class="err">➎</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;floats.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">7</span><span class="p">)</span> <span class="err">➏</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="err">➐</span>
</span></span><span class="line"><span class="cl"><span class="mf">0.07802343889111107</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span> <span class="o">==</span> <span class="n">floats</span> <span class="err">➑</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="42-内存视图">4.2 内存视图</h3>
<p>memoryview:</p>
<ul>
<li>作用：允许在二进制数据结构之间共享内存,
<ul>
<li>通过其他二进制序列、打包的数组构建 memoryvideo对象时，不会复制字节序列</li>
<li>对 memoryview 对象的切片，也不会复制字节序列</li>
</ul>
</li>
<li>介绍:
<ul>
<li><a href="http://stackoverflow.com/questions/4845418/when-should-a-memoryview-be-used/" target="_blank" rel="noopener noreffer">http://stackoverflow.com/questions/4845418/when-should-a-memoryview-be-used/</a></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#memory-views" target="_blank" rel="noopener noreffer">https://docs.python.org/3/library/stdtypes.html#memory-views</a></li>
</ul>
</li>
</ul>
<p>memoryview.cast</p>
<ul>
<li>类似于类型转换，能用不同的方式读写同一块内存数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 通过改变数组中的一个字节来更新数组里某个元素的值 44 页</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">memv</span> <span class="o">=</span> <span class="nb">memoryview</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="err">➊</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">memv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">memv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="err">➋</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">memv_oct</span> <span class="o">=</span> <span class="n">memv</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="err">➌</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">memv_oct</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="err">➍</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">254</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">memv_oct</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span> <span class="err">➎</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">numbers</span>
</span></span><span class="line"><span class="cl"><span class="n">array</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="43-numpy-和-scipy">4.3 Numpy 和 Scipy</h3>
<p>Numpy:</p>
<ul>
<li>实现了多维同质数组(homogeneous array)和矩阵</li>
<li>这些数据结构不但能处理数字，还能存放其他由用户定义的记录</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;floats-10M-lines.txt&#39;</span><span class="p">)</span> <span class="err">➊</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="p">]</span> <span class="err">➋</span>
</span></span><span class="line"><span class="cl"><span class="n">array</span><span class="p">([</span> <span class="mf">3016362.69195522</span><span class="p">,</span> <span class="mf">535281.10514262</span><span class="p">,</span> <span class="mf">4566560.44373946</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span> <span class="o">*=</span> <span class="mf">.5</span> <span class="err">➌</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">array</span><span class="p">([</span> <span class="mf">1508181.34597761</span><span class="p">,</span> <span class="mf">267640.55257131</span><span class="p">,</span> <span class="mf">2283280.22186973</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">perf_counter</span> <span class="k">as</span> <span class="n">pc</span> <span class="err">➍</span> <span class="c1"># 导入精度和性能都比较高的计时器 &gt;=3.3</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">t0</span> <span class="o">=</span> <span class="n">pc</span><span class="p">();</span>  <span class="n">floats</span> <span class="o">/=</span> <span class="mi">3</span><span class="p">;</span>  <span class="n">pc</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span> <span class="err">➎</span>
</span></span><span class="line"><span class="cl"><span class="mf">0.03690556302899495</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;floats-10M&#39;</span><span class="p">,</span> <span class="n">floats</span><span class="p">)</span> <span class="err">➏</span> <span class="c1"># 把数组存入后缀为 .npy 的二进制文件</span>
</span></span><span class="line"><span class="cl"><span class="c1"># load 方法利用了一种叫作内存映射的机制，在内存不足的情况下仍然可以对数组做切片</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;floats-10M.npy&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span> <span class="err">➐</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span> <span class="o">*=</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">floats2</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="p">]</span> <span class="err">➑</span>
</span></span><span class="line"><span class="cl"><span class="n">memmap</span><span class="p">([</span><span class="mf">3016362.69195522</span><span class="p">,</span> <span class="mf">535281.10514262</span><span class="p">,</span> <span class="mf">4566560.44373946</span><span class="p">])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Scipy:</p>
<ul>
<li>提供了很多跟科学计算有关的算法，专为线性代数、数值积分和统计学而设计</li>
<li>Netlib: &lt;http: //www.netlib.org&gt;</li>
<li>SciPy 把基于C 和 Fortran 的工业级数学计算功能用交互式且高度抽象的 Python 包装起来</li>
</ul>
<p>扩展包:</p>
<ul>
<li>pandas:  &lt;http: //pandas.pydata.org&gt;</li>
<li>Blaze:  &lt;http: //blaze.pydata.org&gt;</li>
</ul>
<h3 id="44-队列">4.4 队列</h3>
<p>collections.deque: 双向队列</p>
<ul>
<li>优势:
<ul>
<li>线程安全，可以快速从两端添加或者删除元素</li>
<li>新建一个双向队列时，可指定队列的大小，队列满时在一端新增元素会自动删除另一端的顶端元素</li>
<li>append 和 popleft 都是原子操作</li>
<li>即 deque 可以在多线程程序中安全地当作先进先出的栈使用，无需担心资源锁的问题</li>
</ul>
</li>
<li>劣势:
<ul>
<li>从队列中间删除元素的操作会慢一些，因为它只对在头尾的操作进行了优化</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="err">➊</span> <span class="c1"># maxlen 一旦设定，不能修改</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span>
</span></span><span class="line"><span class="cl"><span class="n">deque</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="err">➋</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span>
</span></span><span class="line"><span class="cl"><span class="n">deque</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span>
</span></span><span class="line"><span class="cl"><span class="n">deque</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="err">➌</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span>
</span></span><span class="line"><span class="cl"><span class="n">deque</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">])</span> <span class="err">➍</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span>
</span></span><span class="line"><span class="cl"><span class="n">deque</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span><span class="o">.</span><span class="n">extendleft</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">])</span> <span class="err">➎</span> <span class="c1"># 逐个添加到双向队列的左边</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">dq</span>
</span></span><span class="line"><span class="cl"><span class="n">deque</span><span class="p">([</span><span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>表2-3: 列表和双向队列的方法</p>
<p>|方法|列表|双向队列|作用|
|: &mdash;|: &mdash;|: &mdash;|: &mdash;|
|s.__add__(s2) |•| |s + s2，拼接|
|s.__iadd__(s2) |• |•| s += s2，就地拼接|
|s.append(e) |•| • |添加一个元素到最右侧（到最后一个元素之后）|
|s.appendleft(e) | |• |添加一个元素到最左侧（到第一个元素之前）|
|s.clear() |•| •| 删除所有元素|
|s.__contains__(e) |•| |s 是否含有 e|
|s.copy() |•| |对列表浅复制|
|s.__copy__() | |•|对 copy.copy（浅复制）的支持|
|s.count(e) |•| •| s 中 e 出现的次数|
|s.__delitem__(p) |• |• |把位置 p 的元素移除|
|s.extend(i) |• |• |将可迭代对象 i 中的元素添加到尾部|
|s.extendleft(i)  ||•|将可迭代对象 i 中的元素添加到头部|
|s.__getitem__(p) |• |• |s[p]，读取位置 p 的元素|
|s.index(e) |• | |找到 e 在序列中第一次出现的位置|
|s.insert(p, e) |• | |在位于 p 的元素之前插入元素 e|
|s.__iter__() |• |•| 返回迭代器|
|s.__len__() |• |•| len(s)，序列的长度|
|s.__mul__(n) |•| |s * n，重复拼接|
|s.__imul__(n) |•| |s *= n，就地重复拼接|
|s.__rmul__(n) |•| |n * s，反向重复拼接 *|
|s.pop() |• |• |移除最后一个元素并返回它的值 #|
|s.popleft() ||•| 移除第一个元素并返回它的值|
|s.remove(e) |• |• |移除序列里第一次出现的 e 元素|
|s.reverse() |• |• |调转序列中元素的位置|
|s.__reversed__() |• |• |返回一个从尾部开始扫描元素的迭代器|
|s.rotate(n) | |• | 把 n 个元素从队列的一端移到另一端|
|s.__setitem__(p, e) |• |• |s[p] = e，把位于 p 位置的元素替换成 e|
|s.sort([key], [revers]) |• | |就地排序序列，可选参数有 key 和 reverse|</p>
<h3 id="45-其他队列">4.5 其他队列</h3>
<p>queue:</p>
<ul>
<li>提供了同步（线程安全）类 Queue、 LifoQueue 和PriorityQueue，</li>
<li>不同的线程可以利用这些数据类型来交换信息</li>
<li>可选参数 maxsize用来限定队列的大小</li>
<li>队列满了，它就会被锁住，直到另外的线程移除了某个元素而腾出了位置</li>
<li>特性让这些类很适合用来控制活跃线程的数量</li>
</ul>
<p>multiprocessing:</p>
<ul>
<li>实现了自己的 Queue，与 queue.Queue 类似，用于进程间通信用</li>
<li>专门的 multiprocessing.JoinableQueue 类型，可以让任务管理更方便</li>
</ul>
<p>asyncio:</p>
<ul>
<li>Python 3.4 新提供的包，里面有 Queue、 LifoQueue、 PriorityQueue 和 JoinableQueue</li>
<li>受 queue 和 multiprocessing 模块影响，但是为异步编程里的任务管理提供了专门的便利</li>
</ul>
<p>heapq:</p>
<ul>
<li>heapq 没有队列类，而是提供了 heappush 和 heappop 方法</li>
<li>让用户可以把可变序列当作堆队列或者优先队列来使用</li>
</ul>
<h2 id="附注">附注</h2>
<h3 id="python-版本差异">Python 版本差异</h3>
<ol>
<li>Python3 之前，元组可以作为形参放在函数声明中，
例如 def fn(a, (b,c), d)，Python 3 不再支持这种格式</li>
</ol>
<h2 id="常用模块">常用模块</h2>
<p>bisect:</p>
<ul>
<li>url: &lt;https: //docs.python.org/3/library/bisect.html&gt;</li>
<li>介绍: 二分查找</li>
</ul>
<p>sortedcollection:</p>
<ul>
<li>url: &lt; http: //code.activestate.com/recipes/577197-sortedcollection/&gt;</li>
<li>介绍: 排序集合模块。集成了 bisect 功能，比独立的 bisect 更易用</li>
</ul>
<p>pickle:</p>
<ul>
<li>url: &lt;https: //docs.python.org/3/library/pickle.html&gt;</li>
<li>介绍: 快速序列化数字类型 eg: pickle.dump</li>
<li>附注: 可以处理几乎所有的内置数字类型，包含复数、嵌套集合，甚至用户自定义的类</li>
</ul>
<h2 id="延伸阅读">延伸阅读</h2>
<p>Python:</p>
<ul>
<li>sorted 用法: &lt;https: //docs.python.org/3/howto/sorting.html&gt;</li>
<li>*extra 句法: &lt;https: //www.python.org/dev/peps/pep-3132/&gt;</li>
<li>可迭代对象拆包:
<ul>
<li>&lt;http: //bugs.python.org/issue2292&gt;</li>
<li>&lt;https: //www.python.org/dev/peps/pep-0448/&gt;</li>
</ul>
</li>
<li>collections: &lt;https: //docs.python.org/3/library/collections.html&gt;</li>
</ul>
<p>blog:</p>
<ul>
<li>memoryview: &lt;http: //eli.thegreenplace.net/2011/11/28/less-copies-in-python-with-the-buffer-protocol-and-memoryviews/&gt;</li>
</ul>
<p>实用工具</p>
<ul>
<li>Python Tutor:
<ul>
<li>url:  &lt;http: //www.pythontutor.com&gt;</li>
<li>介绍:  对 Python 运行原理进行可视化分析的工具</li>
</ul>
</li>
<li>IPython:
<ul>
<li>url:  &lt;http: //ipython.org/notebook.html&gt;</li>
</ul>
</li>
</ul>
<p>书籍:</p>
<ul>
<li>《 Python Cookbook（第 3 版）中文版》重点放在了 Python 的语义上</li>
<li>《 Python Cookbook（第 2 版）中文版》把重点放在如何解决实际问题上</li>
</ul>
<h2 id="杂谈">杂谈</h2>
<p><strong>扁平序列和容器序列</strong></p>
<ul>
<li>容器序列可以嵌套着使用，因为容器里的引用可以针对包括自身类型在内的任何类型</li>
<li>扁平序列因为只能包含原子数据类型，比如整数、浮点数或字符，所以不
能嵌套使用</li>
</ul>
<p><strong>混合类型列表</strong></p>
<ul>
<li>我们之所以用列表来存放东西，是期待在稍后使用它的时候，其中的元素有一些通用的特性</li>
<li>元组则恰恰相反，它经常用来存放不同类型的的元素,也符合它的本质，元组就是用作存放彼此之间没有关系的数据的记录</li>
</ul>
<p><strong>Timesort</strong></p>
<ul>
<li>sorted 和 list.sort 背后的排序算法是 Timsort</li>
<li>它是一种自适应算法，会根据原始数据的顺序特点交替使用插入排序和归并排序，以达到最佳效率 &lt;https: //en.wikipedia.org/wiki/Timsort&gt;</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-03-10&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/30628257d547483ceb89c29b3683ac87ee0e5112" target="_blank" title="commit by tsong(tsong@example.com) 30628257d547483ceb89c29b3683ac87ee0e5112: python 语法和 wrapt的模块">
                                    <i class="fas fa-hashtag fa-fw"></i>3062825</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/program/python/grammar/fluent-python/02_sequence/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/02_sequence/" data-title="序列" data-hashtags="python 进阶"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/02_sequence/" data-hashtag="python 进阶"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/02_sequence/" data-title="序列"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/02_sequence/" data-title="序列"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/02_sequence/" data-title="序列" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/python-%E8%BF%9B%E9%98%B6/">python 进阶</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/linux/linux_mt/03-linux%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90%E5%92%8C%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9/%E5%B8%B8%E7%94%A8%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" class="prev" rel="prev" title="3.1 Linux 命令基础"><i class="fas fa-angle-left fa-fw"></i>3.1 Linux 命令基础</a>
            <a href="/posts/linux/linux_mt/03-linux%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90%E5%92%8C%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9/%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9/" class="next" rel="next" title="3.2 Linux 命令帮助">3.2 Linux 命令帮助<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.111.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">宋涛</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":30},"comment":{"gitalk":{"admin":["hotttao"],"clientID":"7b48df1b81d23057c798","clientSecret":"65c6f9e6ca6ae4d8105f757578b6b594e3668e61","id":"2018-01-02T22:00:00+08:00","owner":"hotttao","repo":"hotttao.github.io","title":"序列"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
