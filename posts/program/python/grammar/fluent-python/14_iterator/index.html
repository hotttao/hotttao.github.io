<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>迭代器和生成器 - LoveIt</title><meta name="Description" content="Python 迭代器和生成器"><meta property="og:title" content="迭代器和生成器" />
<meta property="og:description" content="Python 迭代器和生成器" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hotttao.github.io/posts/program/python/grammar/fluent-python/14_iterator/" /><meta property="og:image" content="https://hotttao.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-14T22:00:00+08:00" />
<meta property="article:modified_time" content="2022-03-10T13:09:11+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://hotttao.github.io/logo.png"/>

<meta name="twitter:title" content="迭代器和生成器"/>
<meta name="twitter:description" content="Python 迭代器和生成器"/>
<meta name="application-name" content="宋涛的个人博客">
<meta name="apple-mobile-web-app-title" content="宋涛的个人博客"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://hotttao.github.io/posts/program/python/grammar/fluent-python/14_iterator/" /><link rel="prev" href="https://hotttao.github.io/posts/linux/linux_mt/06-shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/%E6%95%B0%E7%BB%84/" /><link rel="next" href="https://hotttao.github.io/posts/linux/linux_mt/06-shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "迭代器和生成器",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/hotttao.github.io\/posts\/program\/python\/grammar\/fluent-python\/14_iterator\/"
        },"image": ["https:\/\/hotttao.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "python 进阶","wordcount":  6596 ,
        "url": "https:\/\/hotttao.github.io\/posts\/program\/python\/grammar\/fluent-python\/14_iterator\/","datePublished": "2018-01-14T22:00:00+08:00","dateModified": "2022-03-10T13:09:11+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/hotttao.github.io\/images\/hugo\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "宋涛"
            },"description": "Python 迭代器和生成器"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/go/"> Go </a><a class="menu-item" href="/categories/linux/"> Linux </a><a class="menu-item" href="/categories/distributed/"> 分布式 </a><a class="menu-item" href="/categories/distributed/"> 架构 </a><a class="menu-item" href="/posts/about/"> 关于 </a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="LoveIt"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>宋涛的博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/go/" title="">Go</a><a class="menu-item" href="/categories/linux/" title="">Linux</a><a class="menu-item" href="/categories/distributed/" title="">分布式</a><a class="menu-item" href="/categories/distributed/" title="">架构</a><a class="menu-item" href="/posts/about/" title="">关于</a><a class="menu-item" href="https://github.com/hotttao/" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">迭代器和生成器</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://hotttao.github.io/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>宋涛</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/python/"><i class="far fa-folder fa-fw"></i>Python</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2018-01-14">2018-01-14</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 6596 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 14 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-python-的迭代模型">1. python 的迭代模型</a>
      <ul>
        <li><a href="#11-迭代协议">1.1 迭代协议</a></li>
        <li><a href="#12-可迭代的对象与迭代器">1.2 可迭代的对象与迭代器</a></li>
        <li><a href="#13-iter-函数">1.3 iter() 函数</a></li>
        <li><a href="#14-迭代模式">1.4 迭代模式</a></li>
      </ul>
    </li>
    <li><a href="#2-生成器">2. 生成器</a>
      <ul>
        <li><a href="#22-生成器对象">2.2 生成器对象</a></li>
        <li><a href="#23-生成器与迭代器语义对比">2.3 生成器与迭代器语义对比</a></li>
        <li><a href="#22-生成器函数">2.2 生成器函数</a></li>
        <li><a href="#23-生成器表达式">2.3 生成器表达式</a></li>
      </ul>
    </li>
    <li><a href="#3-python-新特性">3. Python 新特性</a>
      <ul>
        <li><a href="#31-yield-from-句法">3.1 yield from 句法</a></li>
        <li><a href="#32-协程与迭代器">3.2 协程与迭代器</a></li>
      </ul>
    </li>
    <li><a href="#4-标准库中的生成器函数">4. 标准库中的生成器函数</a>
      <ul>
        <li><a href="#41-os-模块">4.1 os 模块</a></li>
        <li><a href="#42-用于过滤的生成器函数">4.2 用于过滤的生成器函数</a></li>
      </ul>
    </li>
    <li><a href="#43-用于映射的生成器函数">4.3 用于映射的生成器函数</a>
      <ul>
        <li><a href="#44-用于合并的生成器函数">4.4 用于合并的生成器函数</a></li>
        <li><a href="#45-扩展可迭代对象的生成器函数">4.5 扩展可迭代对象的生成器函数</a></li>
        <li><a href="#46-重新排列元素的生成器函数">4.6 重新排列元素的生成器函数</a></li>
      </ul>
    </li>
    <li><a href="#5-可迭代的归约函数">5. 可迭代的归约函数</a></li>
    <li><a href="#延伸阅读">延伸阅读</a>
      <ul>
        <li><a href="#python">Python:</a></li>
        <li><a href="#blog">blog:</a></li>
        <li><a href="#实用工具">实用工具</a></li>
        <li><a href="#书籍">书籍:</a></li>
      </ul>
    </li>
    <li><a href="#附注">附注</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>当我在自己的程序中发现用到了模式，我觉得这就表明某个地方出错了。程序的形式应该仅仅反映它所要解决的问题。代码中其他任何外加的形式都是一个信号，(至少对我来说)表明我对问题的抽象还不够深——这通常意味着自己正在手动完成的事情，本应该通过写代码来让宏的扩展自动实现 — Paul Graham</p>
<p>本章涵盖以下话题:</p>
<ul>
<li>迭代器与迭代协议</li>
<li>生成器</li>
<li>迭代器与生成器</li>
<li>迭代器模式</li>
<li>yield from 语句，生成器和协程</li>
<li>标准库中通用的生成器函数</li>
</ul>
<h2 id="1-python-的迭代模型">1. python 的迭代模型</h2>
<h3 id="11-迭代协议">1.1 迭代协议</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/fluent_python/iterator_iterator.png"
        data-srcset="/images/fluent_python/iterator_iterator.png, /images/fluent_python/iterator_iterator.png 1.5x, /images/fluent_python/iterator_iterator.png 2x"
        data-sizes="auto"
        alt="/images/fluent_python/iterator_iterator.png"
        title="collections.abc" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># abc.Iterator 类，摘自 Lib/_collections_abc.py</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Iterable</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@abstractmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">False</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">yield</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@classmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">__subclasshook__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="n">Iterable</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="s2">&#34;__iter__&#34;</span> <span class="ow">in</span> <span class="n">B</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">B</span> <span class="ow">in</span> <span class="n">C</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">NotImplemented</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Iterator</span><span class="p">(</span><span class="n">Iterable</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@abstractmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Return the next item from the iterator. When exhausted, raise StopIteration&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="ne">StopIteration</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@classmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">__subclasshook__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="n">Iterator</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nb">any</span><span class="p">(</span><span class="s2">&#34;__next__&#34;</span> <span class="ow">in</span> <span class="n">B</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">B</span> <span class="ow">in</span> <span class="n">C</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">)</span> <span class="ow">and</span>
</span></span><span class="line"><span class="cl">                <span class="nb">any</span><span class="p">(</span><span class="s2">&#34;__iter__&#34;</span> <span class="ow">in</span> <span class="n">B</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">B</span> <span class="ow">in</span> <span class="n">C</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">NotImplemented</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>迭代器</strong></p>
<ul>
<li>迭代器是这样的对象: 实现了无参数的 __next__ 方法，返回序列中的下一个元素；</li>
<li>如果没有元素了，那么抛出 StopIteration 异常</li>
</ul>
<p><strong>标准的迭代器接口</strong>:</p>
<ul>
<li>__next__: 返回下一个可用的元素，如果没有元素了，抛出 StopIteration 异常</li>
<li>__iter__: Iterator 抽象基类实现 __iter__ 方法的方式是返回实例本身，
以便在需要可迭代对象的地方可以使用迭代器</li>
</ul>
<p><strong>标准迭代器特性</strong>:</p>
<ol>
<li>因为迭代器只需 __next__ 和 __iter__ 两个方法，所以除了调用 next() 方法，
以及捕获StopIteration 异常之外，没有办法检查是否还有遗留的元素，也没办法还原</li>
<li>想再次迭代，那就要调用 iter(&hellip;)，传入之前构建迭代器的可迭代对象</li>
<li>传入迭代器本身没用，因为 Iterator.__iter__ 方法的实现方式是返回实例本身，
所以传入迭代器无法还原已经耗尽的迭代器</li>
</ol>
<h3 id="12-可迭代的对象与迭代器">1.2 可迭代的对象与迭代器</h3>
<ol>
<li>可迭代的对象:</li>
</ol>
<ul>
<li>定义: 使用 iter 内置函数可以获取迭代器的对象</li>
<li>原理:
<ul>
<li>如果对象实现了能返回迭代器的 __iter__ 方法，那么对象就是可迭代的</li>
<li>实现了 __getitem__ 方法，而且其参数是从零开始的索引，这种对象也可以迭代</li>
</ul>
</li>
</ul>
<ol start="2">
<li>二者关系:</li>
</ol>
<ul>
<li>Python 从可迭代的对象中获取迭代器</li>
<li>可迭代的对象可以迭代，但是可迭代的对象不是迭代器</li>
</ul>
<p><strong>检查对象是否可迭代</strong>:</p>
<ol>
<li>iter(x):
- 原理: 通过捕获 TypeError 异常
- 优点: iter(x) 函数会考虑到遗留的 __getitem__ 方法，而 abc.Iterable 类则不考虑
- 适用: 从 Python 3.4 开始，检查对象 x 能否迭代，最准确的方法</li>
<li>isinstance(f, <strong>abc.Iterable</strong>)
- 原理: 如果实现了 __iter__ 方法，那么就认为对象是可迭代的，
因为 abc.Iterable 类实现了 __subclasshook__ 方法
- 适用: 如果要保存对象，等以后再迭代，可以显式检查，因为这种情况可能需要尽早捕获错误</li>
</ol>
<p><strong>检查对象 x 是否为迭代器</strong>:</p>
<ul>
<li>isinstance(x, <strong>abc.Iterator</strong>)</li>
<li>得益于 Iterator.__subclasshook__ 方法，即使对象 x 所属的类不是 Iterator
类的真实子类或虚拟子类，也能这样检查</li>
</ul>
<h3 id="13-iter-函数">1.3 iter() 函数</h3>
<p>迭代器用于支持</p>
<ul>
<li>for 循环</li>
<li>构建和扩展集合类型</li>
<li>逐行遍历文本文件</li>
<li>列表推导、字典推导和集合推导</li>
<li>元组拆包</li>
<li>调用函数时，使用 * 拆包实参</li>
</ul>
<p>iter():</p>
<ul>
<li>触发: 解释器需要迭代对象 x 时，会自动调用 iter(x)，包括上述所有情形</li>
<li>文档: <a href="https://docs.python.org/3/library/functions.html#iter" target="_blank" rel="noopener noreffer">https://docs.python.org/3/library/functions.html#iter</a></li>
<li>作用:
<ol>
<li>如果对象实现了 __iter__ 方法，调用它，获取一个迭代器</li>
<li>如果没有实现，但是实现了 __getitem__ 方法 Python 会创建一个迭代器，
尝试按顺序(从索引 0 开始)获取元素</li>
<li>如果尝试失败，Python 抛出 TypeError 异常</li>
</ol>
</li>
<li>说明: 之所以对 __getitem__ 方法做特殊处理，是为了向后兼容，而未来可能不会再这么做</li>
<li>特殊用法: iter(x,y)
<ul>
<li>x: 必须是可调用的对象，用于不断调用（没有参数），产出各个值</li>
<li>y: 哨符，这是个标记值，当可调用的对象返回这个值时，触发迭代器抛出 StopIteration 异常，而不产出哨符</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">d6</span><span class="p">():</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">return</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d6_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">d6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d6_iter</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">callable_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x00000000029BE6A0</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">roll</span> <span class="ow">in</span> <span class="n">d6_iter</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="nb">print</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;mydata.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">      <span class="n">process_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="14-迭代模式">1.4 迭代模式</h3>
<p>迭代器模式可用来:</p>
<ul>
<li>访问一个聚合对象的内容而无需暴露它的内部表示</li>
<li>支持对聚合对象的多种遍历</li>
<li>为遍历不同的聚合结构提供一个统一的接口(即支持多态迭代)</li>
</ul>
<p>迭代器模式解释:</p>
<ul>
<li>为了&quot;支持多种遍历&quot;，必须能从同一个可迭代的实例中获取多个独立的迭代器，各个迭代器能维护自身的内部状态</li>
<li>可迭代的对象因此必须实现 __iter__ 方法，每次调用 iter(my_iterable) 都返回一个独立的迭代器，
但不能实现 __next__ 方法</li>
<li>迭代器应该一直可以迭代，迭代器的 __iter__ 方法应该返回自身</li>
</ul>
<h2 id="2-生成器">2. 生成器</h2>
<h3 id="22-生成器对象">2.2 生成器对象</h3>
<ul>
<li>创建: 使用含有 yield 关键字的函数，或者生成器表达式</li>
<li>类型: types.GeneratorType (生成器－迭代器对象的类型)</li>
<li>文档: <a href="https://docs.python.org/3/library/types.html#types.GeneratorType" target="_blank" rel="noopener noreffer">https://docs.python.org/3/library/types.html#types.GeneratorType</a></li>
<li>特性: 所有生成器都是迭代器，因为 GeneratorType 类型的实例实现了迭代器接口</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">RE_WORD</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">yield</span> <span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>re.finditer:</p>
<ul>
<li>作用: re.findall 的惰性版本，返回一个生成器，按需生成 re.MatchObject 实例</li>
</ul>
<h3 id="23-生成器与迭代器语义对比">2.3 生成器与迭代器语义对比</h3>
<ol>
<li>实现方式</li>
</ol>
<ul>
<li>生成器: 所有生成器都是迭代器，因为 GeneratorType 类型的实例实现了迭代器接口</li>
<li>迭代器: 可以编写不是生成器的迭代器，方法是实现经典的迭代器模式</li>
<li>eg: 从这方面看 <strong>enumerate 对象不是生成器</strong>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">types</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">e</span> <span class="o">=</span> <span class="nb">enumerate</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">GeneratorType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kc">False</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<ol start="2">
<li>接口</li>
</ol>
<ul>
<li>迭代器协议定义了两个方法: __next__ 和 __iter__</li>
<li>生成器对象实现了这两个方法，因此从这方面来看，所有生成器都是迭代器</li>
</ul>
<ol start="3">
<li>迭代器设计模式</li>
</ol>
<ul>
<li>迭代器:
<ul>
<li>用于遍历集合，从中产出元素，是从现有的数据源中读取值</li>
<li>调用 next(it) 时，迭代器不能修改从数据源中读取的值，只能原封不动地产出值</li>
<li>eg: 根据迭代器设计模式的原始定义， <strong>enumerate 函数返回的生成器不是迭代器</strong>，
因为创建的是生成器产出的元组</li>
</ul>
</li>
<li>生成器
<ul>
<li>可能无需遍历集合就能生成值</li>
<li>即便依附了集合，生成器不仅能产出集合中的元素，还可能会产出派生自元素的其他值。</li>
</ul>
</li>
<li>始终可以使用生成器这个语言结构履行迭代器的基本职责: 遍历集合，并从中产出元素</li>
<li>从概念方面来看，实现方式无关紧要，不使用 Python 生成器对象也能编写生成器
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Fibonacci</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">FibonacciGenerator</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">FibonacciGenerator</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<ol start="4">
<li>Python 社区</li>
</ol>
<ul>
<li>迭代器的完整定义: <a href="https://docs.python.org/3/glossary.html#term-iterator" target="_blank" rel="noopener noreffer">https://docs.python.org/3/glossary.html#term-iterator</a></li>
<li>生成器的完整定义: <a href="https://docs.python.org/3/glossary.html#termgenerator" target="_blank" rel="noopener noreffer">https://docs.python.org/3/glossary.html#termgenerator</a></li>
<li>在生成器的的定义中迭代器和生成器是同义词，&ldquo;生成器&quot;指代生成器函数，以及生成器函数构建的生成器对象。
因此</li>
</ul>
<h3 id="22-生成器函数">2.2 生成器函数</h3>
<ul>
<li>定义: 只要 Python 函数的定义体中有 yield 关键字，该函数就是生成器函数</li>
<li>作用: 返回一个生成器对象</li>
<li>执行过程:
<ol>
<li>生成器函数会创建一个生成器对象，包装生成器函数的定义体</li>
<li>把生成器传给 next(&hellip;)函数时，生成器函数会向前，执行函数定义体中的下一个 yield 语句，
返回产出的值，并在函数定义体的当前位置暂停</li>
<li>最终，函数的定义体返回时，外层的生成器对象会抛出 StopIteration 异常</li>
</ol>
</li>
<li>版本差异:
<ul>
<li>Python&lt;34: 生成器函数中的 return 语句有返回值，那么会报错</li>
<li>Python34: return 语句会导致 StopIteration 异常,调用方可以从异常对象中获取返回值</li>
</ul>
</li>
</ul>
<h3 id="23-生成器表达式">2.3 生成器表达式</h3>
<p>理解:</p>
<ul>
<li>可以理解为列表推导的惰性版本:</li>
<li>不会迫切地构建列表，而是返回一个生成器，按需惰性生成元素</li>
</ul>
<p>对比:</p>
<ul>
<li>生成器表达式: 是语法糖，是创建生成器的简洁句法，这样无需先定义函数再调用</li>
<li>生成器函数:
<ul>
<li>灵活得多，可以使用多个语句实现复杂的逻辑，也可以作为协程使用</li>
<li>生成器函数有名称，因此可以重用</li>
</ul>
</li>
<li>使用: 如果生成器表达式要分成多行写，倾向于定义生成器函数，以便提高可读性</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span> <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">RE_WORD</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>示例分析:</p>
<ul>
<li>这里不是生成器函数了(没有 yield)，而是使用生成器表达式构建生成器</li>
<li>最终的效果一样: 调用 __iter__ 方法会得到一个生成器对象</li>
</ul>
<h2 id="3-python-新特性">3. Python 新特性</h2>
<h3 id="31-yield-from-句法">3.1 yield from 句法</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">chain</span><span class="p">(</span><span class="o">*</span><span class="n">iterables</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">iterables</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">yield</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">chain</span><span class="p">(</span><span class="o">*</span><span class="n">iterables</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iterables</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">yield from</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>yield from 作用:</p>
<ol>
<li>语法糖: 从另一个生成器中产出值，避免使用嵌套 for 循化</li>
<li>协程: 创建通道，把内层生成器直接与外层生成器的客户端联系起来，
不仅能为客户端代码生成值，还能使用客户端代码提供的值。</li>
</ol>
<h3 id="32-协程与迭代器">3.2 协程与迭代器</h3>
<ul>
<li>生成器用于生成供迭代的数据</li>
<li>协程是数据的消费者</li>
<li>虽然在协程中会使用 yield 产出值，但协程与迭代无关，不能这两个概念混为一谈</li>
</ul>
<h2 id="4-标准库中的生成器函数">4. 标准库中的生成器函数</h2>
<h3 id="41-os-模块">4.1 os 模块</h3>
<p>os.walk:</p>
<ul>
<li><a href="https://docs.python.org/3/library/os.html#os.walk" target="_blank" rel="noopener noreffer">https://docs.python.org/3/library/os.html#os.walk</a></li>
</ul>
<h3 id="42-用于过滤的生成器函数">4.2 用于过滤的生成器函数</h3>
<p>|模块|函数|说明|
|: &mdash;|: &mdash;|: &mdash;|
|itertools|compress(it,selector_it)|并行处理两个可迭代的对象；如果selector_it中的元素是真值，产出 it 中对应的元素
|itertools|dropwhile(predicate,it)|处理 it，跳过 predicate 的计算结果为真值的元素，然后产出剩下的各个元素(不再进一步检查) &ndash; 遇到False就直接迭代到最后|
|itertools|takewhile(predicate,it)|predicate 返回真值时产出对应的元素，然后立即停止，不再继续检查 &ndash; 遇到False就会立即停止|
|(内置)|filter(predicate,it)|把 it 中的各个元素传给 predicate，如果 predicate(item) 返回真值，那么产出对应的元素；如果predicate 是 None 那么只产出真值元素|
|itertools|filterfalse(predicate,it)|与 filter 函数的作用类似，不过 predicate 的逻辑是相反的: predicate 返回假值时产出对应的元素|
|itertools|islice(it, stop) 或 islice(it,start,stop,step=1)|产出it的切片，作用类似于 s[: stop] 或 s[start: stop: step]，不过 it 可以是任何可迭代的对象，而且这个函数实现的是惰性操作|</p>
<p>predicate:</p>
<ul>
<li>布尔函数，有一个参数，会应用到输入中的每个元素上，用于判断元素是否包含在输出中</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">vowel</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="s1">&#39;aeiou&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">vowel</span><span class="p">,</span> <span class="s1">&#39;Aardvark&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">itertools</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">filterfalse</span><span class="p">(</span><span class="n">vowel</span><span class="p">,</span> <span class="s1">&#39;Aardvark&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">dropwhile</span><span class="p">(</span><span class="n">vowel</span><span class="p">,</span> <span class="s1">&#39;Aardvark&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">takewhile</span><span class="p">(</span><span class="n">vowel</span><span class="p">,</span> <span class="s1">&#39;Aardvark&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="s1">&#39;Aardvark&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="s1">&#39;Aardvark&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="s1">&#39;Aardvark&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="s1">&#39;Aardvark&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="43-用于映射的生成器函数">4.3 用于映射的生成器函数</h2>
<p>|模块|函数|说明|
|: &mdash;|: &mdash;|: &mdash;|
|itertools| accumulate(it, [func]) |产出累积的总和；如果提供了 func，那么把前两个元素传给它，然后把计算结果和下一个元素传给它，以此类推，最后产出结果
|(内置)|enumerate(iterable, start=0)|产出由两个元素组成的元组，结构是 (index, item)，其中index 从 start 开始计数， item 则从 iterable 中获取
|(内置)|map(func, it1, [it2, &hellip;, itN])|把 it 中的各个元素传给 func，产出结果；如果传入 N 个可迭代的对象，那么 func 必须能接受 N 个参数，而且要并行处理各个可迭代的对象
|itertools|starmap(func, it)|把 it 中的各个元素传给 func，产出结果；输入的可迭代对象应该产出可迭代的元素 iit，然后以 func(*iit) 这种形式调用 func
附注: 如果输入来自多个可迭代的对象，第一个可迭代的对象到头后就停止输出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">))</span> <span class="c1"># ➍</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">320</span><span class="p">,</span> <span class="mi">2240</span><span class="p">,</span> <span class="mi">13440</span><span class="p">,</span> <span class="mi">40320</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="s1">&#39;albatroz&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="c1"># ➊</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">operator</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)))</span> <span class="c1"># ➋</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="nb">enumerate</span><span class="p">(</span><span class="s1">&#39;albatroz&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span> <span class="c1"># ➎</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;ll&#39;</span><span class="p">,</span> <span class="s1">&#39;bbb&#39;</span><span class="p">,</span> <span class="s1">&#39;aaaa&#39;</span><span class="p">,</span> <span class="s1">&#39;ttttt&#39;</span><span class="p">,</span> <span class="s1">&#39;rrrrrr&#39;</span><span class="p">,</span> <span class="s1">&#39;ooooooo&#39;</span><span class="p">,</span> <span class="s1">&#39;zzzzzzzz&#39;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="44-用于合并的生成器函数">4.4 用于合并的生成器函数</h3>
<p>|模块|函数|说明|
|: &mdash;|: &mdash;|: &mdash;|
|itertools|chain(it1, &hellip;, itN)|先产出 it1 中的所有元素，然后产出 it2 中的所有元素，以此类推，无缝连接在一起|
|itertools|chain.from_iterable(it)|产出 it 生成的各个可迭代对象中的元素，一个接一个，无缝连接在一起； it 应该产出可迭代的元素，例如可迭代的对象列表
|itertools|product(it1, &hellip;,itN, repeat=1)|计算笛卡儿积: 从输入的各个可迭代对象中获取元素，合并成由 N个元素组成的元组，与嵌套的 for 循环效果一样； repeat 指明重复 N 次处理输入的各个可迭代对象|
|(内置)|zip(it1, &hellip;, itN)|并行从输入的各个可迭代对象中获取元素，产出由 N 个元素组成的元组，只要有一个可迭代的对象到头了，就默默地停止
|itertools|zip_longest(it1, &hellip;,itN, fillvalue=None)|并行从输入的各个可迭代对象中获取元素，产出由 N 个元素组成的元组，等到最长的可迭代对象到头后才停止，空缺的值使用 fillvalue 填充|</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span> <span class="c1"># ➊</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">)))</span> <span class="c1"># ➌</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> <span class="c1"># ➍</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="45-扩展可迭代对象的生成器函数">4.5 扩展可迭代对象的生成器函数</h3>
<p><strong>把各个元素扩展成多个输出元素的生成器函数</strong></p>
<p>|模块|函数|说明|
|: &mdash;|: &mdash;|: &mdash;|
|itertools|combinations(it,out_len)|把 it 产出的 out_len 个元素组合在一起，然后产出|
|itertools|combinations_with_replacement(it, out_len)|把 it 产出的 out_len 个元素组合在一起，然后产出，包含相同元素的组合|
|itertools|count(start=0, step=1)|从 start 开始不断产出数字，按 step 指定的步幅增加|
|itertools|cycle(it)|从 it 中产出各个元素，存储各个元素的副本，然后按顺序重复不断地产出各个元素|
|itertools|permutations(it,out_len=None)|把 out_len 个 it 产出的元素排列在一起，然后产出这些排列； out_len 的默认值等于 len(list(it))|
|itertools|repeat(item, [times])|重复不断地产出指定的元素，除非提供 times，指定次数|</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">.3</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span> <span class="c1"># ➍</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">cy</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span> <span class="c1"># ➎</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">cy</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;A&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">cy</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span> <span class="c1"># ➏</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span> <span class="c1"># ➒</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 组合学生成器</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c1">#  每两个元素的各种组合，顺序无关紧要</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)]</span>     
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations_with_replacement</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c1"># 包括相同元素的组合</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">permutations</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c1"># 元素的顺序有重要意义</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> <span class="c1"># 笛卡儿积</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="46-重新排列元素的生成器函数">4.6 重新排列元素的生成器函数</h3>
<p>|模块|函数|说明|
|: &mdash;|: &mdash;|: &mdash;|
|itertools|groupby(it,key=None)|产出由两个元素组成的元素，形式为 (key, group)，其中 key 是分组标准，group 是生成器，用于产出分组里的元素
|itertools|tee(it, n=2)|产出一个由 n 个生成器组成的元组，每个生成器用于单独产出输入的可迭代对象中的元素|
|(内置)|reversed(seq)|从后向前，倒序产出seq中的元素；seq必须是序列，或者是实现了 __reversed__ 特殊方法的对象</p>
<p>reversed</p>
<ul>
<li>函数从后向前产出元素，而只有序列的长度已知时才能工作</li>
<li>这个函数会按需产出各个元素，因此无需创建反转的副本</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;LLLLAAGGG&#39;</span><span class="p">))</span> <span class="c1"># ➊</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">itertools</span><span class="o">.</span><span class="n">_grouper</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x102227cc0</span><span class="o">&gt;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">itertools</span><span class="o">.</span><span class="n">_grouper</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x102227b38</span><span class="o">&gt;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">itertools</span><span class="o">.</span><span class="n">_grouper</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x102227b70</span><span class="o">&gt;</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">char</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;LLLLAAAGG&#39;</span><span class="p">):</span> <span class="c1"># ➋</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="nb">print</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">L</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">A</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,]</span>
</span></span><span class="line"><span class="cl"><span class="n">G</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;duck&#39;</span><span class="p">,</span> <span class="s1">&#39;eagle&#39;</span><span class="p">,</span> <span class="s1">&#39;rat&#39;</span><span class="p">,</span> <span class="s1">&#39;giraffe&#39;</span><span class="p">,</span> <span class="s1">&#39;bear&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="s1">&#39;bat&#39;</span><span class="p">,</span> <span class="s1">&#39;dolphin&#39;</span><span class="p">,</span> <span class="s1">&#39;shark&#39;</span><span class="p">,</span> <span class="s1">&#39;lion&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">animals</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>  <span class="c1">#  为了使用 groupby 函数，要排序输入</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">length</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">animals</span><span class="p">,</span> <span class="nb">len</span><span class="p">):</span> <span class="c1"># ➍</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="nb">print</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;rat&#39;</span><span class="p">,</span> <span class="s1">&#39;bat&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;duck&#39;</span><span class="p">,</span> <span class="s1">&#39;bear&#39;</span><span class="p">,</span> <span class="s1">&#39;lion&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;eagle&#39;</span><span class="p">,</span> <span class="s1">&#39;shark&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">7</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">&#39;giraffe&#39;</span><span class="p">,</span> <span class="s1">&#39;dolphin&#39;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">tee</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="o">&lt;</span><span class="n">itertools</span><span class="o">.</span><span class="n">_tee</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x10222abc8</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">itertools</span><span class="o">.</span><span class="n">_tee</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x10222ac08</span><span class="o">&gt;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">itertools</span><span class="o">.</span><span class="n">tee</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5-可迭代的归约函数">5. 可迭代的归约函数</h2>
<p>归约函数: 接受一个可迭代的对象，然后返回单个结果</p>
<p>|模块|函数|说明|
|: &mdash;|: &mdash;|: &mdash;|
|(内置)|all(it)|it 中的所有元素都为真值时返回 True，否则返回 False； all([]) 返回 True|
|(内置)|any(it)|只要 it 中有元素为真值就返回 True，否则返回 False； any([]) 返回 False|
|(内置)|max(it, [key=,][default=])|返回 it 中值最大的元素； key 是排序函数，与 sorted 函数中的一样；如果可迭代的对象为空，返回 default|
|(内置)|min(it, [key=,][default=])|返回 it 中值最小的元素； key 是排序函数，与 sorted 函数中的一样；如果可迭代的对象为空，返回 default|
|functools|reduce(func, it,[initial])|把前两个元素传给 func，然后把计算结果和第三个元素传给 func，以此类推，返回最后的结果；如果提供了 initial，把它当作第一个元素传入|
|(内置)|sum(it, start=0)| it 中所有元素的总和，如果提供可选的 start，会把它加上(计算浮点数的加法时，可以使用 math.fsum 函数提高精度)|</p>
<p>附注:</p>
<ul>
<li>也可以像这样调用: max(arg1, arg2, &hellip;, [key=?])， 此时返回参数中的最大值。</li>
<li>也可以像这样调用: min(arg1, arg2, &hellip;, [key=?])， 此时返回参数中的最小值。</li>
<li>sorted:
<ul>
<li>接受一个可迭代的对象</li>
<li>构建并返回真正的列表。</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">any</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">8</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="延伸阅读">延伸阅读</h2>
<h3 id="python">Python:</h3>
<p>Yield expressions</p>
<ul>
<li>从技术层面深入说明了生成器 <a href="https://docs.python.org/3/reference/expressions.html#yieldexpr" target="_blank" rel="noopener noreffer">https://docs.python.org/3/reference/expressions.html#yieldexpr</a></li>
<li>定义生成器函数的 PEP 是 &quot; PEP 255—Simple Generators&rdquo; <a href="https://www.python.org/dev/peps/pep-0255/" target="_blank" rel="noopener noreffer">https://www.python.org/dev/peps/pep-0255/</a></li>
</ul>
<p>itertools</p>
<ul>
<li><a href="https://docs.python.org/3/library/itertools.html" target="_blank" rel="noopener noreffer">https://docs.python.org/3/library/itertools.html</a></li>
<li>&ldquo;Itertools Recipes&rdquo; <a href="https://docs.python.org/3/library/itertools.html#itertools-recipes" target="_blank" rel="noopener noreffer">https://docs.python.org/3/library/itertools.html#itertools-recipes</a>
说明如何使用 itertools 模块中的现有函数实现额外的高性能函数</li>
</ul>
<h3 id="blog">blog:</h3>
<p>协程:</p>
<ul>
<li>作者: David Beazley（可能是 Python 社区中在协程方面最多产的作者和演讲者）</li>
<li>URL: <a href="http://www.dabeaz.com/coroutines/" target="_blank" rel="noopener noreffer">http://www.dabeaz.com/coroutines/</a></li>
</ul>
<p>yeild from</p>
<ul>
<li>&quot; What’s New in Python 3.3&quot;通过示例说明了 yield from 句法</li>
<li>参见&quot; PEP 380: Syntax for Delegating to a Subgenerator&quot;， <a href="https://docs.python.org/3/whatsnew/3.3.html#pep-380-syntax-for-delegating-to-a-subgenerator" target="_blank" rel="noopener noreffer">https://docs.python.org/3/whatsnew/3.3.html#pep-380-syntax-for-delegating-to-a-subgenerator</a>）</li>
</ul>
<h3 id="实用工具">实用工具</h3>
<p>文档数据库</p>
<ul>
<li>&quot; From ISIS to CouchDB: Databases and Data Models for Bibliographic Records&quot;
<a href="http://journal.code4lib.org/articles/4893" target="_blank" rel="noopener noreffer">http://journal.code4lib.org/articles/4893</a></li>
</ul>
<h3 id="书籍">书籍:</h3>
<p>《 Python Cookbook（第 3 版）中文版》</p>
<ul>
<li>第 4章有 16 个诀窍涵盖了这个话题</li>
</ul>
<h2 id="附注">附注</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">do_yield</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">yield</span> <span class="n">n</span>
</span></span><span class="line"><span class="cl">  <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="n">do_yield</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="nf">do_yield</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">yield</span> <span class="n">n</span>
</span></span><span class="line"><span class="cl">  <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="n">yeild</span> <span class="kn">from</span> <span class="nn">do_yield</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>示例分析:</p>
<ul>
<li>如果调用示例 14-24 中的 f()，会得到一个无限循环，而不是生成器，因为 yield
关键字只能把最近的外层函数变成生成器函数。</li>
<li>虽然生成器函数看起来像函数，可是我们不能通过简单的函数调用把职责委托给另一个生成器函数</li>
<li>Python 新引入的 yield from 句法允许生成器或协程把工作委托给第三方完成</li>
<li>沿用 def 声明生成器犯了可用性方面的错误，而 Python 2.5 引入的协程（也写成包含
yield 关键字的函数）把这个问题进一步恶化了。</li>
<li>尽管有一些相同之处，但是生成器和协程基本上是两个不同的概念</li>
<li>协程经常会用到特殊的装饰器，这样就能与其他的函数区分开。可是，生成器函数不常使用装饰器，因此我们不
得不扫描函数的定义体，看有没有 yield 关键字，以此判断它究竟是普通的函数，还是完全不同的洪水猛兽</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-03-10&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/30628257d547483ceb89c29b3683ac87ee0e5112" target="_blank" title="commit by tsong(tsong@example.com) 30628257d547483ceb89c29b3683ac87ee0e5112: python 语法和 wrapt的模块">
                                    <i class="fas fa-hashtag fa-fw"></i>3062825</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/program/python/grammar/fluent-python/14_iterator/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/14_iterator/" data-title="迭代器和生成器" data-hashtags="python 进阶"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/14_iterator/" data-hashtag="python 进阶"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/14_iterator/" data-title="迭代器和生成器"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/14_iterator/" data-title="迭代器和生成器"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://hotttao.github.io/posts/program/python/grammar/fluent-python/14_iterator/" data-title="迭代器和生成器" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/python-%E8%BF%9B%E9%98%B6/">python 进阶</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/linux/linux_mt/06-shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/%E6%95%B0%E7%BB%84/" class="prev" rel="prev" title="6.4 数组与算数运算"><i class="fas fa-angle-left fa-fw"></i>6.4 数组与算数运算</a>
            <a href="/posts/linux/linux_mt/06-shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/" class="next" rel="next" title="6.5 字符串处理">6.5 字符串处理<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.120.2">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">宋涛</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":30},"comment":{"gitalk":{"admin":["hotttao"],"clientID":"7b48df1b81d23057c798","clientSecret":"65c6f9e6ca6ae4d8105f757578b6b594e3668e61","id":"2018-01-14T22:00:00+08:00","owner":"hotttao","repo":"hotttao.github.io","title":"迭代器和生成器"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
