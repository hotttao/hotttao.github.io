<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>17.5 httpd2.2 的基础配置 | 宋涛的博客</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="马哥 Linux" />
    
    <meta name="description" content="httpd2.2 的基础配置">
<meta name="keywords" content="马哥 Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="17.5 httpd2.2 的基础配置">
<meta property="og:url" content="http://yoursite.com/2018/03/15/linux_mt/20-web-apache/httpd2.2基础配置/index.html">
<meta property="og:site_name" content="宋涛的博客">
<meta property="og:description" content="httpd2.2 的基础配置">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/linux_mt/linux_mt1.jpg">
<meta property="og:updated_time" content="2020-05-25T12:56:08.459Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="17.5 httpd2.2 的基础配置">
<meta name="twitter:description" content="httpd2.2 的基础配置">
<meta name="twitter:image" content="http://yoursite.com/images/linux_mt/linux_mt1.jpg">
    

    
        <link rel="alternate" href="/" title="宋涛的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">漫步在大陆上的海龟</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Go/">Go</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Python/">Python</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/分布式/">分布式</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/存储/">存储</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/运维/">运维</a></li></ul>
                                    
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/运维/">运维</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-linux_mt/20-web-apache/httpd2.2基础配置" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        17.5 httpd2.2 的基础配置
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2018/03/15/linux_mt/20-web-apache/httpd2.2基础配置/" class="article-date">
            <time datetime="2018-03-14T16:00:00.000Z" itemprop="datePublished">2018-03-15</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/马哥-Linux/">马哥 Linux<span class="tag-count">135</span></a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>httpd2.2 的基础配置</p>
<p><img src="/images/linux_mt/linux_mt1.jpg" alt="linux-mt"><br><a id="more"></a></p>
<p>本节我们来讲解 httpd2.2 的基础配置</p>
<h2 id="1-httpd-2-2-配置文件格式"><a href="#1-httpd-2-2-配置文件格式" class="headerlink" title="1. httpd-2.2 配置文件格式"></a>1. httpd-2.2 配置文件格式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ grep &quot;^###&quot; /etc/httpd/conf/httpd.conf</div><div class="line">### Section 1: Global Environment</div><div class="line">### Section 2: &apos;Main&apos; server configuration</div><div class="line">### Section 3: Virtual Hosts</div></pre></td></tr></table></figure>
<p>httpd2.2 的主配置文件是：<code>/etc/httpd/conf/httpd.conf</code>，其分成三个部分:</p>
<ul>
<li>Section 1: Global Environment  全局配置</li>
<li>Section 2: ‘Main’ server configuration 主服务配置段</li>
<li>Section 3: Virtual Hosts 虚拟主机配置段</li>
</ul>
<p>下面是一段配置示例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ServerRoot &quot;/etc/httpd&quot;</div><div class="line">Include conf.modules.d/*.conf</div><div class="line"></div><div class="line">&lt;Directory /&gt;             # 目录访问权限配置</div><div class="line">    AllowOverride none</div><div class="line">    Require all denied</div><div class="line">&lt;/Directory&gt;</div><div class="line"></div><div class="line">&lt;IfModule dir_module&gt;    # IfModule 判断动态模块是否存在，动态配置</div><div class="line">    DirectoryIndex index.html</div><div class="line">&lt;/IfModule&gt;</div></pre></td></tr></table></figure></p>
<p>配置的格式为 <code>directive  value</code></p>
<ul>
<li>directive：配置参数，不区分字符大小写；</li>
<li>value：参数值，为路径时，是否区分字符大小写，取决于文件系统；</li>
</ul>
<h2 id="2-httpd-2-2-常用配置"><a href="#2-httpd-2-2-常用配置" class="headerlink" title="2. httpd-2.2 常用配置"></a>2. httpd-2.2 常用配置</h2><p>httpd2.2 的官方文档: <a href="http://httpd.apache.org/docs/2.2/" target="_blank" rel="external">http://httpd.apache.org/docs/2.2/</a></p>
<h3 id="2-1-修改监听的IP和PORT"><a href="#2-1-修改监听的IP和PORT" class="headerlink" title="2.1 修改监听的IP和PORT"></a>2.1 修改监听的IP和PORT</h3><p><code>Listen  [IP:]PORT</code></p>
<ol>
<li>省略IP表示监听本地所有地址</li>
<li>Listen指令可重复出现多次，以监听多个IP地址和端口；<ul>
<li><code>Listen  80</code></li>
<li><code>Listen  8080</code></li>
</ul>
</li>
<li>修改监听socket(不是新增)，需要重启服务进程才能生效；</li>
</ol>
<h3 id="2-2-持久连续"><a href="#2-2-持久连续" class="headerlink" title="2.2 持久连续"></a>2.2 持久连续</h3><p>Persistent Connection<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 持久链接配置相关参数</div><div class="line">KeepAlive  On|Off         # 是否启用持久连接</div><div class="line">KeepAliveTimeout  15      # 持久链接最大连接时长</div><div class="line">MaxKeepAliveRequests  100 # 持久链接最多处理的请求数</div></pre></td></tr></table></figure></p>
<p>前面我们说过 tcp 连接有长连接短连接之分</p>
<ul>
<li>长连接能降低请求响应的时间</li>
<li>但对并发访问量较大的服务器，长连接机制会使得后续某些请求无法得到正常 响应；<br>因此通常的折衷策略是，采用长连接，但是使用较短的持久连接时长，以及较少的请求数量。</li>
</ul>
<p>http 与长连接相关的参数包括</p>
<ol>
<li><code>KeepAlive On|Off</code>: 是否启用持久连接</li>
<li><code>KeepAliveTimeout time</code>: 持久链接最大连接时长,httpd-2.4 支持毫秒级持久时间</li>
<li><code>MaxKeepAliveRequests</code>: 单个持久连接能够处理的对大请求数</li>
</ol>
<h3 id="2-3-MPM"><a href="#2-3-MPM" class="headerlink" title="2.3 MPM"></a>2.3 MPM</h3><p>MPM(Multipath Process Module) 多道处理模块,用来确定 httpd 响应用户请求的模型。<br>对于 httpd2.2:</p>
<ul>
<li>不支持同时编译多个MPM模块，所以只能编译选定要使用的那个。</li>
<li>CentOS 6的rpm包为此专门提供了三个应用程序文件，<code>httpd(prefork)</code>, <code>httpd.worker</code>, <code>httpd.event</code>，分别用于实现对不同的MPM机制的支持。</li>
<li>默认使用的为<code>/usr/sbin/httpd</code>，其为prefork的MPM模块</li>
</ul>
<p>查看 httpd2.2 当前使用的 MPM 以及修改默认的 MPM 的方式如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># 1. 查看当前使用MPM模式</div><div class="line">ps aux|grep httpd</div><div class="line"></div><div class="line"># 2. 查看httpd程序的模块列表：</div><div class="line">## 查看静态编译的模块(先确定使用的MPM):</div><div class="line">httpd  -l</div><div class="line">httpd.event -l</div><div class="line">httpd.worker -l</div><div class="line"></div><div class="line">## 查看静态编译及动态编译的模块:</div><div class="line">httpd  -M</div><div class="line">httpd.envent -M</div><div class="line">httpd.woker -M</div><div class="line"></div><div class="line"># 3. 更改 service 使用的 httpd 程序</div><div class="line">vim /etc/sysconfig/httpd        </div><div class="line">HTTPD=/usr/sbin/httpd.&#123;worker,event&#125;  # 修改 HTTPD 参数，重启服务进程方可生效</div></pre></td></tr></table></figure>
<h4 id="prefork的配置参数"><a href="#prefork的配置参数" class="headerlink" title="prefork的配置参数"></a>prefork的配置参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># /etc/httpd/conf/httpd.conf</div><div class="line">&lt;IfModule prefork.c&gt;</div><div class="line">  StartServers    8　　    ＃ 服务启动时，启动的进程数</div><div class="line">  MinSpareServers 5        # 最小空闲进程数</div><div class="line">  MaxSpareServers  20      # 最大空闲进程数</div><div class="line">  ServerLimit  256          # 为 MaxClients 提供的最大进程数，通常等于 MaxClients</div><div class="line">  MaxClients    256         # 并发的最大客户端请求数</div><div class="line">  MaxRequestsPerChild  4000 # 一个进程能处理的请求总数，超过会自动销毁</div><div class="line">&lt;/IfModule&gt;</div></pre></td></tr></table></figure>
<h4 id="worker的配置参数"><a href="#worker的配置参数" class="headerlink" title="worker的配置参数"></a>worker的配置参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># /etc/httpd/conf/httpd.conf</div><div class="line">&lt;IfModule worker.c&gt;</div><div class="line">StartServers    4      # 服务器启动时启动的进程数</div><div class="line">MaxClients      300   </div><div class="line">MinSpareThreads  25    # 最小的空闲线程数</div><div class="line">MaxSpareThreads  75    # 最大的空闲线程数</div><div class="line">ThreadsPerChild  25    # 每个进程启动的线程数</div><div class="line">MaxRequestsPerChild  0 # 每个线成能处理的请求总数，超过会自动销毁，0 表示无限</div><div class="line">&lt;/IfModule&gt;</div></pre></td></tr></table></figure>
<h4 id="event-的配置"><a href="#event-的配置" class="headerlink" title="event 的配置"></a>event 的配置</h4><p>event 在 httpd2.2 中尚且属于测试阶段，不建议在线上使用</p>
<h3 id="2-4-DSO"><a href="#2-4-DSO" class="headerlink" title="2.4 DSO"></a>2.4 DSO</h3><p><code>LoadModule  mod_name  mod_path</code></p>
<ul>
<li>作用: 实现模块加载:  </li>
<li>参数:<ul>
<li><code>mod_name</code>: 模块的名称</li>
<li><code>mod_path</code>: 模块的路经，可使用相对路径：相对于<code>ServerRoot</code></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">LoadModule alias_module modules/mod_alias.so</div><div class="line">#  modules/mod_alias.so -- &gt; /etc/httpd/modules/mod_alias.so</div><div class="line"># /etc/httpd/modules    ---&gt; /usr/lib64/httpd/modules</div></pre></td></tr></table></figure>
<h3 id="2-5-‘Main’-server配置"><a href="#2-5-‘Main’-server配置" class="headerlink" title="2.5 ‘Main’ server配置"></a>2.5 ‘Main’ server配置</h3><p><code>DocumentRoot Dir</code></p>
<ul>
<li>作用: 文档路径映射,DoucmentRoot指向的路径为URL路径的起始位置, 其相当于站点URL的根路径；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">DocumentRoot &quot;/var/www/html&quot;</div><div class="line">(FileSystem) /var/www/html/index.html    --&gt;  (URL)/index.html</div></pre></td></tr></table></figure>
<p><code>ServerName www.example.com:80</code></p>
<ul>
<li>作用: 配置主服务的标识</li>
<li>默认:<ul>
<li>未设置此参数时， httpd 会自动反解监听的 IP 地址，反解失败，则默认为当前主机的主机名</li>
<li>可以随意设置，如果没有注册 DNS 域名，也可以设置成 ip 地址</li>
</ul>
</li>
</ul>
<h3 id="2-6-定义站点主页面"><a href="#2-6-定义站点主页面" class="headerlink" title="2.6 定义站点主页面"></a>2.6 定义站点主页面</h3><p><code>DirectoryIndex  index.html  index.html.var</code></p>
<ul>
<li>作用: 配置当用户访问 URL 的指向是一个目录时，httpd 应该默认响应的内容</li>
<li>附注: 找不到主页面时，httpd 通过 <code>/etc/httpd/conf.d/weibocom.conf</code> 提供了一个默认主页面</li>
</ul>
<h3 id="2-7-定义路径别名"><a href="#2-7-定义路径别名" class="headerlink" title="2.7 定义路径别名"></a>2.7 定义路径别名</h3><p><code>Alias  /URL/  &quot;/PATH/TO/SOMEDIR/&quot;</code></p>
<ul>
<li>作用: 定义 url 访问资源的路经别名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">DocumentRoot &quot;/www/htdocs&quot;</div><div class="line">http://www.magedu.com/download/a.index --&gt; /www/htdocs/download/a.index</div><div class="line"></div><div class="line">Alias  /download/  &quot;/rpms/pub/&quot;</div><div class="line">http://www.magedu.com/download/a.index  --&gt; /rpms/pub/a.index</div><div class="line"></div><div class="line">http://www.magedu.com/images/logo.png  ---&gt; /www/htdocs/images/logo.png</div></pre></td></tr></table></figure>
<h3 id="2-8-设定默认字符集"><a href="#2-8-设定默认字符集" class="headerlink" title="2.8 设定默认字符集"></a>2.8 设定默认字符集</h3><p><code>AddDefaultCharset  UTF-8</code></p>
<ul>
<li>作用: 设定默认字符集</li>
</ul>
<h3 id="2-9-日志设定"><a href="#2-9-日志设定" class="headerlink" title="2.9 日志设定"></a>2.9 日志设定</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 错误日志：</div><div class="line">ErrorLog  logs/error_log     # 错误日志的路经</div><div class="line">LogLevel  warn               # 日志的级别</div><div class="line"></div><div class="line"># 定义日志格式</div><div class="line">LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot;&quot; combined</div><div class="line">LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; common</div><div class="line"></div><div class="line">CustomLog  logs/access_log  combined   # 访问日志的路经，combined 为 LogFormat 名</div></pre></td></tr></table></figure>
<p><code>LogLevel level</code></p>
<ul>
<li>作用: 日志级别</li>
<li>可选值：debug, info, notice, warn, error, crit, alert, emerg</li>
</ul>
<h4 id="LogFormat-格式化字符串"><a href="#LogFormat-格式化字符串" class="headerlink" title="LogFormat 格式化字符串"></a>LogFormat 格式化字符串</h4><p><a href="http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#formats" target="_blank" rel="external">http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#formats</a></p>
<table>
<thead>
<tr>
<th style="text-align:left">标志宏</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%h</td>
<td style="text-align:left">客户端IP地址</td>
</tr>
<tr>
<td style="text-align:left">%l</td>
<td style="text-align:left">Remote User, 通常为一个减号（“-”）</td>
</tr>
<tr>
<td style="text-align:left">%u</td>
<td style="text-align:left">Remote user (from auth; may be bogus if return status (%s) is 401)；非为登录访问时，其为一个减号</td>
</tr>
<tr>
<td style="text-align:left">%t</td>
<td style="text-align:left">服务器收到请求时的时间</td>
</tr>
<tr>
<td style="text-align:left">%r</td>
<td style="text-align:left">First line of request，即表示请求报文的首行；记录了此次请求的“方法”，“URL”以及协议版本</td>
</tr>
<tr>
<td style="text-align:left">%&gt;s</td>
<td style="text-align:left">响应状态码</td>
</tr>
<tr>
<td style="text-align:left">%b</td>
<td style="text-align:left">响应报文的大小，单位是字节；不包括响应报文的http首部</td>
</tr>
<tr>
<td style="text-align:left">%{Referer}i</td>
<td style="text-align:left">请求报文中首部“referer”的值；即从哪个页面中的超链接跳转至当前页面的</td>
</tr>
<tr>
<td style="text-align:left">%{User-Agent}i</td>
<td style="text-align:left">请求报文中首部“User-Agent”的值；即发出请求的应用程序</td>
</tr>
</tbody>
</table>
<h2 id="3-httpd2-2-访问控制"><a href="#3-httpd2-2-访问控制" class="headerlink" title="3. httpd2.2 访问控制"></a>3. httpd2.2 访问控制</h2><h3 id="3-1-访问控制机制"><a href="#3-1-访问控制机制" class="headerlink" title="3.1 访问控制机制"></a>3.1 访问控制机制</h3><p>访问控制值的时允许哪些用户访问哪些站点资源</p>
<ol>
<li>用户可以通过<code>来源地址</code> 或 <code>账号</code> 指定，</li>
<li>资源可以通过<code>文件系统路径</code> 或 <code>URL</code> 指定</li>
</ol>
<p>因此 httpd 的访问控制机制有如下四中实现方式:</p>
<ol>
<li>基于来源地址，通过文件路径实现访问控制机制</li>
<li>基于来源地址，通过 url 实现访问控制机制</li>
<li>基于账号，过文件路径实现访问控制机制</li>
<li>基于账号，通过 url 实现访问控制机制</li>
</ol>
<p>httpd2.2 与 httpd2.4 最大的不同之处在于，httpd2.4 如果未授权，默认是所有用户都无法访问的，而 http2.2 则默认允许访问。因此当在 httpd2.4 中添加 Alias 路经别名，或更改 DocumentRoot 时，必需配置相应的访问权限。</p>
<h4 id="资源界定"><a href="#资源界定" class="headerlink" title="资源界定"></a>资源界定</h4><p>资源的文件系统路径由如下几种配置方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;Directory  &quot;&quot;&gt;   # 目录</div><div class="line">...</div><div class="line">&lt;/Directory&gt;</div><div class="line"></div><div class="line">&lt;File  &quot;&quot;&gt;        # 单文件</div><div class="line">...</div><div class="line">&lt;/File&gt;</div><div class="line"></div><div class="line">&lt;FileMatch  &quot;PATTERN&quot;&gt;  # 文件路经匹配的正则表达式</div><div class="line">...</div><div class="line">&lt;/FileMatch&gt;</div></pre></td></tr></table></figure></p>
<p>URL 有如下两种配置方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;Location  &quot;&quot;&gt;   # URL 地址</div><div class="line">...</div><div class="line">&lt;/Location&gt;</div><div class="line"></div><div class="line">&lt;LocationMatch &quot;&quot;&gt; # URL 匹配的正则表达式</div><div class="line">...</div><div class="line">&lt;/LocationMatch&gt;</div></pre></td></tr></table></figure></p>
<h3 id="3-1-Directory-中“基于源地址”实现访问控制："><a href="#3-1-Directory-中“基于源地址”实现访问控制：" class="headerlink" title="3.1 Directory 中“基于源地址”实现访问控制："></a>3.1 Directory 中“基于源地址”实现访问控制：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Directory  &quot;/var/www/html&quot;&gt;</div><div class="line">Options All，None，Indexes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews</div><div class="line">AllowOverride None</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure>
<p>http2.2 访问控制参数如下:</p>
<ol>
<li><code>Options</code><ul>
<li>作用: 后跟1个或多个以空白字符分隔的“选项”列表；</li>
<li>选项:<ul>
<li><code>Indexes</code>：指明的URL路径下不存在与定义的主页面资源相符的资源文件时，返回索引列表给用户； – 危险，生产环境不能启用</li>
<li><code>FollowSymLinks</code>：允许跟踪符号链接文件所指向的源文件；– 危险</li>
<li><code>None</code>：关闭所有选项</li>
<li><code>All</code>：启动全部选项</li>
</ul>
</li>
<li>说明: 选项前加上<code>-</code>，表示关闭，但是只能要么都有<code>-</code>，要么都没有</li>
</ul>
</li>
<li><code>AllowOverride</code><ul>
<li>作用:<ul>
<li>与访问控制相关的指令可以放在.htaccess文件，每个目录下都可以有一个；用于自定义每个目录的访问权限</li>
<li>启用 <code>.htaccess</code> 会对性能产生重大影响，不建议启用</li>
<li><code>Directory</code> 中的配置相当于全局配置</li>
</ul>
</li>
<li>选项:<ul>
<li><code>All</code>: Directory 中的全局配置，覆盖 htaccess 中的配置</li>
<li><code>None</code>：Directory 中的全局配置，不会覆盖 htaccess 中的配置</li>
</ul>
</li>
</ul>
</li>
<li><code>order</code>和<code>allow</code>、<code>deny</code><ul>
<li>作用: 基于来源地址的访问控制</li>
<li><code>order</code>：定义生效次序；写在后面的表示默认法则；<ul>
<li><code>Order allow，deny</code>: 白名单</li>
<li><code>Order deny，allow</code>: 黑名单</li>
</ul>
</li>
<li><code>Allow from IP</code>, <code>Deny from IP</code>: 注明来源IP<ul>
<li>来源地址：<ul>
<li>IP</li>
<li>NetAddr: 子网<ul>
<li>172.16</li>
<li>172.16.0.0</li>
<li>172.16.0.0/16</li>
<li>172.16.0.0/255.255.0.0</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;Directory &quot;/www/htdoc&quot;&gt;</div><div class="line">    AllowOverride None</div><div class="line">    Options Indexes FollowSymLinks</div><div class="line">    Order allow,deny</div><div class="line">    Allow from 192.168.1</div><div class="line">    # Deny from 192.168.1.104</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure>
<h3 id="3-2-基于用户的访问控制"><a href="#3-2-基于用户的访问控制" class="headerlink" title="3.2 基于用户的访问控制"></a>3.2 基于用户的访问控制</h3><p>WWW-Authenticate（认证质询）是 http 协议早期提供的用户认证机制。当用户请求受控资源时，服务器响应 401，拒绝客户端请求，并说明要求客户端提供账号和密码；浏览器接收到响应时，会弹出认证窗口，客户端用户填入账号和密码后再次发送请求报文；认证通过时，则服务器发送响应的资源。需要用户认证后方能访问的路径；应该通过名称对其进行标识，以便于告知用户认证的原因。</p>
<p>WWW-Authenticate 认证方式有两种：</p>
<ul>
<li>basic认证：会明文传输帐号和密码，不安全</li>
<li>digest认证：</li>
</ul>
<p>用户的账号和密码可存储在文本文件，SQL数据库，ldap目录存储。但是通常都是存在本地的文本文件中，因为 httpd 访问 mysql 的模块是非标准模块，需要单独编译安装。现在 web 站点基本都是通过表单进行身份认证，认证质询因为安全性和便利性的问题，其实很少使用。</p>
<h4 id="basic认证配置示例"><a href="#basic认证配置示例" class="headerlink" title="basic认证配置示例"></a>basic认证配置示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># 1.  定义安全域</div><div class="line">&lt;Directory &quot;&quot;&gt;</div><div class="line">    Options None</div><div class="line">    AllowOverride None</div><div class="line">    AuthType Basic</div><div class="line">    AuthName &quot;String“                                # 认证提时字符串</div><div class="line">    AuthUserFile  &quot;/PATH/TO/HTTPD_USER_PASSWD_FILE&quot;  # 帐号密码文件路经</div><div class="line">    Require  user  username1  username2 ...          # 允许访问的用户  </div><div class="line">    # Require  valid-user                    # 允许账号文件中的所有用户登录访问</div><div class="line">&lt;/Directory&gt;</div><div class="line"></div><div class="line"># 2. 使用 htpassword 命令创建帐号密码文件</div><div class="line">$ htpassword -cb /etc/httpd/.httpd tao tao</div></pre></td></tr></table></figure>
<h4 id="基于组账号进行认证"><a href="#基于组账号进行认证" class="headerlink" title="基于组账号进行认证"></a>基于组账号进行认证</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># 1. 定义安全域</div><div class="line">&lt;Directory &quot;&quot;&gt;</div><div class="line">    Options None</div><div class="line">    AllowOverride None</div><div class="line">    AuthType Basic</div><div class="line">    AuthName &quot;String“</div><div class="line">    AuthUserFile  &quot;/PATH/TO/HTTPD_USER_PASSWD_FILE&quot;</div><div class="line">    AuthGroupFile &quot;/PATH/TO/HTTPD_GROUP_FILE&quot;</div><div class="line">    Require  group  grpname1  grpname2 ...</div><div class="line">&lt;/Directory&gt;</div><div class="line"></div><div class="line"># 2. 创建用户账号和组账号文件；</div><div class="line">  # 组文件：每一行定义一个组</div><div class="line">  # GRP_NAME: username1  username2  ...</div><div class="line"></div><div class="line">&gt; htpasswd -m /etc/httpd/conf.d/.http_passwd  tom  # 创建帐号文件</div><div class="line">&gt; vim /etc/httpd/conf.d/.http_group                # 创建组文件</div><div class="line">  admin: tom jerry                            # tom, jerry 为 admin 组</div></pre></td></tr></table></figure>
<h2 id="4-虚拟主机"><a href="#4-虚拟主机" class="headerlink" title="4. 虚拟主机"></a>4. 虚拟主机</h2><p>通常如果我们在同一主机上提供了多个彼此毫不相干的服务时，通常是将他们隔离开，放在不同的域名下进行管理，而不是放在同一域名下；以免某一站点被劫持，所有站点都被劫持。虚拟主机就是帮助我们实现一个物理服务器服务多个网站的功能。</p>
<p>web 服务通过 tcp 进行通信，即每个服务都监听在一个特定的套接子socket 上，<code>socket = ip + 端口</code>，所以实现虚拟主机就有如下几种方法:</p>
<ol>
<li>IP相同，但端口不同；</li>
<li>IP不同，但端口均为默认端口；</li>
<li>FQDN不同: 为不同的 web 服务配置不同的域名</li>
</ol>
<p>需要注意的是请求报文首部中的 Host 字段会保留浏览器中用户请求的域名，因此服务器端可以通过解析Host 字段来路由请求。httpd 中心主机与虚拟主机不能混用，httpd2.2 中使用虚拟主机必需禁用’main’主机,禁用方法：<code>注释中心主机的DocumentRoot指令即可</code>。http2.4 中启用虚拟主机后，中心主机会自动禁用。</p>
<h3 id="4-1-虚拟主机的配置方法"><a href="#4-1-虚拟主机的配置方法" class="headerlink" title="4.1 虚拟主机的配置方法"></a>4.1 虚拟主机的配置方法</h3><p>所有能用在中心主机的配置，均可以用在虚拟主机中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost  IP:PORT&gt;</div><div class="line">    ServerName FQDN  </div><div class="line">    DocumentRoot  &quot;&quot;</div><div class="line"></div><div class="line">    # 其它可用指令：</div><div class="line">    ServerAlias：虚拟主机的别名；可多次使用；</div><div class="line">    ErrorLog：</div><div class="line">    CustomLog：</div><div class="line">    &lt;Directory &quot;&quot;&gt;</div><div class="line">    ...</div><div class="line">    &lt;/Directory&gt;</div><div class="line">    Alias</div><div class="line">    ...</div><div class="line"></div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<h3 id="4-2-基于IP的虚拟主机示例："><a href="#4-2-基于IP的虚拟主机示例：" class="headerlink" title="4.2 基于IP的虚拟主机示例："></a>4.2 基于IP的虚拟主机示例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost 192.168.1.120:80&gt;</div><div class="line">    ServerName web1.tao.com</div><div class="line">    DocumentRoot &quot;/vhosts/web1/htdocs&quot;</div><div class="line">    &lt;Directory &quot;/vhosts/web1/htdocs&quot;&gt;</div><div class="line">        Options None</div><div class="line">        AllowOverride None</div><div class="line">        Require all granted</div><div class="line">    &lt;/Directory&gt;</div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost 172.16.100.7:80&gt;</div><div class="line">  ServerName www.b.net</div><div class="line">  DocumentRoot &quot;/www/b.net/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost 172.16.100.8:80&gt;</div><div class="line">  ServerName www.c.org</div><div class="line">  DocumentRoot &quot;/www/c.org/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<h3 id="4-3-基于端口的虚拟主机："><a href="#4-3-基于端口的虚拟主机：" class="headerlink" title="4.3  基于端口的虚拟主机："></a>4.3  基于端口的虚拟主机：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost 172.16.100.6:80&gt;</div><div class="line">  ServerName www.a.com</div><div class="line">  DocumentRoot &quot;/www/a.com/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost 172.16.100.6:808&gt;</div><div class="line">  ServerName www.b.net</div><div class="line">  DocumentRoot &quot;/www/b.net/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost 172.16.100.6:8080&gt;</div><div class="line">  ServerName www.c.org</div><div class="line">  DocumentRoot &quot;/www/c.org/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<h3 id="4-4-基于-hostname-的虚拟主机："><a href="#4-4-基于-hostname-的虚拟主机：" class="headerlink" title="4.4 基于 hostname 的虚拟主机："></a>4.4 基于 hostname 的虚拟主机：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># 重要，http2.2 中需要指明 NameVirtualHost</div><div class="line">NameVirtualHost 172.16.100.6:80</div><div class="line"></div><div class="line">&lt;VirtualHost 172.16.100.6:80&gt;</div><div class="line">  ServerName www.a.com</div><div class="line">  DocumentRoot &quot;/www/a.com/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost 172.16.100.6:80&gt;</div><div class="line">  ServerName www.b.net</div><div class="line">  DocumentRoot &quot;/www/b.net/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost 172.16.100.6:80&gt;</div><div class="line">  ServerName www.c.org</div><div class="line">  DocumentRoot &quot;/www/c.org/htdocs&quot;</div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<h2 id="5-status页面"><a href="#5-status页面" class="headerlink" title="5. status页面"></a>5. status页面</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">LoadModule  status_module  modules/mod_status.so</div><div class="line">&lt;Location /server-status&gt;</div><div class="line">    SetHandler server-status</div><div class="line">    Order allow,deny</div><div class="line">    Allow from 172.16</div><div class="line">&lt;/Location&gt;</div></pre></td></tr></table></figure>

        </div>
        <!--  -->
        <footer class="article-footer">
            



    <a data-url="http://yoursite.com/2018/03/15/linux_mt/20-web-apache/httpd2.2基础配置/" data-id="ckbvtx2qm00go28u945bxzxp2" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-google-plus"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2018/03/16/linux_mt/20-web-apache/httpd2.4基础配置/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            17.6 httpd2.4 基础配置
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2018/03/14/linux_mt/20-web-apache/apache-httpd简介/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">17.4 apache httpd 简介</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/06/18/brendangregg/02_perf_example/" class="thumbnail">
    
    
        <span style="background-image:url(/images/linux_pf/perf_tracepoints_1700.png)" alt="2. perf Examples" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/运维/">运维</a></p>
                            <p class="item-title"><a href="/2020/06/18/brendangregg/02_perf_example/" class="title">2. perf Examples</a></p>
                            <p class="item-date"><time datetime="2020-06-17T16:00:00.000Z" itemprop="datePublished">2020-06-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/03/29/mysql/MySQL实战45讲/61_分区表/" class="thumbnail">
    
    
        <span style="background-image:url(/images/mysql/MySQL45讲/split_innodb.jpg)" alt="29 MYSQL 分区表" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/存储/">存储</a></p>
                            <p class="item-title"><a href="/2020/03/29/mysql/MySQL实战45讲/61_分区表/" class="title">29 MYSQL 分区表</a></p>
                            <p class="item-date"><time datetime="2020-03-28T16:00:00.000Z" itemprop="datePublished">2020-03-29</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/03/28/mysql/MySQL实战45讲/52_连接管理/" class="thumbnail">
    
    
        <span style="background-image:url(/images/mysql/MySQL45讲/kill_failure.png)" alt="28 MySQL 连接管理" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/存储/">存储</a></p>
                            <p class="item-title"><a href="/2020/03/28/mysql/MySQL实战45讲/52_连接管理/" class="title">28 MySQL 连接管理</a></p>
                            <p class="item-date"><time datetime="2020-03-27T16:00:00.000Z" itemprop="datePublished">2020-03-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/03/27/mysql/MySQL实战45讲/51_grant_privileges/" class="thumbnail">
    
    
        <span style="background-image:url(/images/mysql/MySQL45讲/grant_connect.png)" alt="27 MYSQL flush privileges" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/存储/">存储</a></p>
                            <p class="item-title"><a href="/2020/03/27/mysql/MySQL实战45讲/51_grant_privileges/" class="title">27 MYSQL flush privileges</a></p>
                            <p class="item-date"><time datetime="2020-03-26T16:00:00.000Z" itemprop="datePublished">2020-03-27</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/03/26/mysql/MySQL实战45讲/45_自增主键/" class="thumbnail">
    
    
        <span style="background-image:url(/images/mysql/MySQL45讲/auto_error.jpg)" alt="26 MYSQL 自增主键" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/存储/">存储</a></p>
                            <p class="item-title"><a href="/2020/03/26/mysql/MySQL实战45讲/45_自增主键/" class="title">26 MYSQL 自增主键</a></p>
                            <p class="item-date"><time datetime="2020-03-25T16:00:00.000Z" itemprop="datePublished">2020-03-26</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">56</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/存储/">存储</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维/">运维</a><span class="category-list-count">188</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">48</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">29</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Brendan-Gregg/">Brendan Gregg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8S/">K8S</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux性能调优/">Linux性能调优</a><span class="tag-list-count">49</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL实战45讲/">MySQL实战45讲</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go语言入门/">go语言入门</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wrapt/">wrapt</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/入门指南/">入门指南</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据密集型应用/">数据密集型应用</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a><span class="tag-list-count">39</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/极客时间/">极客时间</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-Linux/">马哥 Linux</a><span class="tag-list-count">135</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马哥-MySQL-运维/">马哥 MySQL 运维</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高性能的MySQL/">高性能的MySQL</a><span class="tag-list-count">5</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Brendan-Gregg/" style="font-size: 10px;">Brendan Gregg</a> <a href="/tags/K8S/" style="font-size: 10px;">K8S</a> <a href="/tags/Linux性能调优/" style="font-size: 19.09px;">Linux性能调优</a> <a href="/tags/MySQL实战45讲/" style="font-size: 17.27px;">MySQL实战45讲</a> <a href="/tags/go语言入门/" style="font-size: 15.45px;">go语言入门</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/python/" style="font-size: 11.82px;">python</a> <a href="/tags/wrapt/" style="font-size: 16.36px;">wrapt</a> <a href="/tags/入门指南/" style="font-size: 10.91px;">入门指南</a> <a href="/tags/数据密集型应用/" style="font-size: 12.73px;">数据密集型应用</a> <a href="/tags/数据结构与算法/" style="font-size: 18.18px;">数据结构与算法</a> <a href="/tags/极客时间/" style="font-size: 17.27px;">极客时间</a> <a href="/tags/马哥-Linux/" style="font-size: 20px;">马哥 Linux</a> <a href="/tags/马哥-MySQL-运维/" style="font-size: 14.55px;">马哥 MySQL 运维</a> <a href="/tags/高性能的MySQL/" style="font-size: 13.64px;">高性能的MySQL</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">讨论区</h3>
        <div class="widget">
            <h4> 联系我 <h4>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2020 宋涛</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://yoursite.com/2018/03/15/linux_mt/20-web-apache/httpd2.2基础配置/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
