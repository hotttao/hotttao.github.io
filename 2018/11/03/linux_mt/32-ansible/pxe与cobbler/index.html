<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>29.3 pxe与cobbler | 宋涛的博客</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="自动化运维" />
    
    <meta name="description" content="pxe与cobbler">
<meta name="keywords" content="自动化运维">
<meta property="og:type" content="article">
<meta property="og:title" content="29.3 pxe与cobbler">
<meta property="og:url" content="http://yoursite.com/2018/11/03/linux_mt/32-ansible/pxe与cobbler/index.html">
<meta property="og:site_name" content="宋涛的博客">
<meta property="og:description" content="pxe与cobbler">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/linux_mt/linux_ansible.jpg">
<meta property="og:updated_time" content="2019-02-11T15:37:36.650Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="29.3 pxe与cobbler">
<meta name="twitter:description" content="pxe与cobbler">
<meta name="twitter:image" content="http://yoursite.com/images/linux_mt/linux_ansible.jpg">
    

    
        <link rel="alternate" href="/" title="宋涛的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">漫步在大陆上的海龟</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Go/">Go</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Python/">Python</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/运维/">运维</a></li></ul>
                                    
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/运维/">运维</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-linux_mt/32-ansible/pxe与cobbler" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        29.3 pxe与cobbler
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2018/11/03/linux_mt/32-ansible/pxe与cobbler/" class="article-date">
            <time datetime="2018-11-02T16:00:00.000Z" itemprop="datePublished">2018-11-03</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/自动化运维/">自动化运维</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>pxe与cobbler</p>
<p><img src="/images/linux_mt/linux_ansible.jpg" alt="HA"><br><a id="more"></a></p>
<p>cobbler 就是 pex 环境的二次封装，为用户提供了一个管理工具，能将多个 pxe 环境整合在一起，让用户自行选择安装的系统。</p>
<h2 id="1，-cobbler-安装"><a href="#1，-cobbler-安装" class="headerlink" title="1， cobbler 安装"></a>1， cobbler 安装</h2><h3 id="1-1-rpm-包组成"><a href="#1-1-rpm-包组成" class="headerlink" title="1.1 rpm 包组成"></a>1.1 rpm 包组成</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">yum install cobbler</div><div class="line">$ rpm -ql cobbler|egrep -v &quot;(man|python|doc)&quot;</div><div class="line">/etc/cobbler                                # 配置文件</div><div class="line">/etc/cobbler/settings                       # 自身运行的配置文件</div><div class="line">/etc/cobbler/auth.conf</div><div class="line">/etc/cobbler/cheetah_macros</div><div class="line">/etc/cobbler/cobbler_bash</div><div class="line">/etc/cobbler/completions</div><div class="line">/etc/cobbler/dhcp.template</div><div class="line">/etc/cobbler/dnsmasq.template</div><div class="line">/etc/cobbler/import_rsync_whitelist</div><div class="line">/etc/cobbler/iso</div><div class="line">/etc/cobbler/iso/buildiso.template</div><div class="line">/etc/cobbler/ldap</div><div class="line">/etc/cobbler/ldap/ldap_authconfig.template</div><div class="line">/etc/cobbler/modules.conf</div><div class="line">/etc/cobbler/mongodb.conf</div><div class="line">/etc/cobbler/named.template</div><div class="line">/etc/cobbler/power                           # 服务的配置模板</div><div class="line">/etc/cobbler/power/fence_apc_snmp.template</div><div class="line">........</div><div class="line">/etc/cobbler/pxe</div><div class="line">/etc/cobbler/pxe/bootcfg_esxi5.template</div><div class="line">........</div></pre></td></tr></table></figure>
<h2 id="2-cobbler-环境配置"><a href="#2-cobbler-环境配置" class="headerlink" title="2. cobbler 环境配置"></a>2. cobbler 环境配置</h2><h3 id="2-1-cobbler-启动"><a href="#2-1-cobbler-启动" class="headerlink" title="2.1 cobbler 启动"></a>2.1 cobbler 启动</h3><p>cobbler 配置文件提供了对多种环境的配置，默认配置通常就可以直接使用。我们可以根据 cobbler 启动时的报错信息对必要的参数作出调整即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">systemctl restart httpd</div><div class="line">systemctl start cobblerd.service</div><div class="line"></div><div class="line">cobbler check   #</div><div class="line">1 : The &apos;server&apos; field in /etc/cobbler/settings must be set to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP for the boot server as reachable by all machines that will use it.</div><div class="line">2 : For PXE to be functional, the &apos;next_server&apos; field in /etc/cobbler/settings must be set to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.</div><div class="line">3 : SELinux is enabled. Please review the following wiki page for details on ensuring cobbler works correctly in your SELinux environment:</div><div class="line">    https://github.com/cobbler/cobbler/wiki/Selinux</div><div class="line">4 : change &apos;disable&apos; to &apos;no&apos; in /etc/xinetd.d/tftp</div><div class="line">5 : Some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run &apos;cobbler get-loaders&apos; to download them, or, if you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The &apos;cobbler get-loaders&apos; command is the easiest way to resolve these requirements.</div><div class="line">6 : enable and start rsyncd.service with systemctl</div><div class="line">7 : debmirror package is not installed, it will be required to manage debian deployments and repositories</div><div class="line">8 : The default password used by the sample templates for newly installed machines (default_password_crypted in /etc/cobbler/settings) is still set to &apos;cobbler&apos; and should be changed, try: &quot;openssl passwd -1 -salt &apos;random-phrase-here&apos; &apos;your-password-here&apos;&quot; to generate new one</div><div class="line">9 : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them</div></pre></td></tr></table></figure>
<p>cobbler 启动之后使用 check 对 cobbler 环境进行检查，会显示当前 cobbler 环境存在的问题，我们只要相应的修改配置文件解决这些问题，我们的 cobbler 环境也就准备好了。现在我们来解决这些问题</p>
<h3 id="2-2-环境配置"><a href="#2-2-环境配置" class="headerlink" title="2.2 环境配置"></a>2.2 环境配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 1. server 绑定地址，改为外网地址，以便其他主机能访问到</span></div><div class="line">vim  /etc/cobbler/settings</div><div class="line">server: 172.16.0.2</div><div class="line"></div><div class="line"><span class="comment"># 2. next server 指向改为 tftp server 地址</span></div><div class="line">vim  /etc/cobbler/settings</div><div class="line">next_server: 172.16.0.2</div><div class="line"></div><div class="line"><span class="comment"># 3. SELinux 设置为 Permissive，无影响</span></div><div class="line"></div><div class="line"><span class="comment"># 4. 编辑 /etc/xinetd.d/tftp 启动 tftp 服务</span></div><div class="line">vim /etc/xinetd.d/tftp</div><div class="line">service tftp</div><div class="line">&#123;</div><div class="line">        socket_type             = dgram</div><div class="line">        protocol                = udp</div><div class="line">        <span class="built_in">wait</span>                    = yes</div><div class="line">        user                    = root</div><div class="line">        server                  = /usr/sbin/in.tftpd</div><div class="line">        server_args             = -s /var/lib/tftpboot</div><div class="line">        <span class="built_in">disable</span>                 = no                      <span class="comment"># disable 改为 no</span></div><div class="line">        per_source              = 11</div><div class="line">        cps                     = 100 2</div><div class="line">        flags                   = IPv4</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># 5. 某些 bootloader 不在  /var/lib/cobbler/loaders 文件夹内</span></div><div class="line">yum install syslinux</div><div class="line">cp /usr/share/syslinux/&#123;menu.c32, pxelinux.0&#125; /var/lib/cobbler/loaders</div><div class="line"></div><div class="line"><span class="comment"># 6. 启用 rsync 服务</span></div><div class="line">systemctl start rsyncd.service</div><div class="line">systemctl <span class="built_in">enable</span> rsyncd.service</div><div class="line"></div><div class="line"><span class="comment"># 7. 安装 debmirror 包</span></div><div class="line">yum install debmirror</div><div class="line"></div><div class="line"><span class="comment"># 8. 修改 default_password_crypted 为超级用户设置的密码</span></div><div class="line"><span class="comment"># openssl passwd -1 -salt 'random-phrase-here' 'your-password-here'</span></div><div class="line">openssl passwd -1 -salt dgea 1234</div><div class="line"><span class="variable">$1</span><span class="variable">$dgea</span><span class="variable">$nPoeNaw5o4mv6kkXjhzVI1</span></div><div class="line"></div><div class="line">vim  /etc/cobbler/settings</div><div class="line">default_password_crypted: <span class="variable">$1</span><span class="variable">$dgea</span><span class="variable">$nPoeNaw5o4mv6kkXjhzVI1</span></div><div class="line"></div><div class="line"><span class="comment"># 9. 安装 fence-agents，这个是高可用集群所使用的组件，此处可以先忽略</span></div></pre></td></tr></table></figure>
<h3 id="2-3-配置-pxe-所依赖的服务"><a href="#2-3-配置-pxe-所依赖的服务" class="headerlink" title="2.3 配置 pxe 所依赖的服务"></a>2.3 配置 pxe 所依赖的服务</h3><p>cobbler 虽然依赖于 pxe 环境，但是对 pxe 支持自动配置，只需要提供 pex 对应服务的配置文件，cobbler 能实现自动安装，配置和启动。相比于使用 cobber 自动安装，可能我们手动配置其他服务器可能更熟悉快捷。所以接下来我们也是以手动配置为主。</p>
<p>手动管理 pxe 所需服务，还是由 cobbler 自己管理需要在配置文件中进行配置。如果是由 cobbler 自动配置，还需要在 <code>/etc/cobbler/modules.conf</code> 配置文件内为各服务提供配置参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">vim  /etc/cobbler/settings</div><div class="line">manage_dhcp: 0   # 0 表示手动配置，1 表示 cobbler 自动配置</div><div class="line">manage_dns: 0</div><div class="line">manage_tftpd: 1</div><div class="line">manage_rsync: 0</div><div class="line"></div><div class="line"># 为各服务配置服务参数</div><div class="line">$ cat /etc/cobbler/modules.conf |grep &quot;^\[&quot;</div><div class="line">[authentication]</div><div class="line">[authorization]</div><div class="line">[dns]</div><div class="line">[dhcp]</div><div class="line">[tftpd]</div></pre></td></tr></table></figure>
<h2 id="3-配置-cobbler-服务"><a href="#3-配置-cobbler-服务" class="headerlink" title="3. 配置 cobbler 服务"></a>3. 配置 cobbler 服务</h2><h3 id="3-1-cobbler-服务组成"><a href="#3-1-cobbler-服务组成" class="headerlink" title="3.1 cobbler 服务组成"></a>3.1 cobbler 服务组成</h3><p>如下图，cobbler 服务由如下几个部分组成，我们的目的就是配置好这几个组成部分。</p>
<p><img src="/images/linux_mt/cobbler.png" alt="dhcp"></p>
<ol>
<li>Disribution : <strong>distro</strong>, 表示一个发行版，包括内核，initrd</li>
<li>Repository: <strong>repo</strong> 创建仓库，比如yum仓库等，可以直接创建，也可以导入光盘的 yum 仓库</li>
<li>system： <strong>system</strong> 通过mac地址来定制化系统</li>
<li>profile： <strong>profile</strong> 对需要安装某个系统的所有配置，包括 kickstart 配置文件</li>
</ol>
<h3 id="3-2-cobbler-命令使用"><a href="#3-2-cobbler-命令使用" class="headerlink" title="3.2 cobbler 命令使用"></a>3.2 cobbler 命令使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># cobbler</div><div class="line">usage</div><div class="line">=====</div><div class="line">cobbler &lt;distro|profile|system|repo|image|mgmtclass|package|file&gt; ...</div><div class="line">        [add|edit|copy|getks*|list|remove|rename|report] [options|--help]</div><div class="line">cobbler &lt;aclsetup|buildiso|import|list|replicate|report|reposync|sync|validateks|version|signature|get-loaders|hardlink&gt; [options|--help]</div></pre></td></tr></table></figure>
<h4 id="子命令"><a href="#子命令" class="headerlink" title="子命令"></a>子命令</h4><p>首先 cobbler 有众多字命令，每一个子命令用于配置 cobbler 服务的一部份</p>
<ul>
<li><code>distro</code>: 用于配置 Disribution，核心是定义 kernel 和 initrd</li>
<li><code>profile</code>: 配置 profile</li>
<li><code>repo</code>: 配置 Repository yum 源</li>
<li><code>system</code>: 配置 system 定制系统</li>
</ul>
<h4 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h4><p>其次每个组件都有相关的管理操作:</p>
<ul>
<li>add</li>
<li>edit</li>
<li>copy</li>
<li>getks*</li>
<li>list</li>
<li>remove</li>
<li>rename</li>
<li>report</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cobbler distro list</div><div class="line">cobbler distro add --help</div></pre></td></tr></table></figure>
<h3 id="辅助命令"><a href="#辅助命令" class="headerlink" title="辅助命令"></a>辅助命令</h3><p>最后剩下的部分是 cobbler 的辅助命令，可以基于当前已有的光盘和 yum 仓库快速配置相应组件，也包括其他一些辅助功能</p>
<ul>
<li><code>buildiso</code></li>
<li><code>import</code>: 通过导入光盘自动生成一个 distro</li>
<li><code>sync</code>: cobbler 同步，每次执行新的操作之后最好都同步一次</li>
</ul>
<h3 id="3-2-distro-管理"><a href="#3-2-distro-管理" class="headerlink" title="3.2 distro 管理"></a>3.2 distro 管理</h3><p><code>cobbler import [options]</code></p>
<ul>
<li>作用: 通过导入光盘自动生成一个 distro</li>
<li>过程:<ul>
<li>会在 <code>/var/www/cobbler/ks_mirror</code> 下自动创建一个<code>--name</code>参数的文件夹，将光盘内的所有内容复制到该目录下</li>
<li>import 会自动为导入的 distro 生成一个 profile</li>
</ul>
</li>
<li>Options:<ul>
<li><code>-h, --help</code>: 帮助</li>
<li><code>--arch=ARCH</code>: 被导入操作系统的平台架构</li>
<li><code>--breed=BREED</code>:  the breed being imported</li>
<li><code>--os-version=OS_VERSION</code>: the version being imported</li>
<li><code>--path=PATH</code>: 光盘镜像挂载点</li>
<li><code>--name=NAME</code>: distro 名称</li>
<li><code>--available-as=AVAILABLE_AS</code>: tree is here, don’t mirror</li>
<li><code>--kickstart=KICKSTART_FILE</code>: assign this kickstart file</li>
<li><code>--rsync-flags=RSYNC_FLAGS</code>: pass additional flags to rsync</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">cobbler import --name=Centos-7.1-x86_64  --path=/cdrom</div><div class="line"></div><div class="line">ls /var/www/cobbler/ks_mirror</div><div class="line">Centos-7.1-x86_64</div><div class="line"></div><div class="line">cobbler distro list</div><div class="line">cobbler profile list</div><div class="line">cobbler sync</div></pre></td></tr></table></figure>
<h3 id="3-3-profile-管理"><a href="#3-3-profile-管理" class="headerlink" title="3.3 profile 管理"></a>3.3 profile 管理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># cobbler profile --help</div><div class="line">usage</div><div class="line">=====</div><div class="line">cobbler profile add</div><div class="line">cobbler profile copy</div><div class="line">cobbler profile dumpvars</div><div class="line">cobbler profile edit</div><div class="line">cobbler profile find</div><div class="line">cobbler profile getks</div><div class="line">cobbler profile list</div><div class="line">cobbler profile remove</div><div class="line">cobbler profile rename</div><div class="line">cobbler profile report</div></pre></td></tr></table></figure>
<h4 id="add"><a href="#add" class="headerlink" title="add"></a>add</h4><p><code>cobbler profile add options</code></p>
<ul>
<li>作用: 添加 profile</li>
<li>options:<ul>
<li><code>--name</code>  </li>
<li><code>--distro</code></li>
<li><code>--kickstart</code></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cobbler profile add --name=Centos-7.1-x86_64_service</div><div class="line">                    --distro=Centos-7.1-x86_64</div><div class="line">                    --kickstart=/var/lib/cobbler/kickstarts/ks.cfg</div><div class="line">cobbler sync  # 将新增的 profile 添加到 /var/lib/tfpt/pexlinux.cfg/default 的开机菜单中</div></pre></td></tr></table></figure>
<h4 id="edit"><a href="#edit" class="headerlink" title="edit"></a>edit</h4><p><code>cobbler profile edit options</code></p>
<h4 id="rename"><a href="#rename" class="headerlink" title="rename"></a>rename</h4><p><code>cobbler profile rename options</code></p>
<ul>
<li><code>--name</code></li>
<li><code>--newname</code></li>
</ul>
<h2 id="4-cobbler-web"><a href="#4-cobbler-web" class="headerlink" title="4. cobbler web"></a>4. cobbler web</h2><p>cobbler web 提供了以web 界面供我们配置 cobbler 服务使用。在使用 cobbler web 之前我们需要进行认证配置。其认证分为如下几种形式</p>
<h3 id="4-1-cobbler-web-认证"><a href="#4-1-cobbler-web-认证" class="headerlink" title="4.1 cobbler web 认证"></a>4.1 cobbler web 认证</h3><h4 id="auth-pam-认证"><a href="#auth-pam-认证" class="headerlink" title="auth_pam 认证"></a>auth_pam 认证</h4><p>此配置是基于系统帐户完成认证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">vim /etc/cobbler/modules.conf</div><div class="line">[authentication]</div><div class="line">module = authn_pam</div><div class="line"></div><div class="line"># 添加帐户</div><div class="line">useradd cblradmin</div><div class="line">echo cblpass |passwd --stdin cblradmin</div><div class="line"></div><div class="line"># 将用户添加至 cobbler user 组中</div><div class="line">vim /etc/cobbler/users</div><div class="line">[admins]</div><div class="line">admin = cblradmin</div><div class="line"></div><div class="line"># 重启服务</div><div class="line">systemctl restart cobblerd</div></pre></td></tr></table></figure>
<h4 id="authn-configfile"><a href="#authn-configfile" class="headerlink" title="authn_configfile"></a>authn_configfile</h4><p>此认证是基于帐号密码文件完成认证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">vim /etc/cobbler/modules.conf</div><div class="line">[authentication]</div><div class="line">module = authn_configfile</div><div class="line"></div><div class="line"># 创建认证文件</div><div class="line">htdigest -c /etc/cobbler/users.digest Cobbler cblradmin</div><div class="line"></div><div class="line"># 重启服务</div><div class="line">systemctl restart cobblerd</div></pre></td></tr></table></figure>
<p><code>htdigest [-c] passwordfile realm username</code></p>
<h3 id="4-2-cobbler-web-配置"><a href="#4-2-cobbler-web-配置" class="headerlink" title="4.2 cobbler web 配置"></a>4.2 cobbler web 配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># 1. 安装</div><div class="line">yum install cobbler-web</div><div class="line"></div><div class="line"># 2. 配置 authn_configfile 认证</div><div class="line">htdigest -c /etc/cobbler/users.digest Cobbler cblradmin</div><div class="line">Adding password for cblradmin in realm Cobbler.</div><div class="line">New password:</div><div class="line">Re-type new password:</div><div class="line"></div><div class="line"># 3. 重启 httpd</div><div class="line">systemctl restart httpd</div><div class="line"></div><div class="line"># 4. 访问</div><div class="line">http://ip/colbbler_web</div></pre></td></tr></table></figure>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://yoursite.com/2018/11/03/linux_mt/32-ansible/pxe与cobbler/" data-id="cjs7claks00jmochgljugm1b2" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-google-plus"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2018/11/04/linux_mt/32-ansible/运维自动化入门/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            29.4 运维自动化入门
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2018/11/03/alog/ac/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">27 AC 自动机</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/08/go/go_grammar/go_8/" class="thumbnail">
    
    
        <span style="background-image:url(/images/go/grammar/go_func.jpg)" alt="8 go 的委托模式" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2019/01/08/go/go_grammar/go_8/" class="title">8 go 的委托模式</a></p>
                            <p class="item-date"><time datetime="2019-01-07T16:00:00.000Z" itemprop="datePublished">2019-01-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/07/go/go_grammar/go_7/" class="thumbnail">
    
    
        <span style="background-image:url(/images/go/grammar/go_func.jpg)" alt="7 go 接口" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2019/01/07/go/go_grammar/go_7/" class="title">7 go 接口</a></p>
                            <p class="item-date"><time datetime="2019-01-06T16:00:00.000Z" itemprop="datePublished">2019-01-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/06/go/go_grammar/go_6/" class="thumbnail">
    
    
        <span style="background-image:url(/images/go/grammar/go_func.jpg)" alt="6 go 方法" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2019/01/06/go/go_grammar/go_6/" class="title">6 go 方法</a></p>
                            <p class="item-date"><time datetime="2019-01-05T16:00:00.000Z" itemprop="datePublished">2019-01-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/05/go/go_grammar/go_5/" class="thumbnail">
    
    
        <span style="background-image:url(/images/go/grammar/go_func.jpg)" alt="5 go 函数" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2019/01/05/go/go_grammar/go_5/" class="title">5 go 函数</a></p>
                            <p class="item-date"><time datetime="2019-01-04T16:00:00.000Z" itemprop="datePublished">2019-01-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/04/go/go_grammar/go_4/" class="thumbnail">
    
    
        <span style="background-image:url(/images/go/grammar/go_type.jpg)" alt="4 go 复合数据类型" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Go/">Go</a></p>
                            <p class="item-title"><a href="/2019/01/04/go/go_grammar/go_4/" class="title">4 go 复合数据类型</a></p>
                            <p class="item-date"><time datetime="2019-01-03T16:00:00.000Z" itemprop="datePublished">2019-01-04</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">56</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维/">运维</a><span class="category-list-count">140</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">49</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">29</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/">DNS</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8S/">K8S</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LAMP/">LAMP</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux基础/">Linux基础</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux开机启动/">Linux开机启动</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux进阶/">Linux进阶</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go语言入门/">go语言入门</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell脚本/">shell脚本</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/supervisor/">supervisor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tornado/">tornado</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unittest/">unittest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wrapt/">wrapt</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/函数装饰器/">函数装饰器</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单元测试/">单元测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a><span class="tag-list-count">39</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件共享服务/">文件共享服务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文本处理/">文本处理</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/磁盘与文件系统/">磁盘与文件系统</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/缓存系统/">缓存系统</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自动化运维/">自动化运维</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/负载均衡/">负载均衡</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/部署工具/">部署工具</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/防火墙/">防火墙</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高可用/">高可用</a><span class="tag-list-count">3</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/DNS/" style="font-size: 12px;">DNS</a> <a href="/tags/K8S/" style="font-size: 10px;">K8S</a> <a href="/tags/LAMP/" style="font-size: 18.67px;">LAMP</a> <a href="/tags/Linux基础/" style="font-size: 19.33px;">Linux基础</a> <a href="/tags/Linux开机启动/" style="font-size: 16px;">Linux开机启动</a> <a href="/tags/Linux进阶/" style="font-size: 14px;">Linux进阶</a> <a href="/tags/go语言入门/" style="font-size: 14.67px;">go语言入门</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/shell脚本/" style="font-size: 15.33px;">shell脚本</a> <a href="/tags/supervisor/" style="font-size: 10px;">supervisor</a> <a href="/tags/tornado/" style="font-size: 10px;">tornado</a> <a href="/tags/unittest/" style="font-size: 10px;">unittest</a> <a href="/tags/wrapt/" style="font-size: 18px;">wrapt</a> <a href="/tags/函数装饰器/" style="font-size: 18px;">函数装饰器</a> <a href="/tags/单元测试/" style="font-size: 10px;">单元测试</a> <a href="/tags/数据结构与算法/" style="font-size: 20px;">数据结构与算法</a> <a href="/tags/文件共享服务/" style="font-size: 10px;">文件共享服务</a> <a href="/tags/文本处理/" style="font-size: 13.33px;">文本处理</a> <a href="/tags/磁盘与文件系统/" style="font-size: 12.67px;">磁盘与文件系统</a> <a href="/tags/缓存系统/" style="font-size: 13.33px;">缓存系统</a> <a href="/tags/自动化运维/" style="font-size: 16.67px;">自动化运维</a> <a href="/tags/负载均衡/" style="font-size: 17.33px;">负载均衡</a> <a href="/tags/部署工具/" style="font-size: 10.67px;">部署工具</a> <a href="/tags/防火墙/" style="font-size: 14px;">防火墙</a> <a href="/tags/高可用/" style="font-size: 11.33px;">高可用</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">讨论区</h3>
        <div class="widget">
            <h4> 联系我 <h4>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2019 宋涛</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://yoursite.com/2018/11/03/linux_mt/32-ansible/pxe与cobbler/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
